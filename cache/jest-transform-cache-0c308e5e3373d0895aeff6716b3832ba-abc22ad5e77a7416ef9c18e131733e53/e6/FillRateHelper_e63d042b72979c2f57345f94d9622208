6e9f46d36b56d16da585cf85392b72e9
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var Info = (0, _createClass2.default)(function Info() {
  (0, _classCallCheck2.default)(this, Info);
  this.any_blank_count = 0;
  this.any_blank_ms = 0;
  this.any_blank_speed_sum = 0;
  this.mostly_blank_count = 0;
  this.mostly_blank_ms = 0;
  this.pixels_blank = 0;
  this.pixels_sampled = 0;
  this.pixels_scrolled = 0;
  this.total_time_spent = 0;
  this.sample_count = 0;
});
var DEBUG = false;
var _listeners = [];
var _minSampleCount = 10;
var _sampleRate = DEBUG ? 1 : null;
var FillRateHelper = function () {
  function FillRateHelper(getFrameMetrics) {
    (0, _classCallCheck2.default)(this, FillRateHelper);
    this._anyBlankStartTime = null;
    this._enabled = false;
    this._getFrameMetrics = void 0;
    this._info = new Info();
    this._mostlyBlankStartTime = null;
    this._samplesStartTime = null;
    this._getFrameMetrics = getFrameMetrics;
    this._enabled = (_sampleRate || 0) > Math.random();
    this._resetData();
  }
  (0, _createClass2.default)(FillRateHelper, [{
    key: "activate",
    value: function activate() {
      if (this._enabled && this._samplesStartTime == null) {
        DEBUG && console.debug('FillRateHelper: activate');
        this._samplesStartTime = global.performance.now();
      }
    }
  }, {
    key: "deactivateAndFlush",
    value: function deactivateAndFlush() {
      if (!this._enabled) {
        return;
      }
      var start = this._samplesStartTime;
      if (start == null) {
        DEBUG && console.debug('FillRateHelper: bail on deactivate with no start time');
        return;
      }
      if (this._info.sample_count < _minSampleCount) {
        this._resetData();
        return;
      }
      var total_time_spent = global.performance.now() - start;
      var info = Object.assign({}, this._info, {
        total_time_spent: total_time_spent
      });
      if (DEBUG) {
        var derived = {
          avg_blankness: this._info.pixels_blank / this._info.pixels_sampled,
          avg_speed: this._info.pixels_scrolled / (total_time_spent / 1000),
          avg_speed_when_any_blank: this._info.any_blank_speed_sum / this._info.any_blank_count,
          any_blank_per_min: this._info.any_blank_count / (total_time_spent / 1000 / 60),
          any_blank_time_frac: this._info.any_blank_ms / total_time_spent,
          mostly_blank_per_min: this._info.mostly_blank_count / (total_time_spent / 1000 / 60),
          mostly_blank_time_frac: this._info.mostly_blank_ms / total_time_spent
        };
        for (var key in derived) {
          derived[key] = Math.round(1000 * derived[key]) / 1000;
        }
        console.debug('FillRateHelper deactivateAndFlush: ', {
          derived: derived,
          info: info
        });
      }
      _listeners.forEach(function (listener) {
        return listener(info);
      });
      this._resetData();
    }
  }, {
    key: "computeBlankness",
    value: function computeBlankness(props, cellsAroundViewport, scrollMetrics) {
      if (!this._enabled || props.getItemCount(props.data) === 0 || cellsAroundViewport.last < cellsAroundViewport.first || this._samplesStartTime == null) {
        return 0;
      }
      var dOffset = scrollMetrics.dOffset,
        offset = scrollMetrics.offset,
        velocity = scrollMetrics.velocity,
        visibleLength = scrollMetrics.visibleLength;
      this._info.sample_count++;
      this._info.pixels_sampled += Math.round(visibleLength);
      this._info.pixels_scrolled += Math.round(Math.abs(dOffset));
      var scrollSpeed = Math.round(Math.abs(velocity) * 1000);
      var now = global.performance.now();
      if (this._anyBlankStartTime != null) {
        this._info.any_blank_ms += now - this._anyBlankStartTime;
      }
      this._anyBlankStartTime = null;
      if (this._mostlyBlankStartTime != null) {
        this._info.mostly_blank_ms += now - this._mostlyBlankStartTime;
      }
      this._mostlyBlankStartTime = null;
      var blankTop = 0;
      var first = cellsAroundViewport.first;
      var firstFrame = this._getFrameMetrics(first, props);
      while (first <= cellsAroundViewport.last && (!firstFrame || !firstFrame.inLayout)) {
        firstFrame = this._getFrameMetrics(first, props);
        first++;
      }
      if (firstFrame && first > 0) {
        blankTop = Math.min(visibleLength, Math.max(0, firstFrame.offset - offset));
      }
      var blankBottom = 0;
      var last = cellsAroundViewport.last;
      var lastFrame = this._getFrameMetrics(last, props);
      while (last >= cellsAroundViewport.first && (!lastFrame || !lastFrame.inLayout)) {
        lastFrame = this._getFrameMetrics(last, props);
        last--;
      }
      if (lastFrame && last < props.getItemCount(props.data) - 1) {
        var bottomEdge = lastFrame.offset + lastFrame.length;
        blankBottom = Math.min(visibleLength, Math.max(0, offset + visibleLength - bottomEdge));
      }
      var pixels_blank = Math.round(blankTop + blankBottom);
      var blankness = pixels_blank / visibleLength;
      if (blankness > 0) {
        this._anyBlankStartTime = now;
        this._info.any_blank_speed_sum += scrollSpeed;
        this._info.any_blank_count++;
        this._info.pixels_blank += pixels_blank;
        if (blankness > 0.5) {
          this._mostlyBlankStartTime = now;
          this._info.mostly_blank_count++;
        }
      } else if (scrollSpeed < 0.01 || Math.abs(dOffset) < 1) {
        this.deactivateAndFlush();
      }
      return blankness;
    }
  }, {
    key: "enabled",
    value: function enabled() {
      return this._enabled;
    }
  }, {
    key: "_resetData",
    value: function _resetData() {
      this._anyBlankStartTime = null;
      this._info = new Info();
      this._mostlyBlankStartTime = null;
      this._samplesStartTime = null;
    }
  }], [{
    key: "addListener",
    value: function addListener(callback) {
      if (_sampleRate === null) {
        console.warn('Call `FillRateHelper.setSampleRate` before `addListener`.');
      }
      _listeners.push(callback);
      return {
        remove: function remove() {
          _listeners = _listeners.filter(function (listener) {
            return callback !== listener;
          });
        }
      };
    }
  }, {
    key: "setSampleRate",
    value: function setSampleRate(sampleRate) {
      _sampleRate = sampleRate;
    }
  }, {
    key: "setMinSampleCount",
    value: function setMinSampleCount(minSampleCount) {
      _minSampleCount = minSampleCount;
    }
  }]);
  return FillRateHelper;
}();
module.exports = FillRateHelper;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJJbmZvIiwiYW55X2JsYW5rX2NvdW50IiwiYW55X2JsYW5rX21zIiwiYW55X2JsYW5rX3NwZWVkX3N1bSIsIm1vc3RseV9ibGFua19jb3VudCIsIm1vc3RseV9ibGFua19tcyIsInBpeGVsc19ibGFuayIsInBpeGVsc19zYW1wbGVkIiwicGl4ZWxzX3Njcm9sbGVkIiwidG90YWxfdGltZV9zcGVudCIsInNhbXBsZV9jb3VudCIsIkRFQlVHIiwiX2xpc3RlbmVycyIsIl9taW5TYW1wbGVDb3VudCIsIl9zYW1wbGVSYXRlIiwiRmlsbFJhdGVIZWxwZXIiLCJnZXRGcmFtZU1ldHJpY3MiLCJfYW55QmxhbmtTdGFydFRpbWUiLCJfZW5hYmxlZCIsIl9nZXRGcmFtZU1ldHJpY3MiLCJfaW5mbyIsIl9tb3N0bHlCbGFua1N0YXJ0VGltZSIsIl9zYW1wbGVzU3RhcnRUaW1lIiwiTWF0aCIsInJhbmRvbSIsIl9yZXNldERhdGEiLCJjb25zb2xlIiwiZGVidWciLCJnbG9iYWwiLCJwZXJmb3JtYW5jZSIsIm5vdyIsInN0YXJ0IiwiaW5mbyIsImRlcml2ZWQiLCJhdmdfYmxhbmtuZXNzIiwiYXZnX3NwZWVkIiwiYXZnX3NwZWVkX3doZW5fYW55X2JsYW5rIiwiYW55X2JsYW5rX3Blcl9taW4iLCJhbnlfYmxhbmtfdGltZV9mcmFjIiwibW9zdGx5X2JsYW5rX3Blcl9taW4iLCJtb3N0bHlfYmxhbmtfdGltZV9mcmFjIiwia2V5Iiwicm91bmQiLCJmb3JFYWNoIiwibGlzdGVuZXIiLCJwcm9wcyIsImNlbGxzQXJvdW5kVmlld3BvcnQiLCJzY3JvbGxNZXRyaWNzIiwiZ2V0SXRlbUNvdW50IiwiZGF0YSIsImxhc3QiLCJmaXJzdCIsImRPZmZzZXQiLCJvZmZzZXQiLCJ2ZWxvY2l0eSIsInZpc2libGVMZW5ndGgiLCJhYnMiLCJzY3JvbGxTcGVlZCIsImJsYW5rVG9wIiwiZmlyc3RGcmFtZSIsImluTGF5b3V0IiwibWluIiwibWF4IiwiYmxhbmtCb3R0b20iLCJsYXN0RnJhbWUiLCJib3R0b21FZGdlIiwibGVuZ3RoIiwiYmxhbmtuZXNzIiwiZGVhY3RpdmF0ZUFuZEZsdXNoIiwiY2FsbGJhY2siLCJ3YXJuIiwicHVzaCIsInJlbW92ZSIsImZpbHRlciIsInNhbXBsZVJhdGUiLCJtaW5TYW1wbGVDb3VudCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJGaWxsUmF0ZUhlbHBlci5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbmltcG9ydCB0eXBlIHtGcmFtZU1ldHJpY1Byb3BzfSBmcm9tICcuL1ZpcnR1YWxpemVkTGlzdFByb3BzJztcblxuZXhwb3J0IHR5cGUgRmlsbFJhdGVJbmZvID0gSW5mbztcblxuY2xhc3MgSW5mbyB7XG4gIGFueV9ibGFua19jb3VudDogbnVtYmVyID0gMDtcbiAgYW55X2JsYW5rX21zOiBudW1iZXIgPSAwO1xuICBhbnlfYmxhbmtfc3BlZWRfc3VtOiBudW1iZXIgPSAwO1xuICBtb3N0bHlfYmxhbmtfY291bnQ6IG51bWJlciA9IDA7XG4gIG1vc3RseV9ibGFua19tczogbnVtYmVyID0gMDtcbiAgcGl4ZWxzX2JsYW5rOiBudW1iZXIgPSAwO1xuICBwaXhlbHNfc2FtcGxlZDogbnVtYmVyID0gMDtcbiAgcGl4ZWxzX3Njcm9sbGVkOiBudW1iZXIgPSAwO1xuICB0b3RhbF90aW1lX3NwZW50OiBudW1iZXIgPSAwO1xuICBzYW1wbGVfY291bnQ6IG51bWJlciA9IDA7XG59XG5cbnR5cGUgRnJhbWVNZXRyaWNzID0ge1xuICBpbkxheW91dD86IGJvb2xlYW4sXG4gIGxlbmd0aDogbnVtYmVyLFxuICBvZmZzZXQ6IG51bWJlcixcbiAgLi4uXG59O1xuXG5jb25zdCBERUJVRyA9IGZhbHNlO1xuXG5sZXQgX2xpc3RlbmVyczogQXJyYXk8KEluZm8pID0+IHZvaWQ+ID0gW107XG5sZXQgX21pblNhbXBsZUNvdW50ID0gMTA7XG5sZXQgX3NhbXBsZVJhdGUgPSBERUJVRyA/IDEgOiBudWxsO1xuXG4vKipcbiAqIEEgaGVscGVyIGNsYXNzIGZvciBkZXRlY3Rpbmcgd2hlbiB0aGUgbWF4aW1lbSBmaWxsIHJhdGUgb2YgYFZpcnR1YWxpemVkTGlzdGAgaXMgZXhjZWVkZWQuXG4gKiBCeSBkZWZhdWx0IHRoZSBzYW1wbGluZyByYXRlIGlzIHNldCB0byB6ZXJvIGFuZCB0aGlzIHdpbGwgZG8gbm90aGluZy4gSWYgeW91IHdhbnQgdG8gY29sbGVjdFxuICogc2FtcGxlcyAoZS5nLiB0byBsb2cgdGhlbSksIG1ha2Ugc3VyZSB0byBjYWxsIGBGaWxsUmF0ZUhlbHBlci5zZXRTYW1wbGVSYXRlKDAuMC0xLjApYC5cbiAqXG4gKiBMaXN0ZW5lcnMgYW5kIHNhbXBsZSByYXRlIGFyZSBnbG9iYWwgZm9yIGFsbCBgVmlydHVhbGl6ZWRMaXN0YHMgLSB0eXBpY2FsIHVzYWdlIHdpbGwgY29tYmluZSB3aXRoXG4gKiBgU2NlbmVUcmFja2VyLmdldEFjdGl2ZVNjZW5lYCB0byBkZXRlcm1pbmUgdGhlIGNvbnRleHQgb2YgdGhlIGV2ZW50cy5cbiAqL1xuY2xhc3MgRmlsbFJhdGVIZWxwZXIge1xuICBfYW55QmxhbmtTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuICBfZW5hYmxlZCA9IGZhbHNlO1xuICBfZ2V0RnJhbWVNZXRyaWNzOiAoaW5kZXg6IG51bWJlciwgcHJvcHM6IEZyYW1lTWV0cmljUHJvcHMpID0+ID9GcmFtZU1ldHJpY3M7XG4gIF9pbmZvOiBJbmZvID0gbmV3IEluZm8oKTtcbiAgX21vc3RseUJsYW5rU3RhcnRUaW1lOiA/bnVtYmVyID0gbnVsbDtcbiAgX3NhbXBsZXNTdGFydFRpbWU6ID9udW1iZXIgPSBudWxsO1xuXG4gIHN0YXRpYyBhZGRMaXN0ZW5lcihjYWxsYmFjazogRmlsbFJhdGVJbmZvID0+IHZvaWQpOiB7XG4gICAgcmVtb3ZlOiAoKSA9PiB2b2lkLFxuICAgIC4uLlxuICB9IHtcbiAgICBpZiAoX3NhbXBsZVJhdGUgPT09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybignQ2FsbCBgRmlsbFJhdGVIZWxwZXIuc2V0U2FtcGxlUmF0ZWAgYmVmb3JlIGBhZGRMaXN0ZW5lcmAuJyk7XG4gICAgfVxuICAgIF9saXN0ZW5lcnMucHVzaChjYWxsYmFjayk7XG4gICAgcmV0dXJuIHtcbiAgICAgIHJlbW92ZTogKCkgPT4ge1xuICAgICAgICBfbGlzdGVuZXJzID0gX2xpc3RlbmVycy5maWx0ZXIobGlzdGVuZXIgPT4gY2FsbGJhY2sgIT09IGxpc3RlbmVyKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRTYW1wbGVSYXRlKHNhbXBsZVJhdGU6IG51bWJlcikge1xuICAgIF9zYW1wbGVSYXRlID0gc2FtcGxlUmF0ZTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRNaW5TYW1wbGVDb3VudChtaW5TYW1wbGVDb3VudDogbnVtYmVyKSB7XG4gICAgX21pblNhbXBsZUNvdW50ID0gbWluU2FtcGxlQ291bnQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBnZXRGcmFtZU1ldHJpY3M6IChpbmRleDogbnVtYmVyLCBwcm9wczogRnJhbWVNZXRyaWNQcm9wcykgPT4gP0ZyYW1lTWV0cmljcyxcbiAgKSB7XG4gICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzID0gZ2V0RnJhbWVNZXRyaWNzO1xuICAgIHRoaXMuX2VuYWJsZWQgPSAoX3NhbXBsZVJhdGUgfHwgMCkgPiBNYXRoLnJhbmRvbSgpO1xuICAgIHRoaXMuX3Jlc2V0RGF0YSgpO1xuICB9XG5cbiAgYWN0aXZhdGUoKSB7XG4gICAgaWYgKHRoaXMuX2VuYWJsZWQgJiYgdGhpcy5fc2FtcGxlc1N0YXJ0VGltZSA9PSBudWxsKSB7XG4gICAgICBERUJVRyAmJiBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlcjogYWN0aXZhdGUnKTtcbiAgICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgfVxuICB9XG5cbiAgZGVhY3RpdmF0ZUFuZEZsdXNoKCkge1xuICAgIGlmICghdGhpcy5fZW5hYmxlZCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBjb25zdCBzdGFydCA9IHRoaXMuX3NhbXBsZXNTdGFydFRpbWU7IC8vIGNvbnN0IGZvciBmbG93XG4gICAgaWYgKHN0YXJ0ID09IG51bGwpIHtcbiAgICAgIERFQlVHICYmXG4gICAgICAgIGNvbnNvbGUuZGVidWcoJ0ZpbGxSYXRlSGVscGVyOiBiYWlsIG9uIGRlYWN0aXZhdGUgd2l0aCBubyBzdGFydCB0aW1lJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmICh0aGlzLl9pbmZvLnNhbXBsZV9jb3VudCA8IF9taW5TYW1wbGVDb3VudCkge1xuICAgICAgLy8gRG9uJ3QgYm90aGVyIHdpdGggdW5kZXItc2FtcGxlZCBldmVudHMuXG4gICAgICB0aGlzLl9yZXNldERhdGEoKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgdG90YWxfdGltZV9zcGVudCA9IGdsb2JhbC5wZXJmb3JtYW5jZS5ub3coKSAtIHN0YXJ0O1xuICAgIGNvbnN0IGluZm86IGFueSA9IHtcbiAgICAgIC4uLnRoaXMuX2luZm8sXG4gICAgICB0b3RhbF90aW1lX3NwZW50LFxuICAgIH07XG4gICAgaWYgKERFQlVHKSB7XG4gICAgICBjb25zdCBkZXJpdmVkID0ge1xuICAgICAgICBhdmdfYmxhbmtuZXNzOiB0aGlzLl9pbmZvLnBpeGVsc19ibGFuayAvIHRoaXMuX2luZm8ucGl4ZWxzX3NhbXBsZWQsXG4gICAgICAgIGF2Z19zcGVlZDogdGhpcy5faW5mby5waXhlbHNfc2Nyb2xsZWQgLyAodG90YWxfdGltZV9zcGVudCAvIDEwMDApLFxuICAgICAgICBhdmdfc3BlZWRfd2hlbl9hbnlfYmxhbms6XG4gICAgICAgICAgdGhpcy5faW5mby5hbnlfYmxhbmtfc3BlZWRfc3VtIC8gdGhpcy5faW5mby5hbnlfYmxhbmtfY291bnQsXG4gICAgICAgIGFueV9ibGFua19wZXJfbWluOlxuICAgICAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX2NvdW50IC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwIC8gNjApLFxuICAgICAgICBhbnlfYmxhbmtfdGltZV9mcmFjOiB0aGlzLl9pbmZvLmFueV9ibGFua19tcyAvIHRvdGFsX3RpbWVfc3BlbnQsXG4gICAgICAgIG1vc3RseV9ibGFua19wZXJfbWluOlxuICAgICAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX2NvdW50IC8gKHRvdGFsX3RpbWVfc3BlbnQgLyAxMDAwIC8gNjApLFxuICAgICAgICBtb3N0bHlfYmxhbmtfdGltZV9mcmFjOiB0aGlzLl9pbmZvLm1vc3RseV9ibGFua19tcyAvIHRvdGFsX3RpbWVfc3BlbnQsXG4gICAgICB9O1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gZGVyaXZlZCkge1xuICAgICAgICAvLyAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ11cbiAgICAgICAgZGVyaXZlZFtrZXldID0gTWF0aC5yb3VuZCgxMDAwICogZGVyaXZlZFtrZXldKSAvIDEwMDA7XG4gICAgICB9XG4gICAgICBjb25zb2xlLmRlYnVnKCdGaWxsUmF0ZUhlbHBlciBkZWFjdGl2YXRlQW5kRmx1c2g6ICcsIHtkZXJpdmVkLCBpbmZvfSk7XG4gICAgfVxuICAgIF9saXN0ZW5lcnMuZm9yRWFjaChsaXN0ZW5lciA9PiBsaXN0ZW5lcihpbmZvKSk7XG4gICAgdGhpcy5fcmVzZXREYXRhKCk7XG4gIH1cblxuICBjb21wdXRlQmxhbmtuZXNzKFxuICAgIHByb3BzOiB7XG4gICAgICAuLi5GcmFtZU1ldHJpY1Byb3BzLFxuICAgICAgaW5pdGlhbE51bVRvUmVuZGVyPzogP251bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgY2VsbHNBcm91bmRWaWV3cG9ydDoge1xuICAgICAgZmlyc3Q6IG51bWJlcixcbiAgICAgIGxhc3Q6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0sXG4gICAgc2Nyb2xsTWV0cmljczoge1xuICAgICAgZE9mZnNldDogbnVtYmVyLFxuICAgICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgICB2ZWxvY2l0eTogbnVtYmVyLFxuICAgICAgdmlzaWJsZUxlbmd0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfSxcbiAgKTogbnVtYmVyIHtcbiAgICBpZiAoXG4gICAgICAhdGhpcy5fZW5hYmxlZCB8fFxuICAgICAgcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpID09PSAwIHx8XG4gICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgPCBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0IHx8XG4gICAgICB0aGlzLl9zYW1wbGVzU3RhcnRUaW1lID09IG51bGxcbiAgICApIHtcbiAgICAgIHJldHVybiAwO1xuICAgIH1cbiAgICBjb25zdCB7ZE9mZnNldCwgb2Zmc2V0LCB2ZWxvY2l0eSwgdmlzaWJsZUxlbmd0aH0gPSBzY3JvbGxNZXRyaWNzO1xuXG4gICAgLy8gRGVub21pbmF0b3IgbWV0cmljcyB0aGF0IHdlIHRyYWNrIGZvciBhbGwgZXZlbnRzIC0gbW9zdCBvZiB0aGUgdGltZSB0aGVyZSBpcyBubyBibGFua25lc3MgYW5kXG4gICAgLy8gd2Ugd2FudCB0byBjYXB0dXJlIHRoYXQuXG4gICAgdGhpcy5faW5mby5zYW1wbGVfY291bnQrKztcbiAgICB0aGlzLl9pbmZvLnBpeGVsc19zYW1wbGVkICs9IE1hdGgucm91bmQodmlzaWJsZUxlbmd0aCk7XG4gICAgdGhpcy5faW5mby5waXhlbHNfc2Nyb2xsZWQgKz0gTWF0aC5yb3VuZChNYXRoLmFicyhkT2Zmc2V0KSk7XG4gICAgY29uc3Qgc2Nyb2xsU3BlZWQgPSBNYXRoLnJvdW5kKE1hdGguYWJzKHZlbG9jaXR5KSAqIDEwMDApOyAvLyBweCAvIHNlY1xuXG4gICAgLy8gV2hldGhlciBibGFuayBub3cgb3Igbm90LCByZWNvcmQgdGhlIGVsYXBzZWQgdGltZSBibGFuayBpZiB3ZSB3ZXJlIGJsYW5rIGxhc3QgdGltZS5cbiAgICBjb25zdCBub3cgPSBnbG9iYWwucGVyZm9ybWFuY2Uubm93KCk7XG4gICAgaWYgKHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8uYW55X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX2FueUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgaWYgKHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lICE9IG51bGwpIHtcbiAgICAgIHRoaXMuX2luZm8ubW9zdGx5X2JsYW5rX21zICs9IG5vdyAtIHRoaXMuX21vc3RseUJsYW5rU3RhcnRUaW1lO1xuICAgIH1cbiAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG5cbiAgICBsZXQgYmxhbmtUb3AgPSAwO1xuICAgIGxldCBmaXJzdCA9IGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3Q7XG4gICAgbGV0IGZpcnN0RnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3MoZmlyc3QsIHByb3BzKTtcbiAgICB3aGlsZSAoXG4gICAgICBmaXJzdCA8PSBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgJiZcbiAgICAgICghZmlyc3RGcmFtZSB8fCAhZmlyc3RGcmFtZS5pbkxheW91dClcbiAgICApIHtcbiAgICAgIGZpcnN0RnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3MoZmlyc3QsIHByb3BzKTtcbiAgICAgIGZpcnN0Kys7XG4gICAgfVxuICAgIC8vIE9ubHkgY291bnQgYmxhbmtUb3AgaWYgd2UgYXJlbid0IHJlbmRlcmluZyB0aGUgZmlyc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlIGhlYWRlclxuICAgIC8vIGFzIGJsYW5rLlxuICAgIGlmIChmaXJzdEZyYW1lICYmIGZpcnN0ID4gMCkge1xuICAgICAgYmxhbmtUb3AgPSBNYXRoLm1pbihcbiAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgTWF0aC5tYXgoMCwgZmlyc3RGcmFtZS5vZmZzZXQgLSBvZmZzZXQpLFxuICAgICAgKTtcbiAgICB9XG4gICAgbGV0IGJsYW5rQm90dG9tID0gMDtcbiAgICBsZXQgbGFzdCA9IGNlbGxzQXJvdW5kVmlld3BvcnQubGFzdDtcbiAgICBsZXQgbGFzdEZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGxhc3QsIHByb3BzKTtcbiAgICB3aGlsZSAoXG4gICAgICBsYXN0ID49IGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3QgJiZcbiAgICAgICghbGFzdEZyYW1lIHx8ICFsYXN0RnJhbWUuaW5MYXlvdXQpXG4gICAgKSB7XG4gICAgICBsYXN0RnJhbWUgPSB0aGlzLl9nZXRGcmFtZU1ldHJpY3MobGFzdCwgcHJvcHMpO1xuICAgICAgbGFzdC0tO1xuICAgIH1cbiAgICAvLyBPbmx5IGNvdW50IGJsYW5rQm90dG9tIGlmIHdlIGFyZW4ndCByZW5kZXJpbmcgdGhlIGxhc3QgaXRlbSwgb3RoZXJ3aXNlIHdlIHdpbGwgY291bnQgdGhlXG4gICAgLy8gZm9vdGVyIGFzIGJsYW5rLlxuICAgIGlmIChsYXN0RnJhbWUgJiYgbGFzdCA8IHByb3BzLmdldEl0ZW1Db3VudChwcm9wcy5kYXRhKSAtIDEpIHtcbiAgICAgIGNvbnN0IGJvdHRvbUVkZ2UgPSBsYXN0RnJhbWUub2Zmc2V0ICsgbGFzdEZyYW1lLmxlbmd0aDtcbiAgICAgIGJsYW5rQm90dG9tID0gTWF0aC5taW4oXG4gICAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICAgIE1hdGgubWF4KDAsIG9mZnNldCArIHZpc2libGVMZW5ndGggLSBib3R0b21FZGdlKSxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IHBpeGVsc19ibGFuayA9IE1hdGgucm91bmQoYmxhbmtUb3AgKyBibGFua0JvdHRvbSk7XG4gICAgY29uc3QgYmxhbmtuZXNzID0gcGl4ZWxzX2JsYW5rIC8gdmlzaWJsZUxlbmd0aDtcbiAgICBpZiAoYmxhbmtuZXNzID4gMCkge1xuICAgICAgdGhpcy5fYW55QmxhbmtTdGFydFRpbWUgPSBub3c7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19zcGVlZF9zdW0gKz0gc2Nyb2xsU3BlZWQ7XG4gICAgICB0aGlzLl9pbmZvLmFueV9ibGFua19jb3VudCsrO1xuICAgICAgdGhpcy5faW5mby5waXhlbHNfYmxhbmsgKz0gcGl4ZWxzX2JsYW5rO1xuICAgICAgaWYgKGJsYW5rbmVzcyA+IDAuNSkge1xuICAgICAgICB0aGlzLl9tb3N0bHlCbGFua1N0YXJ0VGltZSA9IG5vdztcbiAgICAgICAgdGhpcy5faW5mby5tb3N0bHlfYmxhbmtfY291bnQrKztcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHNjcm9sbFNwZWVkIDwgMC4wMSB8fCBNYXRoLmFicyhkT2Zmc2V0KSA8IDEpIHtcbiAgICAgIHRoaXMuZGVhY3RpdmF0ZUFuZEZsdXNoKCk7XG4gICAgfVxuICAgIHJldHVybiBibGFua25lc3M7XG4gIH1cblxuICBlbmFibGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLl9lbmFibGVkO1xuICB9XG5cbiAgX3Jlc2V0RGF0YSgpIHtcbiAgICB0aGlzLl9hbnlCbGFua1N0YXJ0VGltZSA9IG51bGw7XG4gICAgdGhpcy5faW5mbyA9IG5ldyBJbmZvKCk7XG4gICAgdGhpcy5fbW9zdGx5QmxhbmtTdGFydFRpbWUgPSBudWxsO1xuICAgIHRoaXMuX3NhbXBsZXNTdGFydFRpbWUgPSBudWxsO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gRmlsbFJhdGVIZWxwZXI7XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7O0FBQUM7QUFBQTtBQUFBO0FBQUEsSUFN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