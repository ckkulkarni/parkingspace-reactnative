{"version":3,"names":["ParkingSpace","route","numspaces","params","useState","Array","fill","details","setDetails","navigation","useNavigation","selectedSpace","setSelected","showPicker","setPicker","Date","time","setTime","reg","setReg","spaces","i","push","parkingSpaces","setParkingSpaces","handleAddParkingSpace","length","handleSelected","space","occupied","selected","navigate","markSpaceAsUnoccupied","handleParkVehicle","newDetails","setVehicleRegistration","text","hidePicker","setParkingTime","selectedTime","styles","container","buttonStyling1","map","parkingSpace","spaceDetails","color","toLocaleTimeString","parkingNumber","formContainer","setTimeButton","formInput","buttonStyling2","StyleSheet","create","flexGrow","alignItems","flexDirection","flexWrap","justifyContent","backgroundColor","width","height","borderWidth","borderStyle","borderColor","margin","marginHorizontal","marginTop","fontSize","top","position","padding","flex","textAlign","bottom","left","right","paddingHorizontal","paddingVertical","zIndex","borderRadius"],"sources":["ParkingSpace.tsx"],"sourcesContent":["import React, {useState} from 'react';\r\nimport {View} from 'react-native';\r\nimport {\r\n  Text,\r\n  StyleSheet,\r\n  ScrollView,\r\n  TextInput,\r\n  TouchableOpacity,\r\n} from 'react-native';\r\nimport DateTimePickerModal from 'react-native-modal-datetime-picker';\r\nimport {useNavigation} from '@react-navigation/native';\r\nimport {NativeStackNavigationProp} from '@react-navigation/native-stack';\r\n\r\nexport default function ParkingSpace({route}: any) {\r\n  const {numspaces} = route.params;\r\n  const [details, setDetails] = useState<\r\n    Array<{\r\n      selected: number;\r\n      time: Date;\r\n      reg: string;\r\n    } | null>\r\n  >(Array(numspaces).fill(null));\r\n\r\n  const navigation = useNavigation<NativeStackNavigationProp<any>>();\r\n  const [selectedSpace, setSelected] = useState(0);\r\n  const [showPicker, setPicker] = useState(false);\r\n  const [time, setTime] = useState(new Date());\r\n  const [reg, setReg] = useState('');\r\n  const [parkingSpaces, setParkingSpaces] = useState(() => {\r\n    const spaces = [];\r\n    for (let i = 1; i <= numspaces; i++) {\r\n      spaces.push(i);\r\n    }\r\n    return spaces;\r\n  });\r\n  const handleAddParkingSpace = () => {\r\n    setParkingSpaces(spaces => [...spaces, spaces.length + 1]);\r\n  };\r\n  function handleSelected(space: number) {\r\n    const occupied =\r\n      details[space - 1] && details[space - 1]?.selected === space;\r\n    if (occupied) {\r\n      navigation.navigate('Payment', {\r\n        spaces: numspaces,\r\n        space: space,\r\n        details: {\r\n          time: details[space - 1]?.time,\r\n          reg: details[space - 1]?.reg,\r\n        },\r\n        markSpaceAsUnoccupied: (space: number) => markSpaceAsUnoccupied(space),\r\n      });\r\n    } else {\r\n      setSelected(space);\r\n    }\r\n  }\r\n\r\n  function handleParkVehicle(selectedSpace: number) {\r\n    const newDetails = [...details];\r\n    newDetails[selectedSpace - 1] = {\r\n      selected: selectedSpace,\r\n      time: time,\r\n      reg: reg,\r\n    };\r\n    setDetails(newDetails);\r\n  }\r\n\r\n  const setVehicleRegistration = (text: string) => {\r\n    setReg(text);\r\n  };\r\n  const hidePicker = () => {\r\n    setPicker(false);\r\n  };\r\n\r\n  const setParkingTime = (selectedTime: Date) => {\r\n    setTime(selectedTime);\r\n    hidePicker();\r\n  };\r\n  function markSpaceAsUnoccupied(space: number) {\r\n    const newDetails = [...details];\r\n    newDetails[space - 1] = null;\r\n    setDetails(newDetails);\r\n  }\r\n\r\n  return (\r\n    <ScrollView contentContainerStyle={styles.container} horizontal={true}>\r\n      <TouchableOpacity\r\n        testID=\"add-parking-space-button\"\r\n        style={styles.buttonStyling1}\r\n        onPress={handleAddParkingSpace}>\r\n        <Text>Create New Parking</Text>\r\n      </TouchableOpacity>\r\n      {parkingSpaces.map(space => (\r\n        <TouchableOpacity\r\n          testID={`parking-space-${space}`}\r\n          onPress={() => handleSelected(space)}\r\n          key={space}\r\n          style={styles.parkingSpace}>\r\n          {details[space - 1] && details[space - 1]?.selected === space ? (\r\n            <View style={styles.spaceDetails}>\r\n              <Text style={{color: 'white'}}>{space}</Text>\r\n              <Text style={{color: 'white'}}>{details[space - 1]?.reg}</Text>\r\n              <Text style={{color: 'white'}}>\r\n                {details[space - 1]?.time.toLocaleTimeString()}\r\n              </Text>\r\n            </View>\r\n          ) : (\r\n            <Text style={styles.parkingNumber}>{space}</Text>\r\n          )}\r\n        </TouchableOpacity>\r\n      ))}\r\n\r\n      {selectedSpace > 0 && (\r\n        <View style={styles.formContainer} testID=\"selected-parking-space\">\r\n          <Text>{reg}</Text>\r\n          <DateTimePickerModal\r\n            isVisible={showPicker}\r\n            mode=\"time\"\r\n            onConfirm={setParkingTime}\r\n            onCancel={() => hidePicker()}\r\n          />\r\n          <Text testID=\"parking-time-label\">Parking Time (tap to change)</Text>\r\n          <TouchableOpacity\r\n            style={styles.setTimeButton}\r\n            onPress={() => {\r\n              setPicker(true);\r\n            }}\r\n            testID=\"change-time-button\">\r\n            <Text testID=\"parking-time\">{time.toLocaleTimeString()}</Text>\r\n          </TouchableOpacity>\r\n          <Text testID=\"car-registration-label\">Car Registration</Text>\r\n          <TextInput\r\n            placeholder=\"Enter vehicle registration\"\r\n            onChangeText={setVehicleRegistration}\r\n            style={styles.formInput}\r\n            testID=\"vehicle-registration-input\"\r\n          />\r\n          <TouchableOpacity\r\n            testID=\"submit-button\"\r\n            onPress={() => handleParkVehicle(selectedSpace)}\r\n            style={styles.buttonStyling2}>\r\n            <Text style={{color: 'white'}}>Submit</Text>\r\n          </TouchableOpacity>\r\n\r\n          <TouchableOpacity\r\n            style={styles.buttonStyling2}\r\n            onPress={() => {\r\n              setSelected(0);\r\n              setVehicleRegistration('');\r\n              setParkingTime(new Date());\r\n            }}\r\n            testID=\"close-button\">\r\n            <Text style={{color: 'white'}}>Close</Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      )}\r\n    </ScrollView>\r\n  );\r\n}\r\nconst styles = StyleSheet.create({\r\n  container: {\r\n    flexGrow: 1,\r\n    alignItems: 'center',\r\n    flexDirection: 'column',\r\n    flexWrap: 'wrap',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#F5EFEF',\r\n  },\r\n  parkingSpace: {\r\n    width: 110,\r\n    backgroundColor: '#EFEFEF',\r\n    height: 85,\r\n    borderWidth: 2.5,\r\n    borderStyle: 'dotted',\r\n    borderColor: '#49C78C',\r\n    margin: 5,\r\n    marginHorizontal: 48,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    marginTop: 20,\r\n  },\r\n  parkingNumber: {\r\n    fontSize: 20,\r\n  },\r\n  buttonStyling1: {\r\n    top: 0,\r\n    position: 'absolute',\r\n    padding: 10,\r\n    backgroundColor: '#E1EDF8',\r\n  },\r\n  formInput: {\r\n    marginTop: 7,\r\n    width: '100%',\r\n    height: 33,\r\n    borderWidth: 1,\r\n    borderColor: '#ccc',\r\n    padding: 7,\r\n    flex: 1,\r\n    textAlign: 'center',\r\n  },\r\n  formContainer: {\r\n    position: 'absolute',\r\n    bottom: 0,\r\n    left: 0,\r\n    right: 0,\r\n    backgroundColor: '#FFFFFF',\r\n    paddingHorizontal: 20,\r\n    paddingVertical: 10,\r\n    zIndex: 1,\r\n  },\r\n  buttonStyling2: {\r\n    marginTop: 5,\r\n    backgroundColor: '#0551B4',\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    padding: 7,\r\n    borderRadius: 5,\r\n  },\r\n  setTimeButton: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: 'white',\r\n    borderWidth: 1,\r\n    padding: 5,\r\n  },\r\n  spaceDetails: {\r\n    flex: 1,\r\n    alignItems: 'center',\r\n    justifyContent: 'center',\r\n    backgroundColor: '#0551B4',\r\n    padding: 25,\r\n  },\r\n});\r\n"],"mappings":"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"}