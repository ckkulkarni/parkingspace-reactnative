cc1d2c8b9981731c9ed1b8b851a05324
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _BatchedBridge = _interopRequireDefault(require("../BatchedBridge/BatchedBridge"));
var _BugReporting = _interopRequireDefault(require("../BugReporting/BugReporting"));
var _createPerformanceLogger = _interopRequireDefault(require("../Utilities/createPerformanceLogger"));
var _infoLog = _interopRequireDefault(require("../Utilities/infoLog"));
var _SceneTracker = _interopRequireDefault(require("../Utilities/SceneTracker"));
var _DisplayMode = require("./DisplayMode");
var _HeadlessJsTaskError = _interopRequireDefault(require("./HeadlessJsTaskError"));
var _NativeHeadlessJsTaskSupport = _interopRequireDefault(require("./NativeHeadlessJsTaskSupport"));
var _renderApplication = _interopRequireDefault(require("./renderApplication"));
var _RendererProxy = require("./RendererProxy");
var _invariant = _interopRequireDefault(require("invariant"));
var runnables = {};
var runCount = 1;
var sections = {};
var taskProviders = new Map();
var taskCancelProviders = new Map();
var componentProviderInstrumentationHook = function componentProviderInstrumentationHook(component) {
  return component();
};
var wrapperComponentProvider;
var showArchitectureIndicator = false;
var AppRegistry = {
  setWrapperComponentProvider: function setWrapperComponentProvider(provider) {
    wrapperComponentProvider = provider;
  },
  enableArchitectureIndicator: function enableArchitectureIndicator(enabled) {
    showArchitectureIndicator = enabled;
  },
  registerConfig: function registerConfig(config) {
    config.forEach(function (appConfig) {
      if (appConfig.run) {
        AppRegistry.registerRunnable(appConfig.appKey, appConfig.run);
      } else {
        (0, _invariant.default)(appConfig.component != null, 'AppRegistry.registerConfig(...): Every config is expected to set ' + 'either `run` or `component`, but `%s` has neither.', appConfig.appKey);
        AppRegistry.registerComponent(appConfig.appKey, appConfig.component, appConfig.section);
      }
    });
  },
  registerComponent: function registerComponent(appKey, componentProvider, section) {
    var scopedPerformanceLogger = (0, _createPerformanceLogger.default)();
    runnables[appKey] = {
      componentProvider: componentProvider,
      run: function run(appParameters, displayMode) {
        var _appParameters$initia;
        var concurrentRootEnabled = ((_appParameters$initia = appParameters.initialProps) == null ? void 0 : _appParameters$initia.concurrentRoot) || appParameters.concurrentRoot;
        (0, _renderApplication.default)(componentProviderInstrumentationHook(componentProvider, scopedPerformanceLogger), appParameters.initialProps, appParameters.rootTag, wrapperComponentProvider && wrapperComponentProvider(appParameters), appParameters.fabric, showArchitectureIndicator, scopedPerformanceLogger, appKey === 'LogBox', appKey, (0, _DisplayMode.coerceDisplayMode)(displayMode), concurrentRootEnabled);
      }
    };
    if (section) {
      sections[appKey] = runnables[appKey];
    }
    return appKey;
  },
  registerRunnable: function registerRunnable(appKey, run) {
    runnables[appKey] = {
      run: run
    };
    return appKey;
  },
  registerSection: function registerSection(appKey, component) {
    AppRegistry.registerComponent(appKey, component, true);
  },
  getAppKeys: function getAppKeys() {
    return Object.keys(runnables);
  },
  getSectionKeys: function getSectionKeys() {
    return Object.keys(sections);
  },
  getSections: function getSections() {
    return Object.assign({}, sections);
  },
  getRunnable: function getRunnable(appKey) {
    return runnables[appKey];
  },
  getRegistry: function getRegistry() {
    return {
      sections: AppRegistry.getSectionKeys(),
      runnables: Object.assign({}, runnables)
    };
  },
  setComponentProviderInstrumentationHook: function setComponentProviderInstrumentationHook(hook) {
    componentProviderInstrumentationHook = hook;
  },
  runApplication: function runApplication(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var logParams = __DEV__ ? '" with ' + JSON.stringify(appParameters) : '';
      var msg = 'Running "' + appKey + logParams;
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.runApplication' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey] && runnables[appKey].run, "\"" + appKey + "\" has not been registered. This can happen if:\n" + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    _SceneTracker.default.setActiveScene({
      name: appKey
    });
    runnables[appKey].run(appParameters, displayMode);
  },
  setSurfaceProps: function setSurfaceProps(appKey, appParameters, displayMode) {
    if (appKey !== 'LogBox') {
      var msg = 'Updating props for Surface "' + appKey + '" with ' + JSON.stringify(appParameters);
      (0, _infoLog.default)(msg);
      _BugReporting.default.addSource('AppRegistry.setSurfaceProps' + runCount++, function () {
        return msg;
      });
    }
    (0, _invariant.default)(runnables[appKey] && runnables[appKey].run, "\"" + appKey + "\" has not been registered. This can happen if:\n" + '* Metro (the local dev server) is run from the wrong folder. ' + 'Check if Metro is running, stop it and restart it in the current project.\n' + "* A module failed to load due to an error and `AppRegistry.registerComponent` wasn't called.");
    runnables[appKey].run(appParameters, displayMode);
  },
  unmountApplicationComponentAtRootTag: function unmountApplicationComponentAtRootTag(rootTag) {
    (0, _RendererProxy.unmountComponentAtNodeAndRemoveContainer)(rootTag);
  },
  registerHeadlessTask: function registerHeadlessTask(taskKey, taskProvider) {
    this.registerCancellableHeadlessTask(taskKey, taskProvider, function () {
      return function () {};
    });
  },
  registerCancellableHeadlessTask: function registerCancellableHeadlessTask(taskKey, taskProvider, taskCancelProvider) {
    if (taskProviders.has(taskKey)) {
      console.warn("registerHeadlessTask or registerCancellableHeadlessTask called multiple times for same key '" + taskKey + "'");
    }
    taskProviders.set(taskKey, taskProvider);
    taskCancelProviders.set(taskKey, taskCancelProvider);
  },
  startHeadlessTask: function startHeadlessTask(taskId, taskKey, data) {
    var taskProvider = taskProviders.get(taskKey);
    if (!taskProvider) {
      console.warn("No task registered for key " + taskKey);
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
      return;
    }
    taskProvider()(data).then(function () {
      if (_NativeHeadlessJsTaskSupport.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
      }
    }).catch(function (reason) {
      console.error(reason);
      if (_NativeHeadlessJsTaskSupport.default && reason instanceof _HeadlessJsTaskError.default) {
        _NativeHeadlessJsTaskSupport.default.notifyTaskRetry(taskId).then(function (retryPosted) {
          if (!retryPosted) {
            _NativeHeadlessJsTaskSupport.default.notifyTaskFinished(taskId);
          }
        });
      }
    });
  },
  cancelHeadlessTask: function cancelHeadlessTask(taskId, taskKey) {
    var taskCancelProvider = taskCancelProviders.get(taskKey);
    if (!taskCancelProvider) {
      throw new Error("No task canceller registered for key '" + taskKey + "'");
    }
    taskCancelProvider()();
  }
};
if (!(global.RN$Bridgeless === true)) {
  _BatchedBridge.default.registerCallableModule('AppRegistry', AppRegistry);
  if (__DEV__) {
    var LogBoxInspector = require('../LogBox/LogBoxInspectorContainer').default;
    AppRegistry.registerComponent('LogBox', function () {
      return LogBoxInspector;
    });
  } else {
    AppRegistry.registerComponent('LogBox', function () {
      return function NoOp() {
        return null;
      };
    });
  }
}
module.exports = AppRegistry;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJydW5uYWJsZXMiLCJydW5Db3VudCIsInNlY3Rpb25zIiwidGFza1Byb3ZpZGVycyIsIk1hcCIsInRhc2tDYW5jZWxQcm92aWRlcnMiLCJjb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2siLCJjb21wb25lbnQiLCJ3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIiLCJzaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yIiwiQXBwUmVnaXN0cnkiLCJzZXRXcmFwcGVyQ29tcG9uZW50UHJvdmlkZXIiLCJwcm92aWRlciIsImVuYWJsZUFyY2hpdGVjdHVyZUluZGljYXRvciIsImVuYWJsZWQiLCJyZWdpc3RlckNvbmZpZyIsImNvbmZpZyIsImZvckVhY2giLCJhcHBDb25maWciLCJydW4iLCJyZWdpc3RlclJ1bm5hYmxlIiwiYXBwS2V5IiwiaW52YXJpYW50IiwicmVnaXN0ZXJDb21wb25lbnQiLCJzZWN0aW9uIiwiY29tcG9uZW50UHJvdmlkZXIiLCJzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciIsImNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIiwiYXBwUGFyYW1ldGVycyIsImRpc3BsYXlNb2RlIiwiY29uY3VycmVudFJvb3RFbmFibGVkIiwiaW5pdGlhbFByb3BzIiwiY29uY3VycmVudFJvb3QiLCJyZW5kZXJBcHBsaWNhdGlvbiIsInJvb3RUYWciLCJmYWJyaWMiLCJjb2VyY2VEaXNwbGF5TW9kZSIsInJlZ2lzdGVyU2VjdGlvbiIsImdldEFwcEtleXMiLCJPYmplY3QiLCJrZXlzIiwiZ2V0U2VjdGlvbktleXMiLCJnZXRTZWN0aW9ucyIsImdldFJ1bm5hYmxlIiwiZ2V0UmVnaXN0cnkiLCJzZXRDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2siLCJob29rIiwicnVuQXBwbGljYXRpb24iLCJsb2dQYXJhbXMiLCJfX0RFVl9fIiwiSlNPTiIsInN0cmluZ2lmeSIsIm1zZyIsImluZm9Mb2ciLCJCdWdSZXBvcnRpbmciLCJhZGRTb3VyY2UiLCJTY2VuZVRyYWNrZXIiLCJzZXRBY3RpdmVTY2VuZSIsIm5hbWUiLCJzZXRTdXJmYWNlUHJvcHMiLCJ1bm1vdW50QXBwbGljYXRpb25Db21wb25lbnRBdFJvb3RUYWciLCJ1bm1vdW50Q29tcG9uZW50QXROb2RlQW5kUmVtb3ZlQ29udGFpbmVyIiwicmVnaXN0ZXJIZWFkbGVzc1Rhc2siLCJ0YXNrS2V5IiwidGFza1Byb3ZpZGVyIiwicmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayIsInRhc2tDYW5jZWxQcm92aWRlciIsImhhcyIsImNvbnNvbGUiLCJ3YXJuIiwic2V0Iiwic3RhcnRIZWFkbGVzc1Rhc2siLCJ0YXNrSWQiLCJkYXRhIiwiZ2V0IiwiTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Iiwibm90aWZ5VGFza0ZpbmlzaGVkIiwidGhlbiIsImNhdGNoIiwicmVhc29uIiwiZXJyb3IiLCJIZWFkbGVzc0pzVGFza0Vycm9yIiwibm90aWZ5VGFza1JldHJ5IiwicmV0cnlQb3N0ZWQiLCJjYW5jZWxIZWFkbGVzc1Rhc2siLCJFcnJvciIsImdsb2JhbCIsIlJOJEJyaWRnZWxlc3MiLCJCYXRjaGVkQnJpZGdlIiwicmVnaXN0ZXJDYWxsYWJsZU1vZHVsZSIsIkxvZ0JveEluc3BlY3RvciIsInJlcXVpcmUiLCJkZWZhdWx0IiwiTm9PcCIsIm1vZHVsZSIsImV4cG9ydHMiXSwic291cmNlcyI6WyJBcHBSZWdpc3RyeS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgTWV0YSBQbGF0Zm9ybXMsIEluYy4gYW5kIGFmZmlsaWF0ZXMuXG4gKlxuICogVGhpcyBzb3VyY2UgY29kZSBpcyBsaWNlbnNlZCB1bmRlciB0aGUgTUlUIGxpY2Vuc2UgZm91bmQgaW4gdGhlXG4gKiBMSUNFTlNFIGZpbGUgaW4gdGhlIHJvb3QgZGlyZWN0b3J5IG9mIHRoaXMgc291cmNlIHRyZWUuXG4gKlxuICogQGZsb3dcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7Um9vdFRhZ30gZnJvbSAnLi4vVHlwZXMvUm9vdFRhZ1R5cGVzJztcbmltcG9ydCB0eXBlIHtJUGVyZm9ybWFuY2VMb2dnZXJ9IGZyb20gJy4uL1V0aWxpdGllcy9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcic7XG5cbmltcG9ydCBCYXRjaGVkQnJpZGdlIGZyb20gJy4uL0JhdGNoZWRCcmlkZ2UvQmF0Y2hlZEJyaWRnZSc7XG5pbXBvcnQgQnVnUmVwb3J0aW5nIGZyb20gJy4uL0J1Z1JlcG9ydGluZy9CdWdSZXBvcnRpbmcnO1xuaW1wb3J0IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyIGZyb20gJy4uL1V0aWxpdGllcy9jcmVhdGVQZXJmb3JtYW5jZUxvZ2dlcic7XG5pbXBvcnQgaW5mb0xvZyBmcm9tICcuLi9VdGlsaXRpZXMvaW5mb0xvZyc7XG5pbXBvcnQgU2NlbmVUcmFja2VyIGZyb20gJy4uL1V0aWxpdGllcy9TY2VuZVRyYWNrZXInO1xuaW1wb3J0IHtjb2VyY2VEaXNwbGF5TW9kZX0gZnJvbSAnLi9EaXNwbGF5TW9kZSc7XG5pbXBvcnQgSGVhZGxlc3NKc1Rhc2tFcnJvciBmcm9tICcuL0hlYWRsZXNzSnNUYXNrRXJyb3InO1xuaW1wb3J0IE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCBmcm9tICcuL05hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCc7XG5pbXBvcnQgcmVuZGVyQXBwbGljYXRpb24gZnJvbSAnLi9yZW5kZXJBcHBsaWNhdGlvbic7XG5pbXBvcnQge3VubW91bnRDb21wb25lbnRBdE5vZGVBbmRSZW1vdmVDb250YWluZXJ9IGZyb20gJy4vUmVuZGVyZXJQcm94eSc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbnR5cGUgVGFzayA9ICh0YXNrRGF0YTogYW55KSA9PiBQcm9taXNlPHZvaWQ+O1xuZXhwb3J0IHR5cGUgVGFza1Byb3ZpZGVyID0gKCkgPT4gVGFzaztcbnR5cGUgVGFza0NhbmNlbGxlciA9ICgpID0+IHZvaWQ7XG50eXBlIFRhc2tDYW5jZWxQcm92aWRlciA9ICgpID0+IFRhc2tDYW5jZWxsZXI7XG5cbmV4cG9ydCB0eXBlIENvbXBvbmVudFByb3ZpZGVyID0gKCkgPT4gUmVhY3QkQ29tcG9uZW50VHlwZTxhbnk+O1xuZXhwb3J0IHR5cGUgQ29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rID0gKFxuICBjb21wb25lbnQ6IENvbXBvbmVudFByb3ZpZGVyLFxuICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcjogSVBlcmZvcm1hbmNlTG9nZ2VyLFxuKSA9PiBSZWFjdCRDb21wb25lbnRUeXBlPGFueT47XG5leHBvcnQgdHlwZSBBcHBDb25maWcgPSB7XG4gIGFwcEtleTogc3RyaW5nLFxuICBjb21wb25lbnQ/OiBDb21wb25lbnRQcm92aWRlcixcbiAgcnVuPzogRnVuY3Rpb24sXG4gIHNlY3Rpb24/OiBib29sZWFuLFxuICAuLi5cbn07XG5leHBvcnQgdHlwZSBSdW5uYWJsZSA9IHtcbiAgY29tcG9uZW50PzogQ29tcG9uZW50UHJvdmlkZXIsXG4gIHJ1bjogRnVuY3Rpb24sXG4gIC4uLlxufTtcbmV4cG9ydCB0eXBlIFJ1bm5hYmxlcyA9IHtbYXBwS2V5OiBzdHJpbmddOiBSdW5uYWJsZSwgLi4ufTtcbmV4cG9ydCB0eXBlIFJlZ2lzdHJ5ID0ge1xuICBzZWN0aW9uczogQXJyYXk8c3RyaW5nPixcbiAgcnVubmFibGVzOiBSdW5uYWJsZXMsXG4gIC4uLlxufTtcbmV4cG9ydCB0eXBlIFdyYXBwZXJDb21wb25lbnRQcm92aWRlciA9IChcbiAgYXBwUGFyYW1ldGVyczogYW55LFxuKSA9PiBSZWFjdCRDb21wb25lbnRUeXBlPGFueT47XG5cbmNvbnN0IHJ1bm5hYmxlczogUnVubmFibGVzID0ge307XG5sZXQgcnVuQ291bnQgPSAxO1xuY29uc3Qgc2VjdGlvbnM6IFJ1bm5hYmxlcyA9IHt9O1xuY29uc3QgdGFza1Byb3ZpZGVyczogTWFwPHN0cmluZywgVGFza1Byb3ZpZGVyPiA9IG5ldyBNYXAoKTtcbmNvbnN0IHRhc2tDYW5jZWxQcm92aWRlcnM6IE1hcDxzdHJpbmcsIFRhc2tDYW5jZWxQcm92aWRlcj4gPSBuZXcgTWFwKCk7XG5sZXQgY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rOiBDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2sgPVxuICAoY29tcG9uZW50OiBDb21wb25lbnRQcm92aWRlcikgPT4gY29tcG9uZW50KCk7XG5cbmxldCB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXI6ID9XcmFwcGVyQ29tcG9uZW50UHJvdmlkZXI7XG5sZXQgc2hvd0FyY2hpdGVjdHVyZUluZGljYXRvciA9IGZhbHNlO1xuXG4vKipcbiAqIGBBcHBSZWdpc3RyeWAgaXMgdGhlIEphdmFTY3JpcHQgZW50cnkgcG9pbnQgdG8gcnVubmluZyBhbGwgUmVhY3QgTmF0aXZlIGFwcHMuXG4gKlxuICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnlcbiAqL1xuY29uc3QgQXBwUmVnaXN0cnkgPSB7XG4gIHNldFdyYXBwZXJDb21wb25lbnRQcm92aWRlcihwcm92aWRlcjogV3JhcHBlckNvbXBvbmVudFByb3ZpZGVyKSB7XG4gICAgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyID0gcHJvdmlkZXI7XG4gIH0sXG5cbiAgZW5hYmxlQXJjaGl0ZWN0dXJlSW5kaWNhdG9yKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcbiAgICBzaG93QXJjaGl0ZWN0dXJlSW5kaWNhdG9yID0gZW5hYmxlZDtcbiAgfSxcblxuICByZWdpc3RlckNvbmZpZyhjb25maWc6IEFycmF5PEFwcENvbmZpZz4pOiB2b2lkIHtcbiAgICBjb25maWcuZm9yRWFjaChhcHBDb25maWcgPT4ge1xuICAgICAgaWYgKGFwcENvbmZpZy5ydW4pIHtcbiAgICAgICAgQXBwUmVnaXN0cnkucmVnaXN0ZXJSdW5uYWJsZShhcHBDb25maWcuYXBwS2V5LCBhcHBDb25maWcucnVuKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGludmFyaWFudChcbiAgICAgICAgICBhcHBDb25maWcuY29tcG9uZW50ICE9IG51bGwsXG4gICAgICAgICAgJ0FwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29uZmlnKC4uLik6IEV2ZXJ5IGNvbmZpZyBpcyBleHBlY3RlZCB0byBzZXQgJyArXG4gICAgICAgICAgICAnZWl0aGVyIGBydW5gIG9yIGBjb21wb25lbnRgLCBidXQgYCVzYCBoYXMgbmVpdGhlci4nLFxuICAgICAgICAgIGFwcENvbmZpZy5hcHBLZXksXG4gICAgICAgICk7XG4gICAgICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KFxuICAgICAgICAgIGFwcENvbmZpZy5hcHBLZXksXG4gICAgICAgICAgYXBwQ29uZmlnLmNvbXBvbmVudCxcbiAgICAgICAgICBhcHBDb25maWcuc2VjdGlvbixcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9KTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXJzIGFuIGFwcCdzIHJvb3QgY29tcG9uZW50LlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmNvbXBvbmVudFxuICAgKi9cbiAgcmVnaXN0ZXJDb21wb25lbnQoXG4gICAgYXBwS2V5OiBzdHJpbmcsXG4gICAgY29tcG9uZW50UHJvdmlkZXI6IENvbXBvbmVudFByb3ZpZGVyLFxuICAgIHNlY3Rpb24/OiBib29sZWFuLFxuICApOiBzdHJpbmcge1xuICAgIGxldCBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlciA9IGNyZWF0ZVBlcmZvcm1hbmNlTG9nZ2VyKCk7XG4gICAgcnVubmFibGVzW2FwcEtleV0gPSB7XG4gICAgICBjb21wb25lbnRQcm92aWRlcixcbiAgICAgIHJ1bjogKGFwcFBhcmFtZXRlcnMsIGRpc3BsYXlNb2RlKSA9PiB7XG4gICAgICAgIGNvbnN0IGNvbmN1cnJlbnRSb290RW5hYmxlZCA9XG4gICAgICAgICAgYXBwUGFyYW1ldGVycy5pbml0aWFsUHJvcHM/LmNvbmN1cnJlbnRSb290IHx8XG4gICAgICAgICAgYXBwUGFyYW1ldGVycy5jb25jdXJyZW50Um9vdDtcbiAgICAgICAgcmVuZGVyQXBwbGljYXRpb24oXG4gICAgICAgICAgY29tcG9uZW50UHJvdmlkZXJJbnN0cnVtZW50YXRpb25Ib29rKFxuICAgICAgICAgICAgY29tcG9uZW50UHJvdmlkZXIsXG4gICAgICAgICAgICBzY29wZWRQZXJmb3JtYW5jZUxvZ2dlcixcbiAgICAgICAgICApLFxuICAgICAgICAgIGFwcFBhcmFtZXRlcnMuaW5pdGlhbFByb3BzLFxuICAgICAgICAgIGFwcFBhcmFtZXRlcnMucm9vdFRhZyxcbiAgICAgICAgICB3cmFwcGVyQ29tcG9uZW50UHJvdmlkZXIgJiYgd3JhcHBlckNvbXBvbmVudFByb3ZpZGVyKGFwcFBhcmFtZXRlcnMpLFxuICAgICAgICAgIGFwcFBhcmFtZXRlcnMuZmFicmljLFxuICAgICAgICAgIHNob3dBcmNoaXRlY3R1cmVJbmRpY2F0b3IsXG4gICAgICAgICAgc2NvcGVkUGVyZm9ybWFuY2VMb2dnZXIsXG4gICAgICAgICAgYXBwS2V5ID09PSAnTG9nQm94JyxcbiAgICAgICAgICBhcHBLZXksXG4gICAgICAgICAgY29lcmNlRGlzcGxheU1vZGUoZGlzcGxheU1vZGUpLFxuICAgICAgICAgIGNvbmN1cnJlbnRSb290RW5hYmxlZCxcbiAgICAgICAgKTtcbiAgICAgIH0sXG4gICAgfTtcbiAgICBpZiAoc2VjdGlvbikge1xuICAgICAgc2VjdGlvbnNbYXBwS2V5XSA9IHJ1bm5hYmxlc1thcHBLZXldO1xuICAgIH1cbiAgICByZXR1cm4gYXBwS2V5O1xuICB9LFxuXG4gIHJlZ2lzdGVyUnVubmFibGUoYXBwS2V5OiBzdHJpbmcsIHJ1bjogRnVuY3Rpb24pOiBzdHJpbmcge1xuICAgIHJ1bm5hYmxlc1thcHBLZXldID0ge3J1bn07XG4gICAgcmV0dXJuIGFwcEtleTtcbiAgfSxcblxuICByZWdpc3RlclNlY3Rpb24oYXBwS2V5OiBzdHJpbmcsIGNvbXBvbmVudDogQ29tcG9uZW50UHJvdmlkZXIpOiB2b2lkIHtcbiAgICBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudChhcHBLZXksIGNvbXBvbmVudCwgdHJ1ZSk7XG4gIH0sXG5cbiAgZ2V0QXBwS2V5cygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMocnVubmFibGVzKTtcbiAgfSxcblxuICBnZXRTZWN0aW9uS2V5cygpOiBBcnJheTxzdHJpbmc+IHtcbiAgICByZXR1cm4gT2JqZWN0LmtleXMoc2VjdGlvbnMpO1xuICB9LFxuXG4gIGdldFNlY3Rpb25zKCk6IFJ1bm5hYmxlcyB7XG4gICAgcmV0dXJuIHtcbiAgICAgIC4uLnNlY3Rpb25zLFxuICAgIH07XG4gIH0sXG5cbiAgZ2V0UnVubmFibGUoYXBwS2V5OiBzdHJpbmcpOiA/UnVubmFibGUge1xuICAgIHJldHVybiBydW5uYWJsZXNbYXBwS2V5XTtcbiAgfSxcblxuICBnZXRSZWdpc3RyeSgpOiBSZWdpc3RyeSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHNlY3Rpb25zOiBBcHBSZWdpc3RyeS5nZXRTZWN0aW9uS2V5cygpLFxuICAgICAgcnVubmFibGVzOiB7Li4ucnVubmFibGVzfSxcbiAgICB9O1xuICB9LFxuXG4gIHNldENvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayhcbiAgICBob29rOiBDb21wb25lbnRQcm92aWRlckluc3RydW1lbnRhdGlvbkhvb2ssXG4gICkge1xuICAgIGNvbXBvbmVudFByb3ZpZGVySW5zdHJ1bWVudGF0aW9uSG9vayA9IGhvb2s7XG4gIH0sXG5cbiAgLyoqXG4gICAqIExvYWRzIHRoZSBKYXZhU2NyaXB0IGJ1bmRsZSBhbmQgcnVucyB0aGUgYXBwLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNydW5hcHBsaWNhdGlvblxuICAgKi9cbiAgcnVuQXBwbGljYXRpb24oXG4gICAgYXBwS2V5OiBzdHJpbmcsXG4gICAgYXBwUGFyYW1ldGVyczogYW55LFxuICAgIGRpc3BsYXlNb2RlPzogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgICAgY29uc3QgbG9nUGFyYW1zID0gX19ERVZfX1xuICAgICAgICA/ICdcIiB3aXRoICcgKyBKU09OLnN0cmluZ2lmeShhcHBQYXJhbWV0ZXJzKVxuICAgICAgICA6ICcnO1xuICAgICAgY29uc3QgbXNnID0gJ1J1bm5pbmcgXCInICsgYXBwS2V5ICsgbG9nUGFyYW1zO1xuICAgICAgaW5mb0xvZyhtc2cpO1xuICAgICAgQnVnUmVwb3J0aW5nLmFkZFNvdXJjZShcbiAgICAgICAgJ0FwcFJlZ2lzdHJ5LnJ1bkFwcGxpY2F0aW9uJyArIHJ1bkNvdW50KyssXG4gICAgICAgICgpID0+IG1zZyxcbiAgICAgICk7XG4gICAgfVxuICAgIGludmFyaWFudChcbiAgICAgIHJ1bm5hYmxlc1thcHBLZXldICYmIHJ1bm5hYmxlc1thcHBLZXldLnJ1bixcbiAgICAgIGBcIiR7YXBwS2V5fVwiIGhhcyBub3QgYmVlbiByZWdpc3RlcmVkLiBUaGlzIGNhbiBoYXBwZW4gaWY6XFxuYCArXG4gICAgICAgICcqIE1ldHJvICh0aGUgbG9jYWwgZGV2IHNlcnZlcikgaXMgcnVuIGZyb20gdGhlIHdyb25nIGZvbGRlci4gJyArXG4gICAgICAgICdDaGVjayBpZiBNZXRybyBpcyBydW5uaW5nLCBzdG9wIGl0IGFuZCByZXN0YXJ0IGl0IGluIHRoZSBjdXJyZW50IHByb2plY3QuXFxuJyArXG4gICAgICAgIFwiKiBBIG1vZHVsZSBmYWlsZWQgdG8gbG9hZCBkdWUgdG8gYW4gZXJyb3IgYW5kIGBBcHBSZWdpc3RyeS5yZWdpc3RlckNvbXBvbmVudGAgd2Fzbid0IGNhbGxlZC5cIixcbiAgICApO1xuXG4gICAgU2NlbmVUcmFja2VyLnNldEFjdGl2ZVNjZW5lKHtuYW1lOiBhcHBLZXl9KTtcbiAgICBydW5uYWJsZXNbYXBwS2V5XS5ydW4oYXBwUGFyYW1ldGVycywgZGlzcGxheU1vZGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBVcGRhdGUgaW5pdGlhbCBwcm9wcyBmb3IgYSBzdXJmYWNlIHRoYXQncyBhbHJlYWR5IHJlbmRlcmVkXG4gICAqL1xuICBzZXRTdXJmYWNlUHJvcHMoXG4gICAgYXBwS2V5OiBzdHJpbmcsXG4gICAgYXBwUGFyYW1ldGVyczogYW55LFxuICAgIGRpc3BsYXlNb2RlPzogbnVtYmVyLFxuICApOiB2b2lkIHtcbiAgICBpZiAoYXBwS2V5ICE9PSAnTG9nQm94Jykge1xuICAgICAgY29uc3QgbXNnID1cbiAgICAgICAgJ1VwZGF0aW5nIHByb3BzIGZvciBTdXJmYWNlIFwiJyArXG4gICAgICAgIGFwcEtleSArXG4gICAgICAgICdcIiB3aXRoICcgK1xuICAgICAgICBKU09OLnN0cmluZ2lmeShhcHBQYXJhbWV0ZXJzKTtcbiAgICAgIGluZm9Mb2cobXNnKTtcbiAgICAgIEJ1Z1JlcG9ydGluZy5hZGRTb3VyY2UoXG4gICAgICAgICdBcHBSZWdpc3RyeS5zZXRTdXJmYWNlUHJvcHMnICsgcnVuQ291bnQrKyxcbiAgICAgICAgKCkgPT4gbXNnLFxuICAgICAgKTtcbiAgICB9XG4gICAgaW52YXJpYW50KFxuICAgICAgcnVubmFibGVzW2FwcEtleV0gJiYgcnVubmFibGVzW2FwcEtleV0ucnVuLFxuICAgICAgYFwiJHthcHBLZXl9XCIgaGFzIG5vdCBiZWVuIHJlZ2lzdGVyZWQuIFRoaXMgY2FuIGhhcHBlbiBpZjpcXG5gICtcbiAgICAgICAgJyogTWV0cm8gKHRoZSBsb2NhbCBkZXYgc2VydmVyKSBpcyBydW4gZnJvbSB0aGUgd3JvbmcgZm9sZGVyLiAnICtcbiAgICAgICAgJ0NoZWNrIGlmIE1ldHJvIGlzIHJ1bm5pbmcsIHN0b3AgaXQgYW5kIHJlc3RhcnQgaXQgaW4gdGhlIGN1cnJlbnQgcHJvamVjdC5cXG4nICtcbiAgICAgICAgXCIqIEEgbW9kdWxlIGZhaWxlZCB0byBsb2FkIGR1ZSB0byBhbiBlcnJvciBhbmQgYEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50YCB3YXNuJ3QgY2FsbGVkLlwiLFxuICAgICk7XG5cbiAgICBydW5uYWJsZXNbYXBwS2V5XS5ydW4oYXBwUGFyYW1ldGVycywgZGlzcGxheU1vZGUpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBTdG9wcyBhbiBhcHBsaWNhdGlvbiB3aGVuIGEgdmlldyBzaG91bGQgYmUgZGVzdHJveWVkLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSN1bm1vdW50YXBwbGljYXRpb25jb21wb25lbnRhdHJvb3R0YWdcbiAgICovXG4gIHVubW91bnRBcHBsaWNhdGlvbkNvbXBvbmVudEF0Um9vdFRhZyhyb290VGFnOiBSb290VGFnKTogdm9pZCB7XG4gICAgdW5tb3VudENvbXBvbmVudEF0Tm9kZUFuZFJlbW92ZUNvbnRhaW5lcihyb290VGFnKTtcbiAgfSxcblxuICAvKipcbiAgICogUmVnaXN0ZXIgYSBoZWFkbGVzcyB0YXNrLiBBIGhlYWRsZXNzIHRhc2sgaXMgYSBiaXQgb2YgY29kZSB0aGF0IHJ1bnMgd2l0aG91dCBhIFVJLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNyZWdpc3RlcmhlYWRsZXNzdGFza1xuICAgKi9cbiAgcmVnaXN0ZXJIZWFkbGVzc1Rhc2sodGFza0tleTogc3RyaW5nLCB0YXNrUHJvdmlkZXI6IFRhc2tQcm92aWRlcik6IHZvaWQge1xuICAgIC8vICRGbG93Rml4TWVbb2JqZWN0LXRoaXMtcmVmZXJlbmNlXVxuICAgIHRoaXMucmVnaXN0ZXJDYW5jZWxsYWJsZUhlYWRsZXNzVGFzayh0YXNrS2V5LCB0YXNrUHJvdmlkZXIsICgpID0+ICgpID0+IHtcbiAgICAgIC8qIENhbmNlbCBpcyBuby1vcCAqL1xuICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBSZWdpc3RlciBhIGNhbmNlbGxhYmxlIGhlYWRsZXNzIHRhc2suIEEgaGVhZGxlc3MgdGFzayBpcyBhIGJpdCBvZiBjb2RlIHRoYXQgcnVucyB3aXRob3V0IGEgVUkuXG4gICAqXG4gICAqIFNlZSBodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2FwcHJlZ2lzdHJ5I3JlZ2lzdGVyY2FuY2VsbGFibGVoZWFkbGVzc3Rhc2tcbiAgICovXG4gIHJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2soXG4gICAgdGFza0tleTogc3RyaW5nLFxuICAgIHRhc2tQcm92aWRlcjogVGFza1Byb3ZpZGVyLFxuICAgIHRhc2tDYW5jZWxQcm92aWRlcjogVGFza0NhbmNlbFByb3ZpZGVyLFxuICApOiB2b2lkIHtcbiAgICBpZiAodGFza1Byb3ZpZGVycy5oYXModGFza0tleSkpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYHJlZ2lzdGVySGVhZGxlc3NUYXNrIG9yIHJlZ2lzdGVyQ2FuY2VsbGFibGVIZWFkbGVzc1Rhc2sgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGZvciBzYW1lIGtleSAnJHt0YXNrS2V5fSdgLFxuICAgICAgKTtcbiAgICB9XG4gICAgdGFza1Byb3ZpZGVycy5zZXQodGFza0tleSwgdGFza1Byb3ZpZGVyKTtcbiAgICB0YXNrQ2FuY2VsUHJvdmlkZXJzLnNldCh0YXNrS2V5LCB0YXNrQ2FuY2VsUHJvdmlkZXIpO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCBmcm9tIG5hdGl2ZSBjb2RlLiBTdGFydHMgYSBoZWFkbGVzcyB0YXNrLlxuICAgKlxuICAgKiBTZWUgaHR0cHM6Ly9yZWFjdG5hdGl2ZS5kZXYvZG9jcy9hcHByZWdpc3RyeSNzdGFydGhlYWRsZXNzdGFza1xuICAgKi9cbiAgc3RhcnRIZWFkbGVzc1Rhc2sodGFza0lkOiBudW1iZXIsIHRhc2tLZXk6IHN0cmluZywgZGF0YTogYW55KTogdm9pZCB7XG4gICAgY29uc3QgdGFza1Byb3ZpZGVyID0gdGFza1Byb3ZpZGVycy5nZXQodGFza0tleSk7XG4gICAgaWYgKCF0YXNrUHJvdmlkZXIpIHtcbiAgICAgIGNvbnNvbGUud2FybihgTm8gdGFzayByZWdpc3RlcmVkIGZvciBrZXkgJHt0YXNrS2V5fWApO1xuICAgICAgaWYgKE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydCkge1xuICAgICAgICBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQubm90aWZ5VGFza0ZpbmlzaGVkKHRhc2tJZCk7XG4gICAgICB9XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRhc2tQcm92aWRlcigpKGRhdGEpXG4gICAgICAudGhlbigoKSA9PiB7XG4gICAgICAgIGlmIChOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQpIHtcbiAgICAgICAgICBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQubm90aWZ5VGFza0ZpbmlzaGVkKHRhc2tJZCk7XG4gICAgICAgIH1cbiAgICAgIH0pXG4gICAgICAuY2F0Y2gocmVhc29uID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihyZWFzb24pO1xuXG4gICAgICAgIGlmIChcbiAgICAgICAgICBOYXRpdmVIZWFkbGVzc0pzVGFza1N1cHBvcnQgJiZcbiAgICAgICAgICByZWFzb24gaW5zdGFuY2VvZiBIZWFkbGVzc0pzVGFza0Vycm9yXG4gICAgICAgICkge1xuICAgICAgICAgIE5hdGl2ZUhlYWRsZXNzSnNUYXNrU3VwcG9ydC5ub3RpZnlUYXNrUmV0cnkodGFza0lkKS50aGVuKFxuICAgICAgICAgICAgcmV0cnlQb3N0ZWQgPT4ge1xuICAgICAgICAgICAgICBpZiAoIXJldHJ5UG9zdGVkKSB7XG4gICAgICAgICAgICAgICAgTmF0aXZlSGVhZGxlc3NKc1Rhc2tTdXBwb3J0Lm5vdGlmeVRhc2tGaW5pc2hlZCh0YXNrSWQpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICB9LFxuXG4gIC8qKlxuICAgKiBPbmx5IGNhbGxlZCBmcm9tIG5hdGl2ZSBjb2RlLiBDYW5jZWxzIGEgaGVhZGxlc3MgdGFzay5cbiAgICpcbiAgICogU2VlIGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3MvYXBwcmVnaXN0cnkjY2FuY2VsaGVhZGxlc3N0YXNrXG4gICAqL1xuICBjYW5jZWxIZWFkbGVzc1Rhc2sodGFza0lkOiBudW1iZXIsIHRhc2tLZXk6IHN0cmluZyk6IHZvaWQge1xuICAgIGNvbnN0IHRhc2tDYW5jZWxQcm92aWRlciA9IHRhc2tDYW5jZWxQcm92aWRlcnMuZ2V0KHRhc2tLZXkpO1xuICAgIGlmICghdGFza0NhbmNlbFByb3ZpZGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYE5vIHRhc2sgY2FuY2VsbGVyIHJlZ2lzdGVyZWQgZm9yIGtleSAnJHt0YXNrS2V5fSdgKTtcbiAgICB9XG4gICAgdGFza0NhbmNlbFByb3ZpZGVyKCkoKTtcbiAgfSxcbn07XG5cbmlmICghKGdsb2JhbC5STiRCcmlkZ2VsZXNzID09PSB0cnVlKSkge1xuICBCYXRjaGVkQnJpZGdlLnJlZ2lzdGVyQ2FsbGFibGVNb2R1bGUoJ0FwcFJlZ2lzdHJ5JywgQXBwUmVnaXN0cnkpO1xuXG4gIGlmIChfX0RFVl9fKSB7XG4gICAgY29uc3QgTG9nQm94SW5zcGVjdG9yID1cbiAgICAgIHJlcXVpcmUoJy4uL0xvZ0JveC9Mb2dCb3hJbnNwZWN0b3JDb250YWluZXInKS5kZWZhdWx0O1xuICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KCdMb2dCb3gnLCAoKSA9PiBMb2dCb3hJbnNwZWN0b3IpO1xuICB9IGVsc2Uge1xuICAgIEFwcFJlZ2lzdHJ5LnJlZ2lzdGVyQ29tcG9uZW50KFxuICAgICAgJ0xvZ0JveCcsXG4gICAgICAoKSA9PlxuICAgICAgICBmdW5jdGlvbiBOb09wKCkge1xuICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICB9LFxuICAgICk7XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBBcHBSZWdpc3RyeTtcbiJdLCJtYXBwaW5ncyI6IjtBQWFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtB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