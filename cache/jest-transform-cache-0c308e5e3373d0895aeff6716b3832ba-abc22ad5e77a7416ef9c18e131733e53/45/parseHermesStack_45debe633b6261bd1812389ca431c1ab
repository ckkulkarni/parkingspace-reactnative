6f82608abf3585df05ede69418675d4e
'use strict';

var RE_FRAME = /^ {4}at (.+?)(?: \((native)\)?| \((address at )?(.*?):(\d+):(\d+)\))$/;
var RE_SKIPPED = /^ {4}... skipping (\d+) frames$/;
function parseLine(line) {
  var asFrame = line.match(RE_FRAME);
  if (asFrame) {
    return {
      type: 'FRAME',
      functionName: asFrame[1],
      location: asFrame[2] === 'native' ? {
        type: 'NATIVE'
      } : asFrame[3] === 'address at ' ? {
        type: 'BYTECODE',
        sourceUrl: asFrame[4],
        line1Based: Number.parseInt(asFrame[5], 10),
        virtualOffset0Based: Number.parseInt(asFrame[6], 10)
      } : {
        type: 'SOURCE',
        sourceUrl: asFrame[4],
        line1Based: Number.parseInt(asFrame[5], 10),
        column1Based: Number.parseInt(asFrame[6], 10)
      }
    };
  }
  var asSkipped = line.match(RE_SKIPPED);
  if (asSkipped) {
    return {
      type: 'SKIPPED',
      count: Number.parseInt(asSkipped[1], 10)
    };
  }
}
module.exports = function parseHermesStack(stack) {
  var lines = stack.split(/\n/);
  var entries = [];
  var lastMessageLine = -1;
  for (var i = 0; i < lines.length; ++i) {
    var line = lines[i];
    if (!line) {
      continue;
    }
    var entry = parseLine(line);
    if (entry) {
      entries.push(entry);
      continue;
    }
    lastMessageLine = i;
    entries = [];
  }
  var message = lines.slice(0, lastMessageLine + 1).join('\n');
  return {
    message: message,
    entries: entries
  };
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSRV9GUkFNRSIsIlJFX1NLSVBQRUQiLCJwYXJzZUxpbmUiLCJsaW5lIiwiYXNGcmFtZSIsIm1hdGNoIiwidHlwZSIsImZ1bmN0aW9uTmFtZSIsImxvY2F0aW9uIiwic291cmNlVXJsIiwibGluZTFCYXNlZCIsIk51bWJlciIsInBhcnNlSW50IiwidmlydHVhbE9mZnNldDBCYXNlZCIsImNvbHVtbjFCYXNlZCIsImFzU2tpcHBlZCIsImNvdW50IiwibW9kdWxlIiwiZXhwb3J0cyIsInBhcnNlSGVybWVzU3RhY2siLCJzdGFjayIsImxpbmVzIiwic3BsaXQiLCJlbnRyaWVzIiwibGFzdE1lc3NhZ2VMaW5lIiwiaSIsImxlbmd0aCIsImVudHJ5IiwicHVzaCIsIm1lc3NhZ2UiLCJzbGljZSIsImpvaW4iXSwic291cmNlcyI6WyJwYXJzZUhlcm1lc1N0YWNrLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZm9ybWF0XG4gKiBAZmxvdyBzdHJpY3RcbiAqL1xuXG4ndXNlIHN0cmljdCc7XG5cbnR5cGUgSGVybWVzU3RhY2tMb2NhdGlvbk5hdGl2ZSA9IHt8XG4gICt0eXBlOiAnTkFUSVZFJyxcbnx9O1xuXG50eXBlIEhlcm1lc1N0YWNrTG9jYXRpb25Tb3VyY2UgPSB7fFxuICArdHlwZTogJ1NPVVJDRScsXG4gICtzb3VyY2VVcmw6IHN0cmluZyxcbiAgK2xpbmUxQmFzZWQ6IG51bWJlcixcbiAgK2NvbHVtbjFCYXNlZDogbnVtYmVyLFxufH07XG5cbnR5cGUgSGVybWVzU3RhY2tMb2NhdGlvbkJ5dGVjb2RlID0ge3xcbiAgK3R5cGU6ICdCWVRFQ09ERScsXG4gICtzb3VyY2VVcmw6IHN0cmluZyxcbiAgK2xpbmUxQmFzZWQ6IG51bWJlcixcbiAgK3ZpcnR1YWxPZmZzZXQwQmFzZWQ6IG51bWJlcixcbnx9O1xuXG50eXBlIEhlcm1lc1N0YWNrTG9jYXRpb24gPVxuICB8IEhlcm1lc1N0YWNrTG9jYXRpb25OYXRpdmVcbiAgfCBIZXJtZXNTdGFja0xvY2F0aW9uU291cmNlXG4gIHwgSGVybWVzU3RhY2tMb2NhdGlvbkJ5dGVjb2RlO1xuXG50eXBlIEhlcm1lc1N0YWNrRW50cnlGcmFtZSA9IHt8XG4gICt0eXBlOiAnRlJBTUUnLFxuICArbG9jYXRpb246IEhlcm1lc1N0YWNrTG9jYXRpb24sXG4gICtmdW5jdGlvbk5hbWU6IHN0cmluZyxcbnx9O1xuXG50eXBlIEhlcm1lc1N0YWNrRW50cnlTa2lwcGVkID0ge3xcbiAgK3R5cGU6ICdTS0lQUEVEJyxcbiAgK2NvdW50OiBudW1iZXIsXG58fTtcblxudHlwZSBIZXJtZXNTdGFja0VudHJ5ID0gSGVybWVzU3RhY2tFbnRyeUZyYW1lIHwgSGVybWVzU3RhY2tFbnRyeVNraXBwZWQ7XG5cbmV4cG9ydCB0eXBlIEhlcm1lc1BhcnNlZFN0YWNrID0ge3xcbiAgK21lc3NhZ2U6IHN0cmluZyxcbiAgK2VudHJpZXM6ICRSZWFkT25seUFycmF5PEhlcm1lc1N0YWNrRW50cnk+LFxufH07XG5cbi8vIENhcHR1cmluZyBncm91cHM6XG4vLyAxLiBmdW5jdGlvbiBuYW1lXG4vLyAyLiBpcyB0aGlzIGEgbmF0aXZlIHN0YWNrIGZyYW1lP1xuLy8gMy4gaXMgdGhpcyBhIGJ5dGVjb2RlIGFkZHJlc3Mgb3IgYSBzb3VyY2UgbG9jYXRpb24/XG4vLyA0LiBzb3VyY2UgVVJMIChmaWxlbmFtZSlcbi8vIDUuIGxpbmUgbnVtYmVyICgxIGJhc2VkKVxuLy8gNi4gY29sdW1uIG51bWJlciAoMSBiYXNlZCkgb3IgdmlydHVhbCBvZmZzZXQgKDAgYmFzZWQpXG5jb25zdCBSRV9GUkFNRSA9XG4gIC9eIHs0fWF0ICguKz8pKD86IFxcKChuYXRpdmUpXFwpP3wgXFwoKGFkZHJlc3MgYXQgKT8oLio/KTooXFxkKyk6KFxcZCspXFwpKSQvO1xuXG4vLyBDYXB0dXJpbmcgZ3JvdXBzOlxuLy8gMS4gY291bnQgb2Ygc2tpcHBlZCBmcmFtZXNcbmNvbnN0IFJFX1NLSVBQRUQgPSAvXiB7NH0uLi4gc2tpcHBpbmcgKFxcZCspIGZyYW1lcyQvO1xuXG5mdW5jdGlvbiBwYXJzZUxpbmUobGluZTogc3RyaW5nKTogP0hlcm1lc1N0YWNrRW50cnkge1xuICBjb25zdCBhc0ZyYW1lID0gbGluZS5tYXRjaChSRV9GUkFNRSk7XG4gIGlmIChhc0ZyYW1lKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHR5cGU6ICdGUkFNRScsXG4gICAgICBmdW5jdGlvbk5hbWU6IGFzRnJhbWVbMV0sXG4gICAgICBsb2NhdGlvbjpcbiAgICAgICAgYXNGcmFtZVsyXSA9PT0gJ25hdGl2ZSdcbiAgICAgICAgICA/IHt0eXBlOiAnTkFUSVZFJ31cbiAgICAgICAgICA6IGFzRnJhbWVbM10gPT09ICdhZGRyZXNzIGF0ICdcbiAgICAgICAgICA/IHtcbiAgICAgICAgICAgICAgdHlwZTogJ0JZVEVDT0RFJyxcbiAgICAgICAgICAgICAgc291cmNlVXJsOiBhc0ZyYW1lWzRdLFxuICAgICAgICAgICAgICBsaW5lMUJhc2VkOiBOdW1iZXIucGFyc2VJbnQoYXNGcmFtZVs1XSwgMTApLFxuICAgICAgICAgICAgICB2aXJ0dWFsT2Zmc2V0MEJhc2VkOiBOdW1iZXIucGFyc2VJbnQoYXNGcmFtZVs2XSwgMTApLFxuICAgICAgICAgICAgfVxuICAgICAgICAgIDoge1xuICAgICAgICAgICAgICB0eXBlOiAnU09VUkNFJyxcbiAgICAgICAgICAgICAgc291cmNlVXJsOiBhc0ZyYW1lWzRdLFxuICAgICAgICAgICAgICBsaW5lMUJhc2VkOiBOdW1iZXIucGFyc2VJbnQoYXNGcmFtZVs1XSwgMTApLFxuICAgICAgICAgICAgICBjb2x1bW4xQmFzZWQ6IE51bWJlci5wYXJzZUludChhc0ZyYW1lWzZdLCAxMCksXG4gICAgICAgICAgICB9LFxuICAgIH07XG4gIH1cbiAgY29uc3QgYXNTa2lwcGVkID0gbGluZS5tYXRjaChSRV9TS0lQUEVEKTtcbiAgaWYgKGFzU2tpcHBlZCkge1xuICAgIHJldHVybiB7XG4gICAgICB0eXBlOiAnU0tJUFBFRCcsXG4gICAgICBjb3VudDogTnVtYmVyLnBhcnNlSW50KGFzU2tpcHBlZFsxXSwgMTApLFxuICAgIH07XG4gIH1cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBwYXJzZUhlcm1lc1N0YWNrKHN0YWNrOiBzdHJpbmcpOiBIZXJtZXNQYXJzZWRTdGFjayB7XG4gIGNvbnN0IGxpbmVzID0gc3RhY2suc3BsaXQoL1xcbi8pO1xuICBsZXQgZW50cmllczogQXJyYXk8SGVybWVzU3RhY2tFbnRyeUZyYW1lIHwgSGVybWVzU3RhY2tFbnRyeVNraXBwZWQ+ID0gW107XG4gIGxldCBsYXN0TWVzc2FnZUxpbmUgPSAtMTtcbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7ICsraSkge1xuICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcbiAgICBpZiAoIWxpbmUpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cbiAgICBjb25zdCBlbnRyeSA9IHBhcnNlTGluZShsaW5lKTtcbiAgICBpZiAoZW50cnkpIHtcbiAgICAgIGVudHJpZXMucHVzaChlbnRyeSk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG4gICAgLy8gTm8gbWF0Y2ggLSB3ZSdyZSBzdGlsbCBpbiB0aGUgbWVzc2FnZVxuICAgIGxhc3RNZXNzYWdlTGluZSA9IGk7XG4gICAgZW50cmllcyA9IFtdO1xuICB9XG4gIGNvbnN0IG1lc3NhZ2UgPSBsaW5lcy5zbGljZSgwLCBsYXN0TWVzc2FnZUxpbmUgKyAxKS5qb2luKCdcXG4nKTtcbiAgcmV0dXJuIHttZXNzYWdlLCBlbnRyaWVzfTtcbn07XG4iXSwibWFwcGluZ3MiOiJBQVVBLFlBQVk7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