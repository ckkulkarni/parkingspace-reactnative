{"version":3,"names":["AppContainer","state","inspector","devtoolsOverlay","mainKey","hasError","_mainRef","_subscription","__DEV__","props","internal_excludeInspector","RCTDeviceEventEmitter","addListener","Inspector","require","updateInspectedView","setState","s","window","__REACT_DEVTOOLS_GLOBAL_HOOK__","DevtoolsOverlay","default","remove","logBox","internal_excludeLogBox","LogBoxNotificationContainer","innerView","styles","appContainer","ref","children","Wrapper","WrapperComponent","initialProps","fabric","showArchitectureIndicator","createRootTag","rootTag","React","Component","getDerivedStateFromError","undefined","StyleSheet","create","flex","module","exports"],"sources":["AppContainer.js"],"sourcesContent":["/**\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n *\n * @format\n * @flow\n */\n\nimport type {RootTag} from './RootTag';\n\nimport View from '../Components/View/View';\nimport RCTDeviceEventEmitter from '../EventEmitter/RCTDeviceEventEmitter';\nimport StyleSheet from '../StyleSheet/StyleSheet';\nimport {type EventSubscription} from '../vendor/emitter/EventEmitter';\nimport {RootTagContext, createRootTag} from './RootTag';\nimport * as React from 'react';\n\ntype Props = $ReadOnly<{|\n  children?: React.Node,\n  fabric?: boolean,\n  useConcurrentRoot?: boolean,\n  rootTag: number | RootTag,\n  initialProps?: {...},\n  showArchitectureIndicator?: boolean,\n  WrapperComponent?: ?React.ComponentType<any>,\n  internal_excludeLogBox?: ?boolean,\n  internal_excludeInspector?: ?boolean,\n|}>;\n\ntype State = {|\n  inspector: ?React.Node,\n  devtoolsOverlay: ?React.Node,\n  mainKey: number,\n  hasError: boolean,\n|};\n\nclass AppContainer extends React.Component<Props, State> {\n  state: State = {\n    inspector: null,\n    devtoolsOverlay: null,\n    mainKey: 1,\n    hasError: false,\n  };\n  _mainRef: ?React.ElementRef<typeof View>;\n  _subscription: ?EventSubscription = null;\n\n  static getDerivedStateFromError: any = undefined;\n\n  componentDidMount(): void {\n    if (__DEV__) {\n      if (!this.props.internal_excludeInspector) {\n        this._subscription = RCTDeviceEventEmitter.addListener(\n          'toggleElementInspector',\n          () => {\n            const Inspector = require('../Inspector/Inspector');\n            const inspector = this.state.inspector ? null : (\n              <Inspector\n                inspectedView={this._mainRef}\n                onRequestRerenderApp={updateInspectedView => {\n                  this.setState(\n                    s => ({mainKey: s.mainKey + 1}),\n                    () => updateInspectedView(this._mainRef),\n                  );\n                }}\n              />\n            );\n            this.setState({inspector});\n          },\n        );\n        if (window.__REACT_DEVTOOLS_GLOBAL_HOOK__ != null) {\n          const DevtoolsOverlay =\n            require('../Inspector/DevtoolsOverlay').default;\n          const devtoolsOverlay = (\n            <DevtoolsOverlay inspectedView={this._mainRef} />\n          );\n          this.setState({devtoolsOverlay});\n        }\n      }\n    }\n  }\n\n  componentWillUnmount(): void {\n    if (this._subscription != null) {\n      this._subscription.remove();\n    }\n  }\n\n  render(): React.Node {\n    let logBox = null;\n    if (__DEV__) {\n      if (!this.props.internal_excludeLogBox) {\n        const LogBoxNotificationContainer =\n          require('../LogBox/LogBoxNotificationContainer').default;\n        logBox = <LogBoxNotificationContainer />;\n      }\n    }\n\n    let innerView: React.Node = (\n      <View\n        collapsable={!this.state.inspector && !this.state.devtoolsOverlay}\n        key={this.state.mainKey}\n        pointerEvents=\"box-none\"\n        style={styles.appContainer}\n        ref={ref => {\n          this._mainRef = ref;\n        }}>\n        {this.props.children}\n      </View>\n    );\n\n    const Wrapper = this.props.WrapperComponent;\n    if (Wrapper != null) {\n      innerView = (\n        <Wrapper\n          initialProps={this.props.initialProps}\n          fabric={this.props.fabric === true}\n          showArchitectureIndicator={\n            this.props.showArchitectureIndicator === true\n          }>\n          {innerView}\n        </Wrapper>\n      );\n    }\n    return (\n      <RootTagContext.Provider value={createRootTag(this.props.rootTag)}>\n        <View style={styles.appContainer} pointerEvents=\"box-none\">\n          {!this.state.hasError && innerView}\n          {this.state.devtoolsOverlay}\n          {this.state.inspector}\n          {logBox}\n        </View>\n      </RootTagContext.Provider>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  appContainer: {\n    flex: 1,\n  },\n});\n\nmodule.exports = AppContainer;\n"],"mappings":"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"}