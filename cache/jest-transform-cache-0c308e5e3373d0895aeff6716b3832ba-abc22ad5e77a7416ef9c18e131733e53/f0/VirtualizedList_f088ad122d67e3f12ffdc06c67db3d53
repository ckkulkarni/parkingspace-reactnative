a8de43d0be84725e0a7d04d4c547dc1f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _toConsumableArray2 = _interopRequireDefault(require("@babel/runtime/helpers/toConsumableArray"));
var _defineProperty2 = _interopRequireDefault(require("@babel/runtime/helpers/defineProperty"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _assertThisInitialized2 = _interopRequireDefault(require("@babel/runtime/helpers/assertThisInitialized"));
var _inherits2 = _interopRequireDefault(require("@babel/runtime/helpers/inherits"));
var _possibleConstructorReturn2 = _interopRequireDefault(require("@babel/runtime/helpers/possibleConstructorReturn"));
var _getPrototypeOf2 = _interopRequireDefault(require("@babel/runtime/helpers/getPrototypeOf"));
var _RefreshControl = _interopRequireDefault(require("../Components/RefreshControl/RefreshControl"));
var _ScrollView = _interopRequireDefault(require("../Components/ScrollView/ScrollView"));
var _View = _interopRequireDefault(require("../Components/View/View"));
var _Batchinator = _interopRequireDefault(require("../Interaction/Batchinator"));
var _RendererProxy = require("../ReactNative/RendererProxy");
var _flattenStyle = _interopRequireDefault(require("../StyleSheet/flattenStyle"));
var _StyleSheet = _interopRequireDefault(require("../StyleSheet/StyleSheet"));
var _clamp = _interopRequireDefault(require("../Utilities/clamp"));
var _infoLog = _interopRequireDefault(require("../Utilities/infoLog"));
var _CellRenderMask = require("./CellRenderMask");
var _ChildListCollection = _interopRequireDefault(require("./ChildListCollection"));
var _FillRateHelper = _interopRequireDefault(require("./FillRateHelper"));
var _StateSafePureComponent = _interopRequireDefault(require("./StateSafePureComponent"));
var _ViewabilityHelper = _interopRequireDefault(require("./ViewabilityHelper"));
var _VirtualizedListCellRenderer = _interopRequireDefault(require("./VirtualizedListCellRenderer"));
var _VirtualizedListContext = require("./VirtualizedListContext.js");
var _VirtualizeUtils = require("./VirtualizeUtils");
var _invariant = _interopRequireDefault(require("invariant"));
var React = _interopRequireWildcard(require("react"));
var _jsxRuntime = require("react/jsx-runtime");
function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }
function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }
function _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = (0, _getPrototypeOf2.default)(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = (0, _getPrototypeOf2.default)(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return (0, _possibleConstructorReturn2.default)(this, result); }; }
function _isNativeReflectConstruct() { if (typeof Reflect === "undefined" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === "function") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }
var ON_END_REACHED_EPSILON = 0.001;
var _usedIndexForKey = false;
var _keylessItemComponentName = '';
function horizontalOrDefault(horizontal) {
  return horizontal != null ? horizontal : false;
}
function initialNumToRenderOrDefault(initialNumToRender) {
  return initialNumToRender != null ? initialNumToRender : 10;
}
function maxToRenderPerBatchOrDefault(maxToRenderPerBatch) {
  return maxToRenderPerBatch != null ? maxToRenderPerBatch : 10;
}
function onEndReachedThresholdOrDefault(onEndReachedThreshold) {
  return onEndReachedThreshold != null ? onEndReachedThreshold : 2;
}
function scrollEventThrottleOrDefault(scrollEventThrottle) {
  return scrollEventThrottle != null ? scrollEventThrottle : 50;
}
function windowSizeOrDefault(windowSize) {
  return windowSize != null ? windowSize : 21;
}
function findLastWhere(arr, predicate) {
  for (var i = arr.length - 1; i >= 0; i--) {
    if (predicate(arr[i])) {
      return arr[i];
    }
  }
  return null;
}
var VirtualizedList = function (_StateSafePureCompone) {
  (0, _inherits2.default)(VirtualizedList, _StateSafePureCompone);
  var _super = _createSuper(VirtualizedList);
  function VirtualizedList(_props) {
    var _this$props$updateCel;
    var _this;
    (0, _classCallCheck2.default)(this, VirtualizedList);
    _this = _super.call(this, _props);
    _this._getScrollMetrics = function () {
      return _this._scrollMetrics;
    };
    _this._getOutermostParentListRef = function () {
      if (_this._isNestedWithSameOrientation()) {
        return _this.context.getOutermostParentListRef();
      } else {
        return (0, _assertThisInitialized2.default)(_this);
      }
    };
    _this._registerAsNestedChild = function (childList) {
      _this._nestedChildLists.add(childList.ref, childList.cellKey);
      if (_this._hasInteracted) {
        childList.ref.recordInteraction();
      }
    };
    _this._unregisterAsNestedChild = function (childList) {
      _this._nestedChildLists.remove(childList.ref);
    };
    _this.state = void 0;
    _this._onUpdateSeparators = function (keys, newProps) {
      keys.forEach(function (key) {
        var ref = key != null && _this._cellRefs[key];
        ref && ref.updateSeparatorProps(newProps);
      });
    };
    _this._getSpacerKey = function (isVertical) {
      return isVertical ? 'height' : 'width';
    };
    _this._averageCellLength = 0;
    _this._cellRefs = {};
    _this._fillRateHelper = void 0;
    _this._frames = {};
    _this._footerLength = 0;
    _this._hasTriggeredInitialScrollToIndex = false;
    _this._hasInteracted = false;
    _this._hasMore = false;
    _this._hasWarned = {};
    _this._headerLength = 0;
    _this._hiPriInProgress = false;
    _this._highestMeasuredFrameIndex = 0;
    _this._indicesToKeys = new Map();
    _this._lastFocusedCellKey = null;
    _this._nestedChildLists = new _ChildListCollection.default();
    _this._offsetFromParentVirtualizedList = 0;
    _this._prevParentOffset = 0;
    _this._scrollMetrics = {
      contentLength: 0,
      dOffset: 0,
      dt: 10,
      offset: 0,
      timestamp: 0,
      velocity: 0,
      visibleLength: 0,
      zoomScale: 1
    };
    _this._scrollRef = null;
    _this._sentEndForContentLength = 0;
    _this._totalCellLength = 0;
    _this._totalCellsMeasured = 0;
    _this._updateCellsToRenderBatcher = void 0;
    _this._viewabilityTuples = [];
    _this._captureScrollRef = function (ref) {
      _this._scrollRef = ref;
    };
    _this._defaultRenderScrollComponent = function (props) {
      var onRefresh = props.onRefresh;
      if (_this._isNestedWithSameOrientation()) {
        return (0, _jsxRuntime.jsx)(_View.default, Object.assign({}, props));
      } else if (onRefresh) {
        var _props$refreshing;
        (0, _invariant.default)(typeof props.refreshing === 'boolean', '`refreshing` prop must be set as a boolean in order to use `onRefresh`, but got `' + JSON.stringify((_props$refreshing = props.refreshing) != null ? _props$refreshing : 'undefined') + '`');
        return (0, _jsxRuntime.jsx)(_ScrollView.default, Object.assign({}, props, {
          refreshControl: props.refreshControl == null ? (0, _jsxRuntime.jsx)(_RefreshControl.default, {
            refreshing: props.refreshing,
            onRefresh: onRefresh,
            progressViewOffset: props.progressViewOffset
          }) : props.refreshControl
        }));
      } else {
        return (0, _jsxRuntime.jsx)(_ScrollView.default, Object.assign({}, props));
      }
    };
    _this._onCellLayout = function (e, cellKey, index) {
      var layout = e.nativeEvent.layout;
      var next = {
        offset: _this._selectOffset(layout),
        length: _this._selectLength(layout),
        index: index,
        inLayout: true
      };
      var curr = _this._frames[cellKey];
      if (!curr || next.offset !== curr.offset || next.length !== curr.length || index !== curr.index) {
        _this._totalCellLength += next.length - (curr ? curr.length : 0);
        _this._totalCellsMeasured += curr ? 0 : 1;
        _this._averageCellLength = _this._totalCellLength / _this._totalCellsMeasured;
        _this._frames[cellKey] = next;
        _this._highestMeasuredFrameIndex = Math.max(_this._highestMeasuredFrameIndex, index);
        _this._scheduleCellsToRenderUpdate();
      } else {
        _this._frames[cellKey].inLayout = true;
      }
      _this._triggerRemeasureForChildListsInCell(cellKey);
      _this._computeBlankness();
      _this._updateViewableItems(_this.props, _this.state.cellsAroundViewport);
    };
    _this._onCellUnmount = function (cellKey) {
      var curr = _this._frames[cellKey];
      if (curr) {
        _this._frames[cellKey] = Object.assign({}, curr, {
          inLayout: false
        });
      }
    };
    _this._onLayout = function (e) {
      if (_this._isNestedWithSameOrientation()) {
        _this.measureLayoutRelativeToContainingList();
      } else {
        _this._scrollMetrics.visibleLength = _this._selectLength(e.nativeEvent.layout);
      }
      _this.props.onLayout && _this.props.onLayout(e);
      _this._scheduleCellsToRenderUpdate();
      _this._maybeCallOnEndReached();
    };
    _this._onLayoutEmpty = function (e) {
      _this.props.onLayout && _this.props.onLayout(e);
    };
    _this._onLayoutFooter = function (e) {
      _this._triggerRemeasureForChildListsInCell(_this._getFooterCellKey());
      _this._footerLength = _this._selectLength(e.nativeEvent.layout);
    };
    _this._onLayoutHeader = function (e) {
      _this._headerLength = _this._selectLength(e.nativeEvent.layout);
    };
    _this._onContentSizeChange = function (width, height) {
      if (width > 0 && height > 0 && _this.props.initialScrollIndex != null && _this.props.initialScrollIndex > 0 && !_this._hasTriggeredInitialScrollToIndex) {
        if (_this.props.contentOffset == null) {
          _this.scrollToIndex({
            animated: false,
            index: _this.props.initialScrollIndex
          });
        }
        _this._hasTriggeredInitialScrollToIndex = true;
      }
      if (_this.props.onContentSizeChange) {
        _this.props.onContentSizeChange(width, height);
      }
      _this._scrollMetrics.contentLength = _this._selectLength({
        height: height,
        width: width
      });
      _this._scheduleCellsToRenderUpdate();
      _this._maybeCallOnEndReached();
    };
    _this._convertParentScrollMetrics = function (metrics) {
      var offset = metrics.offset - _this._offsetFromParentVirtualizedList;
      var visibleLength = metrics.visibleLength;
      var dOffset = offset - _this._scrollMetrics.offset;
      var contentLength = _this._scrollMetrics.contentLength;
      return {
        visibleLength: visibleLength,
        contentLength: contentLength,
        offset: offset,
        dOffset: dOffset
      };
    };
    _this._onScroll = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList._onScroll(e);
      });
      if (_this.props.onScroll) {
        _this.props.onScroll(e);
      }
      var timestamp = e.timeStamp;
      var visibleLength = _this._selectLength(e.nativeEvent.layoutMeasurement);
      var contentLength = _this._selectLength(e.nativeEvent.contentSize);
      var offset = _this._selectOffset(e.nativeEvent.contentOffset);
      var dOffset = offset - _this._scrollMetrics.offset;
      if (_this._isNestedWithSameOrientation()) {
        if (_this._scrollMetrics.contentLength === 0) {
          return;
        }
        var _this$_convertParentS = _this._convertParentScrollMetrics({
          visibleLength: visibleLength,
          offset: offset
        });
        visibleLength = _this$_convertParentS.visibleLength;
        contentLength = _this$_convertParentS.contentLength;
        offset = _this$_convertParentS.offset;
        dOffset = _this$_convertParentS.dOffset;
      }
      var dt = _this._scrollMetrics.timestamp ? Math.max(1, timestamp - _this._scrollMetrics.timestamp) : 1;
      var velocity = dOffset / dt;
      if (dt > 500 && _this._scrollMetrics.dt > 500 && contentLength > 5 * visibleLength && !_this._hasWarned.perf) {
        (0, _infoLog.default)('VirtualizedList: You have a large list that is slow to update - make sure your ' + 'renderItem function renders components that follow React performance best practices ' + 'like PureComponent, shouldComponentUpdate, etc.', {
          dt: dt,
          prevDt: _this._scrollMetrics.dt,
          contentLength: contentLength
        });
        _this._hasWarned.perf = true;
      }
      var zoomScale = e.nativeEvent.zoomScale < 0 ? 1 : e.nativeEvent.zoomScale;
      _this._scrollMetrics = {
        contentLength: contentLength,
        dt: dt,
        dOffset: dOffset,
        offset: offset,
        timestamp: timestamp,
        velocity: velocity,
        visibleLength: visibleLength,
        zoomScale: zoomScale
      };
      _this._updateViewableItems(_this.props, _this.state.cellsAroundViewport);
      if (!_this.props) {
        return;
      }
      _this._maybeCallOnEndReached();
      if (velocity !== 0) {
        _this._fillRateHelper.activate();
      }
      _this._computeBlankness();
      _this._scheduleCellsToRenderUpdate();
    };
    _this._onScrollBeginDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList._onScrollBeginDrag(e);
      });
      _this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.recordInteraction();
      });
      _this._hasInteracted = true;
      _this.props.onScrollBeginDrag && _this.props.onScrollBeginDrag(e);
    };
    _this._onScrollEndDrag = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList._onScrollEndDrag(e);
      });
      var velocity = e.nativeEvent.velocity;
      if (velocity) {
        _this._scrollMetrics.velocity = _this._selectOffset(velocity);
      }
      _this._computeBlankness();
      _this.props.onScrollEndDrag && _this.props.onScrollEndDrag(e);
    };
    _this._onMomentumScrollBegin = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList._onMomentumScrollBegin(e);
      });
      _this.props.onMomentumScrollBegin && _this.props.onMomentumScrollBegin(e);
    };
    _this._onMomentumScrollEnd = function (e) {
      _this._nestedChildLists.forEach(function (childList) {
        childList._onMomentumScrollEnd(e);
      });
      _this._scrollMetrics.velocity = 0;
      _this._computeBlankness();
      _this.props.onMomentumScrollEnd && _this.props.onMomentumScrollEnd(e);
    };
    _this._updateCellsToRender = function () {
      _this.setState(function (state, props) {
        var cellsAroundViewport = _this._adjustCellsAroundViewport(props, state.cellsAroundViewport);
        var renderMask = VirtualizedList._createRenderMask(props, cellsAroundViewport, _this._getNonViewportRenderRegions(props));
        if (cellsAroundViewport.first === state.cellsAroundViewport.first && cellsAroundViewport.last === state.cellsAroundViewport.last && renderMask.equals(state.renderMask)) {
          return null;
        }
        return {
          cellsAroundViewport: cellsAroundViewport,
          renderMask: renderMask
        };
      });
    };
    _this._createViewToken = function (index, isViewable, props) {
      var data = props.data,
        getItem = props.getItem;
      var item = getItem(data, index);
      return {
        index: index,
        item: item,
        key: _this._keyExtractor(item, index, props),
        isViewable: isViewable
      };
    };
    _this._getOffsetApprox = function (index, props) {
      if (Number.isInteger(index)) {
        return _this.__getFrameMetricsApprox(index, props).offset;
      } else {
        var frameMetrics = _this.__getFrameMetricsApprox(Math.floor(index), props);
        var remainder = index - Math.floor(index);
        return frameMetrics.offset + remainder * frameMetrics.length;
      }
    };
    _this.__getFrameMetricsApprox = function (index, props) {
      var frame = _this._getFrameMetrics(index, props);
      if (frame && frame.index === index) {
        return frame;
      } else {
        var data = props.data,
          getItemCount = props.getItemCount,
          getItemLayout = props.getItemLayout;
        (0, _invariant.default)(index >= 0 && index < getItemCount(data), 'Tried to get frame for out of range index ' + index);
        (0, _invariant.default)(!getItemLayout, 'Should not have to estimate frames when a measurement metrics function is provided');
        return {
          length: _this._averageCellLength,
          offset: _this._averageCellLength * index
        };
      }
    };
    _this._getFrameMetrics = function (index, props) {
      var data = props.data,
        getItem = props.getItem,
        getItemCount = props.getItemCount,
        getItemLayout = props.getItemLayout;
      (0, _invariant.default)(index >= 0 && index < getItemCount(data), 'Tried to get frame for out of range index ' + index);
      var item = getItem(data, index);
      var frame = item && _this._frames[_this._keyExtractor(item, index, props)];
      if (!frame || frame.index !== index) {
        if (getItemLayout) {
          return getItemLayout(data, index);
        }
      }
      return frame;
    };
    _this._getNonViewportRenderRegions = function (props) {
      if (!(_this._lastFocusedCellKey && _this._cellRefs[_this._lastFocusedCellKey])) {
        return [];
      }
      var lastFocusedCellRenderer = _this._cellRefs[_this._lastFocusedCellKey];
      var focusedCellIndex = lastFocusedCellRenderer.props.index;
      var itemCount = props.getItemCount(props.data);
      if (focusedCellIndex >= itemCount || _this._indicesToKeys.get(focusedCellIndex) !== _this._lastFocusedCellKey) {
        return [];
      }
      var first = focusedCellIndex;
      var heightOfCellsBeforeFocused = 0;
      for (var i = first - 1; i >= 0 && heightOfCellsBeforeFocused < _this._scrollMetrics.visibleLength; i--) {
        first--;
        heightOfCellsBeforeFocused += _this.__getFrameMetricsApprox(i, props).length;
      }
      var last = focusedCellIndex;
      var heightOfCellsAfterFocused = 0;
      for (var _i = last + 1; _i < itemCount && heightOfCellsAfterFocused < _this._scrollMetrics.visibleLength; _i++) {
        last++;
        heightOfCellsAfterFocused += _this.__getFrameMetricsApprox(_i, props).length;
      }
      return [{
        first: first,
        last: last
      }];
    };
    (0, _invariant.default)(!_props.onScroll || !_props.onScroll.__isNative, 'Components based on VirtualizedList must be wrapped with Animated.createAnimatedComponent ' + 'to support native onScroll events with useNativeDriver');
    (0, _invariant.default)(windowSizeOrDefault(_props.windowSize) > 0, 'VirtualizedList: The windowSize prop must be present and set to a value greater than 0.');
    (0, _invariant.default)(_props.getItemCount, 'VirtualizedList: The "getItemCount" prop must be provided');
    _this._fillRateHelper = new _FillRateHelper.default(_this._getFrameMetrics);
    _this._updateCellsToRenderBatcher = new _Batchinator.default(_this._updateCellsToRender, (_this$props$updateCel = _this.props.updateCellsBatchingPeriod) != null ? _this$props$updateCel : 50);
    if (_this.props.viewabilityConfigCallbackPairs) {
      _this._viewabilityTuples = _this.props.viewabilityConfigCallbackPairs.map(function (pair) {
        return {
          viewabilityHelper: new _ViewabilityHelper.default(pair.viewabilityConfig),
          onViewableItemsChanged: pair.onViewableItemsChanged
        };
      });
    } else {
      var _this$props = _this.props,
        onViewableItemsChanged = _this$props.onViewableItemsChanged,
        viewabilityConfig = _this$props.viewabilityConfig;
      if (onViewableItemsChanged) {
        _this._viewabilityTuples.push({
          viewabilityHelper: new _ViewabilityHelper.default(viewabilityConfig),
          onViewableItemsChanged: onViewableItemsChanged
        });
      }
    }
    (0, _invariant.default)(!_this.context, 'Unexpectedly saw VirtualizedListContext available in ctor');
    var initialRenderRegion = VirtualizedList._initialRenderRegion(_props);
    _this.state = {
      cellsAroundViewport: initialRenderRegion,
      renderMask: VirtualizedList._createRenderMask(_props, initialRenderRegion)
    };
    return _this;
  }
  (0, _createClass2.default)(VirtualizedList, [{
    key: "scrollToEnd",
    value: function scrollToEnd(params) {
      var animated = params ? params.animated : true;
      var veryLast = this.props.getItemCount(this.props.data) - 1;
      var frame = this.__getFrameMetricsApprox(veryLast, this.props);
      var offset = Math.max(0, frame.offset + frame.length + this._footerLength - this._scrollMetrics.visibleLength);
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToIndex",
    value: function scrollToIndex(params) {
      var _this$props2 = this.props,
        data = _this$props2.data,
        horizontal = _this$props2.horizontal,
        getItemCount = _this$props2.getItemCount,
        getItemLayout = _this$props2.getItemLayout,
        onScrollToIndexFailed = _this$props2.onScrollToIndexFailed;
      var animated = params.animated,
        index = params.index,
        viewOffset = params.viewOffset,
        viewPosition = params.viewPosition;
      (0, _invariant.default)(index >= 0, "scrollToIndex out of range: requested index " + index + " but minimum is 0");
      (0, _invariant.default)(getItemCount(data) >= 1, "scrollToIndex out of range: item length " + getItemCount(data) + " but minimum is 1");
      (0, _invariant.default)(index < getItemCount(data), "scrollToIndex out of range: requested index " + index + " is out of 0 to " + (getItemCount(data) - 1));
      if (!getItemLayout && index > this._highestMeasuredFrameIndex) {
        (0, _invariant.default)(!!onScrollToIndexFailed, 'scrollToIndex should be used in conjunction with getItemLayout or onScrollToIndexFailed, ' + 'otherwise there is no way to know the location of offscreen indices or handle failures.');
        onScrollToIndexFailed({
          averageItemLength: this._averageCellLength,
          highestMeasuredFrameIndex: this._highestMeasuredFrameIndex,
          index: index
        });
        return;
      }
      var frame = this.__getFrameMetricsApprox(Math.floor(index), this.props);
      var offset = Math.max(0, this._getOffsetApprox(index, this.props) - (viewPosition || 0) * (this._scrollMetrics.visibleLength - frame.length)) - (viewOffset || 0);
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontal ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "scrollToItem",
    value: function scrollToItem(params) {
      var item = params.item;
      var _this$props3 = this.props,
        data = _this$props3.data,
        getItem = _this$props3.getItem,
        getItemCount = _this$props3.getItemCount;
      var itemCount = getItemCount(data);
      for (var _index = 0; _index < itemCount; _index++) {
        if (getItem(data, _index) === item) {
          this.scrollToIndex(Object.assign({}, params, {
            index: _index
          }));
          break;
        }
      }
    }
  }, {
    key: "scrollToOffset",
    value: function scrollToOffset(params) {
      var animated = params.animated,
        offset = params.offset;
      if (this._scrollRef == null) {
        return;
      }
      if (this._scrollRef.scrollTo == null) {
        console.warn('No scrollTo method provided. This may be because you have two nested ' + 'VirtualizedLists with the same orientation, or because you are ' + 'using a custom component that does not implement scrollTo.');
        return;
      }
      this._scrollRef.scrollTo(horizontalOrDefault(this.props.horizontal) ? {
        x: offset,
        animated: animated
      } : {
        y: offset,
        animated: animated
      });
    }
  }, {
    key: "recordInteraction",
    value: function recordInteraction() {
      this._nestedChildLists.forEach(function (childList) {
        childList.recordInteraction();
      });
      this._viewabilityTuples.forEach(function (t) {
        t.viewabilityHelper.recordInteraction();
      });
      this._updateViewableItems(this.props, this.state.cellsAroundViewport);
    }
  }, {
    key: "flashScrollIndicators",
    value: function flashScrollIndicators() {
      if (this._scrollRef == null) {
        return;
      }
      this._scrollRef.flashScrollIndicators();
    }
  }, {
    key: "getScrollResponder",
    value: function getScrollResponder() {
      if (this._scrollRef && this._scrollRef.getScrollResponder) {
        return this._scrollRef.getScrollResponder();
      }
    }
  }, {
    key: "getScrollableNode",
    value: function getScrollableNode() {
      if (this._scrollRef && this._scrollRef.getScrollableNode) {
        return this._scrollRef.getScrollableNode();
      } else {
        return (0, _RendererProxy.findNodeHandle)(this._scrollRef);
      }
    }
  }, {
    key: "getScrollRef",
    value: function getScrollRef() {
      if (this._scrollRef && this._scrollRef.getScrollRef) {
        return this._scrollRef.getScrollRef();
      } else {
        return this._scrollRef;
      }
    }
  }, {
    key: "setNativeProps",
    value: function setNativeProps(props) {
      if (this._scrollRef) {
        this._scrollRef.setNativeProps(props);
      }
    }
  }, {
    key: "_getCellKey",
    value: function _getCellKey() {
      var _this$context;
      return ((_this$context = this.context) == null ? void 0 : _this$context.cellKey) || 'rootList';
    }
  }, {
    key: "hasMore",
    value: function hasMore() {
      return this._hasMore;
    }
  }, {
    key: "_adjustCellsAroundViewport",
    value: function _adjustCellsAroundViewport(props, cellsAroundViewport) {
      var data = props.data,
        getItemCount = props.getItemCount;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(props.onEndReachedThreshold);
      this._updateViewableItems(props, cellsAroundViewport);
      var _this$_scrollMetrics = this._scrollMetrics,
        contentLength = _this$_scrollMetrics.contentLength,
        offset = _this$_scrollMetrics.offset,
        visibleLength = _this$_scrollMetrics.visibleLength;
      var distanceFromEnd = contentLength - visibleLength - offset;
      if (visibleLength <= 0 || contentLength <= 0) {
        return cellsAroundViewport.last >= getItemCount(data) ? VirtualizedList._constrainToItemCount(cellsAroundViewport, props) : cellsAroundViewport;
      }
      var newCellsAroundViewport;
      if (props.disableVirtualization) {
        var renderAhead = distanceFromEnd < onEndReachedThreshold * visibleLength ? maxToRenderPerBatchOrDefault(props.maxToRenderPerBatch) : 0;
        newCellsAroundViewport = {
          first: 0,
          last: Math.min(cellsAroundViewport.last + renderAhead, getItemCount(data) - 1)
        };
      } else {
        if (props.initialScrollIndex && !this._scrollMetrics.offset && Math.abs(distanceFromEnd) >= Number.EPSILON) {
          return cellsAroundViewport.last >= getItemCount(data) ? VirtualizedList._constrainToItemCount(cellsAroundViewport, props) : cellsAroundViewport;
        }
        newCellsAroundViewport = (0, _VirtualizeUtils.computeWindowedRenderLimits)(props, maxToRenderPerBatchOrDefault(props.maxToRenderPerBatch), windowSizeOrDefault(props.windowSize), cellsAroundViewport, this.__getFrameMetricsApprox, this._scrollMetrics);
        (0, _invariant.default)(newCellsAroundViewport.last < getItemCount(data), 'computeWindowedRenderLimits() should return range in-bounds');
      }
      if (this._nestedChildLists.size() > 0) {
        var childIdx = this._findFirstChildWithMore(newCellsAroundViewport.first, newCellsAroundViewport.last);
        newCellsAroundViewport.last = childIdx != null ? childIdx : newCellsAroundViewport.last;
      }
      return newCellsAroundViewport;
    }
  }, {
    key: "_findFirstChildWithMore",
    value: function _findFirstChildWithMore(first, last) {
      for (var ii = first; ii <= last; ii++) {
        var cellKeyForIndex = this._indicesToKeys.get(ii);
        if (cellKeyForIndex != null && this._nestedChildLists.anyInCell(cellKeyForIndex, function (childList) {
          return childList.hasMore();
        })) {
          return ii;
        }
      }
      return null;
    }
  }, {
    key: "componentDidMount",
    value: function componentDidMount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.registerAsNestedChild({
          ref: this,
          cellKey: this.context.cellKey
        });
      }
    }
  }, {
    key: "componentWillUnmount",
    value: function componentWillUnmount() {
      if (this._isNestedWithSameOrientation()) {
        this.context.unregisterAsNestedChild({
          ref: this
        });
      }
      this._updateCellsToRenderBatcher.dispose({
        abort: true
      });
      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.dispose();
      });
      this._fillRateHelper.deactivateAndFlush();
    }
  }, {
    key: "_pushCells",
    value: function _pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, first, last, inversionStyle) {
      var _this2 = this;
      var _this$props4 = this.props,
        CellRendererComponent = _this$props4.CellRendererComponent,
        ItemSeparatorComponent = _this$props4.ItemSeparatorComponent,
        ListHeaderComponent = _this$props4.ListHeaderComponent,
        ListItemComponent = _this$props4.ListItemComponent,
        data = _this$props4.data,
        debug = _this$props4.debug,
        getItem = _this$props4.getItem,
        getItemCount = _this$props4.getItemCount,
        getItemLayout = _this$props4.getItemLayout,
        horizontal = _this$props4.horizontal,
        renderItem = _this$props4.renderItem;
      var stickyOffset = ListHeaderComponent ? 1 : 0;
      var end = getItemCount(data) - 1;
      var prevCellKey;
      last = Math.min(end, last);
      var _loop = function _loop() {
        var item = getItem(data, ii);
        var key = _this2._keyExtractor(item, ii, _this2.props);
        _this2._indicesToKeys.set(ii, key);
        if (stickyIndicesFromProps.has(ii + stickyOffset)) {
          stickyHeaderIndices.push(cells.length);
        }
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListCellRenderer.default, {
          CellRendererComponent: CellRendererComponent,
          ItemSeparatorComponent: ii < end ? ItemSeparatorComponent : undefined,
          ListItemComponent: ListItemComponent,
          cellKey: key,
          debug: debug,
          fillRateHelper: _this2._fillRateHelper,
          getItemLayout: getItemLayout,
          horizontal: horizontal,
          index: ii,
          inversionStyle: inversionStyle,
          item: item,
          prevCellKey: prevCellKey,
          onCellLayout: _this2._onCellLayout,
          onUpdateSeparators: _this2._onUpdateSeparators,
          onCellFocusCapture: function onCellFocusCapture(e) {
            return _this2._onCellFocusCapture(key);
          },
          onUnmount: _this2._onCellUnmount,
          ref: function ref(_ref) {
            _this2._cellRefs[key] = _ref;
          },
          renderItem: renderItem
        }, key));
        prevCellKey = key;
      };
      for (var ii = first; ii <= last; ii++) {
        _loop();
      }
    }
  }, {
    key: "_isNestedWithSameOrientation",
    value: function _isNestedWithSameOrientation() {
      var nestedContext = this.context;
      return !!(nestedContext && !!nestedContext.horizontal === horizontalOrDefault(this.props.horizontal));
    }
  }, {
    key: "_keyExtractor",
    value: function _keyExtractor(item, index, props) {
      if (props.keyExtractor != null) {
        return props.keyExtractor(item, index);
      }
      var key = (0, _VirtualizeUtils.keyExtractor)(item, index);
      if (key === String(index)) {
        _usedIndexForKey = true;
        if (item.type && item.type.displayName) {
          _keylessItemComponentName = item.type.displayName;
        }
      }
      return key;
    }
  }, {
    key: "render",
    value: function render() {
      var _this3 = this;
      if (__DEV__) {
        var flatStyles = (0, _flattenStyle.default)(this.props.contentContainerStyle);
        if (flatStyles != null && flatStyles.flexWrap === 'wrap') {
          console.warn('`flexWrap: `wrap`` is not supported with the `VirtualizedList` components.' + 'Consider using `numColumns` with `FlatList` instead.');
        }
      }
      var _this$props5 = this.props,
        ListEmptyComponent = _this$props5.ListEmptyComponent,
        ListFooterComponent = _this$props5.ListFooterComponent,
        ListHeaderComponent = _this$props5.ListHeaderComponent;
      var _this$props6 = this.props,
        data = _this$props6.data,
        horizontal = _this$props6.horizontal;
      var inversionStyle = this.props.inverted ? horizontalOrDefault(this.props.horizontal) ? styles.horizontallyInverted : styles.verticallyInverted : null;
      var cells = [];
      var stickyIndicesFromProps = new Set(this.props.stickyHeaderIndices);
      var stickyHeaderIndices = [];
      if (ListHeaderComponent) {
        if (stickyIndicesFromProps.has(0)) {
          stickyHeaderIndices.push(0);
        }
        var _element = React.isValidElement(ListHeaderComponent) ? ListHeaderComponent : (0, _jsxRuntime.jsx)(ListHeaderComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getCellKey() + '-header',
          children: (0, _jsxRuntime.jsx)(_View.default, {
            onLayout: this._onLayoutHeader,
            style: _StyleSheet.default.compose(inversionStyle, this.props.ListHeaderComponentStyle),
            children: _element
          })
        }, "$header"));
      }
      var itemCount = this.props.getItemCount(data);
      if (itemCount === 0 && ListEmptyComponent) {
        var _element2 = React.isValidElement(ListEmptyComponent) ? ListEmptyComponent : (0, _jsxRuntime.jsx)(ListEmptyComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getCellKey() + '-empty',
          children: React.cloneElement(_element2, {
            onLayout: function onLayout(event) {
              _this3._onLayoutEmpty(event);
              if (_element2.props.onLayout) {
                _element2.props.onLayout(event);
              }
            },
            style: _StyleSheet.default.compose(inversionStyle, _element2.props.style)
          })
        }, "$empty"));
      }
      if (itemCount > 0) {
        _usedIndexForKey = false;
        _keylessItemComponentName = '';
        var spacerKey = this._getSpacerKey(!horizontal);
        var renderRegions = this.state.renderMask.enumerateRegions();
        var lastSpacer = findLastWhere(renderRegions, function (r) {
          return r.isSpacer;
        });
        for (var section of renderRegions) {
          if (section.isSpacer) {
            if (this.props.disableVirtualization) {
              continue;
            }
            var isLastSpacer = section === lastSpacer;
            var constrainToMeasured = isLastSpacer && !this.props.getItemLayout;
            var last = constrainToMeasured ? (0, _clamp.default)(section.first - 1, section.last, this._highestMeasuredFrameIndex) : section.last;
            var firstMetrics = this.__getFrameMetricsApprox(section.first, this.props);
            var lastMetrics = this.__getFrameMetricsApprox(last, this.props);
            var spacerSize = lastMetrics.offset + lastMetrics.length - firstMetrics.offset;
            cells.push((0, _jsxRuntime.jsx)(_View.default, {
              style: (0, _defineProperty2.default)({}, spacerKey, spacerSize)
            }, "$spacer-" + section.first));
          } else {
            this._pushCells(cells, stickyHeaderIndices, stickyIndicesFromProps, section.first, section.last, inversionStyle);
          }
        }
        if (!this._hasWarned.keys && _usedIndexForKey) {
          console.warn('VirtualizedList: missing keys for items, make sure to specify a key or id property on each ' + 'item or provide a custom keyExtractor.', _keylessItemComponentName);
          this._hasWarned.keys = true;
        }
      }
      if (ListFooterComponent) {
        var _element3 = React.isValidElement(ListFooterComponent) ? ListFooterComponent : (0, _jsxRuntime.jsx)(ListFooterComponent, {});
        cells.push((0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListCellContextProvider, {
          cellKey: this._getFooterCellKey(),
          children: (0, _jsxRuntime.jsx)(_View.default, {
            onLayout: this._onLayoutFooter,
            style: _StyleSheet.default.compose(inversionStyle, this.props.ListFooterComponentStyle),
            children: _element3
          })
        }, "$footer"));
      }
      var scrollProps = Object.assign({}, this.props, {
        onContentSizeChange: this._onContentSizeChange,
        onLayout: this._onLayout,
        onScroll: this._onScroll,
        onScrollBeginDrag: this._onScrollBeginDrag,
        onScrollEndDrag: this._onScrollEndDrag,
        onMomentumScrollBegin: this._onMomentumScrollBegin,
        onMomentumScrollEnd: this._onMomentumScrollEnd,
        scrollEventThrottle: scrollEventThrottleOrDefault(this.props.scrollEventThrottle),
        invertStickyHeaders: this.props.invertStickyHeaders !== undefined ? this.props.invertStickyHeaders : this.props.inverted,
        stickyHeaderIndices: stickyHeaderIndices,
        style: inversionStyle ? [inversionStyle, this.props.style] : this.props.style
      });
      this._hasMore = this.state.cellsAroundViewport.last < itemCount - 1;
      var innerRet = (0, _jsxRuntime.jsx)(_VirtualizedListContext.VirtualizedListContextProvider, {
        value: {
          cellKey: null,
          getScrollMetrics: this._getScrollMetrics,
          horizontal: horizontalOrDefault(this.props.horizontal),
          getOutermostParentListRef: this._getOutermostParentListRef,
          registerAsNestedChild: this._registerAsNestedChild,
          unregisterAsNestedChild: this._unregisterAsNestedChild
        },
        children: React.cloneElement((this.props.renderScrollComponent || this._defaultRenderScrollComponent)(scrollProps), {
          ref: this._captureScrollRef
        }, cells)
      });
      var ret = innerRet;
      if (__DEV__) {
        ret = (0, _jsxRuntime.jsx)(_ScrollView.default.Context.Consumer, {
          children: function children(scrollContext) {
            if (scrollContext != null && !scrollContext.horizontal === !horizontalOrDefault(_this3.props.horizontal) && !_this3._hasWarned.nesting && _this3.context == null && _this3.props.scrollEnabled !== false) {
              console.error('VirtualizedLists should never be nested inside plain ScrollViews with the same ' + 'orientation because it can break windowing and other functionality - use another ' + 'VirtualizedList-backed container instead.');
              _this3._hasWarned.nesting = true;
            }
            return innerRet;
          }
        });
      }
      if (this.props.debug) {
        return (0, _jsxRuntime.jsxs)(_View.default, {
          style: styles.debug,
          children: [ret, this._renderDebugOverlay()]
        });
      } else {
        return ret;
      }
    }
  }, {
    key: "componentDidUpdate",
    value: function componentDidUpdate(prevProps) {
      var _this$props7 = this.props,
        data = _this$props7.data,
        extraData = _this$props7.extraData;
      if (data !== prevProps.data || extraData !== prevProps.extraData) {
        this._viewabilityTuples.forEach(function (tuple) {
          tuple.viewabilityHelper.resetViewableIndices();
        });
      }
      var hiPriInProgress = this._hiPriInProgress;
      this._scheduleCellsToRenderUpdate();
      if (hiPriInProgress) {
        this._hiPriInProgress = false;
      }
    }
  }, {
    key: "_computeBlankness",
    value: function _computeBlankness() {
      this._fillRateHelper.computeBlankness(this.props, this.state.cellsAroundViewport, this._scrollMetrics);
    }
  }, {
    key: "_onCellFocusCapture",
    value: function _onCellFocusCapture(cellKey) {
      this._lastFocusedCellKey = cellKey;
      var renderMask = VirtualizedList._createRenderMask(this.props, this.state.cellsAroundViewport, this._getNonViewportRenderRegions(this.props));
      this.setState(function (state) {
        if (!renderMask.equals(state.renderMask)) {
          return {
            renderMask: renderMask
          };
        }
        return null;
      });
    }
  }, {
    key: "_triggerRemeasureForChildListsInCell",
    value: function _triggerRemeasureForChildListsInCell(cellKey) {
      this._nestedChildLists.forEachInCell(cellKey, function (childList) {
        childList.measureLayoutRelativeToContainingList();
      });
    }
  }, {
    key: "measureLayoutRelativeToContainingList",
    value: function measureLayoutRelativeToContainingList() {
      var _this4 = this;
      try {
        if (!this._scrollRef) {
          return;
        }
        this._scrollRef.measureLayout(this.context.getOutermostParentListRef().getScrollRef(), function (x, y, width, height) {
          _this4._offsetFromParentVirtualizedList = _this4._selectOffset({
            x: x,
            y: y
          });
          _this4._scrollMetrics.contentLength = _this4._selectLength({
            width: width,
            height: height
          });
          var scrollMetrics = _this4._convertParentScrollMetrics(_this4.context.getScrollMetrics());
          var metricsChanged = _this4._scrollMetrics.visibleLength !== scrollMetrics.visibleLength || _this4._scrollMetrics.offset !== scrollMetrics.offset;
          if (metricsChanged) {
            _this4._scrollMetrics.visibleLength = scrollMetrics.visibleLength;
            _this4._scrollMetrics.offset = scrollMetrics.offset;
            _this4._nestedChildLists.forEach(function (childList) {
              childList.measureLayoutRelativeToContainingList();
            });
          }
        }, function (error) {
          console.warn("VirtualizedList: Encountered an error while measuring a list's" + ' offset from its containing VirtualizedList.');
        });
      } catch (error) {
        console.warn('measureLayoutRelativeToContainingList threw an error', error.stack);
      }
    }
  }, {
    key: "_getFooterCellKey",
    value: function _getFooterCellKey() {
      return this._getCellKey() + '-footer';
    }
  }, {
    key: "_renderDebugOverlay",
    value: function _renderDebugOverlay() {
      var normalize = this._scrollMetrics.visibleLength / (this._scrollMetrics.contentLength || 1);
      var framesInLayout = [];
      var itemCount = this.props.getItemCount(this.props.data);
      for (var ii = 0; ii < itemCount; ii++) {
        var frame = this.__getFrameMetricsApprox(ii, this.props);
        if (frame.inLayout) {
          framesInLayout.push(frame);
        }
      }
      var windowTop = this.__getFrameMetricsApprox(this.state.cellsAroundViewport.first, this.props).offset;
      var frameLast = this.__getFrameMetricsApprox(this.state.cellsAroundViewport.last, this.props);
      var windowLen = frameLast.offset + frameLast.length - windowTop;
      var visTop = this._scrollMetrics.offset;
      var visLen = this._scrollMetrics.visibleLength;
      return (0, _jsxRuntime.jsxs)(_View.default, {
        style: [styles.debugOverlayBase, styles.debugOverlay],
        children: [framesInLayout.map(function (f, ii) {
          return (0, _jsxRuntime.jsx)(_View.default, {
            style: [styles.debugOverlayBase, styles.debugOverlayFrame, {
              top: f.offset * normalize,
              height: f.length * normalize
            }]
          }, 'f' + ii);
        }), (0, _jsxRuntime.jsx)(_View.default, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameLast, {
            top: windowTop * normalize,
            height: windowLen * normalize
          }]
        }), (0, _jsxRuntime.jsx)(_View.default, {
          style: [styles.debugOverlayBase, styles.debugOverlayFrameVis, {
            top: visTop * normalize,
            height: visLen * normalize
          }]
        })]
      });
    }
  }, {
    key: "_selectLength",
    value: function _selectLength(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.height : metrics.width;
    }
  }, {
    key: "_selectOffset",
    value: function _selectOffset(metrics) {
      return !horizontalOrDefault(this.props.horizontal) ? metrics.y : metrics.x;
    }
  }, {
    key: "_maybeCallOnEndReached",
    value: function _maybeCallOnEndReached() {
      var _this$props8 = this.props,
        data = _this$props8.data,
        getItemCount = _this$props8.getItemCount,
        onEndReached = _this$props8.onEndReached,
        onEndReachedThreshold = _this$props8.onEndReachedThreshold;
      var _this$_scrollMetrics2 = this._scrollMetrics,
        contentLength = _this$_scrollMetrics2.contentLength,
        visibleLength = _this$_scrollMetrics2.visibleLength,
        offset = _this$_scrollMetrics2.offset;
      var distanceFromEnd = contentLength - visibleLength - offset;
      if (distanceFromEnd < ON_END_REACHED_EPSILON) {
        distanceFromEnd = 0;
      }
      var threshold = onEndReachedThreshold != null ? onEndReachedThreshold * visibleLength : 2;
      if (onEndReached && this.state.cellsAroundViewport.last === getItemCount(data) - 1 && distanceFromEnd <= threshold && this._scrollMetrics.contentLength !== this._sentEndForContentLength) {
        this._sentEndForContentLength = this._scrollMetrics.contentLength;
        onEndReached({
          distanceFromEnd: distanceFromEnd
        });
      } else if (distanceFromEnd > threshold) {
        this._sentEndForContentLength = 0;
      }
    }
  }, {
    key: "_scheduleCellsToRenderUpdate",
    value: function _scheduleCellsToRenderUpdate() {
      var _this$state$cellsArou = this.state.cellsAroundViewport,
        first = _this$state$cellsArou.first,
        last = _this$state$cellsArou.last;
      var _this$_scrollMetrics3 = this._scrollMetrics,
        offset = _this$_scrollMetrics3.offset,
        visibleLength = _this$_scrollMetrics3.visibleLength,
        velocity = _this$_scrollMetrics3.velocity;
      var itemCount = this.props.getItemCount(this.props.data);
      var hiPri = false;
      var onEndReachedThreshold = onEndReachedThresholdOrDefault(this.props.onEndReachedThreshold);
      var scrollingThreshold = onEndReachedThreshold * visibleLength / 2;
      if (first > 0) {
        var distTop = offset - this.__getFrameMetricsApprox(first, this.props).offset;
        hiPri = hiPri || distTop < 0 || velocity < -2 && distTop < scrollingThreshold;
      }
      if (last >= 0 && last < itemCount - 1) {
        var distBottom = this.__getFrameMetricsApprox(last, this.props).offset - (offset + visibleLength);
        hiPri = hiPri || distBottom < 0 || velocity > 2 && distBottom < scrollingThreshold;
      }
      if (hiPri && (this._averageCellLength || this.props.getItemLayout) && !this._hiPriInProgress) {
        this._hiPriInProgress = true;
        this._updateCellsToRenderBatcher.dispose({
          abort: true
        });
        this._updateCellsToRender();
        return;
      } else {
        this._updateCellsToRenderBatcher.schedule();
      }
    }
  }, {
    key: "_updateViewableItems",
    value: function _updateViewableItems(props, cellsAroundViewport) {
      var _this5 = this;
      this._viewabilityTuples.forEach(function (tuple) {
        tuple.viewabilityHelper.onUpdate(props, _this5._scrollMetrics.offset, _this5._scrollMetrics.visibleLength, _this5._getFrameMetrics, _this5._createViewToken, tuple.onViewableItemsChanged, cellsAroundViewport);
      });
    }
  }], [{
    key: "_createRenderMask",
    value: function _createRenderMask(props, cellsAroundViewport, additionalRegions) {
      var itemCount = props.getItemCount(props.data);
      (0, _invariant.default)(cellsAroundViewport.first >= 0 && cellsAroundViewport.last >= cellsAroundViewport.first - 1 && cellsAroundViewport.last < itemCount, "Invalid cells around viewport \"[" + cellsAroundViewport.first + ", " + cellsAroundViewport.last + "]\" was passed to VirtualizedList._createRenderMask");
      var renderMask = new _CellRenderMask.CellRenderMask(itemCount);
      if (itemCount > 0) {
        var allRegions = [cellsAroundViewport].concat((0, _toConsumableArray2.default)(additionalRegions != null ? additionalRegions : []));
        for (var region of allRegions) {
          renderMask.addCells(region);
        }
        if (props.initialScrollIndex == null || props.initialScrollIndex <= 0) {
          var initialRegion = VirtualizedList._initialRenderRegion(props);
          renderMask.addCells(initialRegion);
        }
        var stickyIndicesSet = new Set(props.stickyHeaderIndices);
        VirtualizedList._ensureClosestStickyHeader(props, stickyIndicesSet, renderMask, cellsAroundViewport.first);
      }
      return renderMask;
    }
  }, {
    key: "_initialRenderRegion",
    value: function _initialRenderRegion(props) {
      var _props$initialScrollI;
      var itemCount = props.getItemCount(props.data);
      var scrollIndex = Math.floor(Math.max(0, (_props$initialScrollI = props.initialScrollIndex) != null ? _props$initialScrollI : 0));
      return {
        first: scrollIndex,
        last: Math.min(itemCount, scrollIndex + initialNumToRenderOrDefault(props.initialNumToRender)) - 1
      };
    }
  }, {
    key: "_ensureClosestStickyHeader",
    value: function _ensureClosestStickyHeader(props, stickyIndicesSet, renderMask, cellIdx) {
      var stickyOffset = props.ListHeaderComponent ? 1 : 0;
      for (var itemIdx = cellIdx - 1; itemIdx >= 0; itemIdx--) {
        if (stickyIndicesSet.has(itemIdx + stickyOffset)) {
          renderMask.addCells({
            first: itemIdx,
            last: itemIdx
          });
          break;
        }
      }
    }
  }, {
    key: "getDerivedStateFromProps",
    value: function getDerivedStateFromProps(newProps, prevState) {
      var itemCount = newProps.getItemCount(newProps.data);
      if (itemCount === prevState.renderMask.numCells()) {
        return prevState;
      }
      var constrainedCells = VirtualizedList._constrainToItemCount(prevState.cellsAroundViewport, newProps);
      return {
        cellsAroundViewport: constrainedCells,
        renderMask: VirtualizedList._createRenderMask(newProps, constrainedCells)
      };
    }
  }, {
    key: "_constrainToItemCount",
    value: function _constrainToItemCount(cells, props) {
      var itemCount = props.getItemCount(props.data);
      var last = Math.min(itemCount - 1, cells.last);
      var maxToRenderPerBatch = maxToRenderPerBatchOrDefault(props.maxToRenderPerBatch);
      return {
        first: (0, _clamp.default)(0, itemCount - 1 - maxToRenderPerBatch, cells.first),
        last: last
      };
    }
  }]);
  return VirtualizedList;
}(_StateSafePureComponent.default);
exports.default = VirtualizedList;
VirtualizedList.contextType = _VirtualizedListContext.VirtualizedListContext;
var styles = _StyleSheet.default.create({
  verticallyInverted: {
    transform: [{
      scaleY: -1
    }]
  },
  horizontallyInverted: {
    transform: [{
      scaleX: -1
    }]
  },
  debug: {
    flex: 1
  },
  debugOverlayBase: {
    position: 'absolute',
    top: 0,
    right: 0
  },
  debugOverlay: {
    bottom: 0,
    width: 20,
    borderColor: 'blue',
    borderWidth: 1
  },
  debugOverlayFrame: {
    left: 0,
    backgroundColor: 'orange'
  },
  debugOverlayFrameLast: {
    left: 0,
    borderColor: 'green',
    borderWidth: 2
  },
  debugOverlayFrameVis: {
    left: 0,
    borderColor: 'red',
    borderWidth: 2
  }
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJPTl9FTkRfUkVBQ0hFRF9FUFNJTE9OIiwiX3VzZWRJbmRleEZvcktleSIsIl9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUiLCJob3Jpem9udGFsT3JEZWZhdWx0IiwiaG9yaXpvbnRhbCIsImluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCIsImluaXRpYWxOdW1Ub1JlbmRlciIsIm1heFRvUmVuZGVyUGVyQmF0Y2hPckRlZmF1bHQiLCJtYXhUb1JlbmRlclBlckJhdGNoIiwib25FbmRSZWFjaGVkVGhyZXNob2xkT3JEZWZhdWx0Iiwib25FbmRSZWFjaGVkVGhyZXNob2xkIiwic2Nyb2xsRXZlbnRUaHJvdHRsZU9yRGVmYXVsdCIsInNjcm9sbEV2ZW50VGhyb3R0bGUiLCJ3aW5kb3dTaXplT3JEZWZhdWx0Iiwid2luZG93U2l6ZSIsImZpbmRMYXN0V2hlcmUiLCJhcnIiLCJwcmVkaWNhdGUiLCJpIiwibGVuZ3RoIiwiVmlydHVhbGl6ZWRMaXN0IiwicHJvcHMiLCJfZ2V0U2Nyb2xsTWV0cmljcyIsIl9zY3JvbGxNZXRyaWNzIiwiX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJfaXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uIiwiY29udGV4dCIsImdldE91dGVybW9zdFBhcmVudExpc3RSZWYiLCJfcmVnaXN0ZXJBc05lc3RlZENoaWxkIiwiY2hpbGRMaXN0IiwiX25lc3RlZENoaWxkTGlzdHMiLCJhZGQiLCJyZWYiLCJjZWxsS2V5IiwiX2hhc0ludGVyYWN0ZWQiLCJyZWNvcmRJbnRlcmFjdGlvbiIsIl91bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCIsInJlbW92ZSIsInN0YXRlIiwiX29uVXBkYXRlU2VwYXJhdG9ycyIsImtleXMiLCJuZXdQcm9wcyIsImZvckVhY2giLCJrZXkiLCJfY2VsbFJlZnMiLCJ1cGRhdGVTZXBhcmF0b3JQcm9wcyIsIl9nZXRTcGFjZXJLZXkiLCJpc1ZlcnRpY2FsIiwiX2F2ZXJhZ2VDZWxsTGVuZ3RoIiwiX2ZpbGxSYXRlSGVscGVyIiwiX2ZyYW1lcyIsIl9mb290ZXJMZW5ndGgiLCJfaGFzVHJpZ2dlcmVkSW5pdGlhbFNjcm9sbFRvSW5kZXgiLCJfaGFzTW9yZSIsIl9oYXNXYXJuZWQiLCJfaGVhZGVyTGVuZ3RoIiwiX2hpUHJpSW5Qcm9ncmVzcyIsIl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4IiwiX2luZGljZXNUb0tleXMiLCJNYXAiLCJfbGFzdEZvY3VzZWRDZWxsS2V5IiwiQ2hpbGRMaXN0Q29sbGVjdGlvbiIsIl9vZmZzZXRGcm9tUGFyZW50VmlydHVhbGl6ZWRMaXN0IiwiX3ByZXZQYXJlbnRPZmZzZXQiLCJjb250ZW50TGVuZ3RoIiwiZE9mZnNldCIsImR0Iiwib2Zmc2V0IiwidGltZXN0YW1wIiwidmVsb2NpdHkiLCJ2aXNpYmxlTGVuZ3RoIiwiem9vbVNjYWxlIiwiX3Njcm9sbFJlZiIsIl9zZW50RW5kRm9yQ29udGVudExlbmd0aCIsIl90b3RhbENlbGxMZW5ndGgiLCJfdG90YWxDZWxsc01lYXN1cmVkIiwiX3VwZGF0ZUNlbGxzVG9SZW5kZXJCYXRjaGVyIiwiX3ZpZXdhYmlsaXR5VHVwbGVzIiwiX2NhcHR1cmVTY3JvbGxSZWYiLCJfZGVmYXVsdFJlbmRlclNjcm9sbENvbXBvbmVudCIsIm9uUmVmcmVzaCIsImludmFyaWFudCIsInJlZnJlc2hpbmciLCJKU09OIiwic3RyaW5naWZ5IiwicmVmcmVzaENvbnRyb2wiLCJwcm9ncmVzc1ZpZXdPZmZzZXQiLCJfb25DZWxsTGF5b3V0IiwiZSIsImluZGV4IiwibGF5b3V0IiwibmF0aXZlRXZlbnQiLCJuZXh0IiwiX3NlbGVjdE9mZnNldCIsIl9zZWxlY3RMZW5ndGgiLCJpbkxheW91dCIsImN1cnIiLCJNYXRoIiwibWF4IiwiX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSIsIl90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbCIsIl9jb21wdXRlQmxhbmtuZXNzIiwiX3VwZGF0ZVZpZXdhYmxlSXRlbXMiLCJjZWxsc0Fyb3VuZFZpZXdwb3J0IiwiX29uQ2VsbFVubW91bnQiLCJfb25MYXlvdXQiLCJtZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0Iiwib25MYXlvdXQiLCJfbWF5YmVDYWxsT25FbmRSZWFjaGVkIiwiX29uTGF5b3V0RW1wdHkiLCJfb25MYXlvdXRGb290ZXIiLCJfZ2V0Rm9vdGVyQ2VsbEtleSIsIl9vbkxheW91dEhlYWRlciIsIl9vbkNvbnRlbnRTaXplQ2hhbmdlIiwid2lkdGgiLCJoZWlnaHQiLCJpbml0aWFsU2Nyb2xsSW5kZXgiLCJjb250ZW50T2Zmc2V0Iiwic2Nyb2xsVG9JbmRleCIsImFuaW1hdGVkIiwib25Db250ZW50U2l6ZUNoYW5nZSIsIl9jb252ZXJ0UGFyZW50U2Nyb2xsTWV0cmljcyIsIm1ldHJpY3MiLCJfb25TY3JvbGwiLCJvblNjcm9sbCIsInRpbWVTdGFtcCIsImxheW91dE1lYXN1cmVtZW50IiwiY29udGVudFNpemUiLCJwZXJmIiwiaW5mb0xvZyIsInByZXZEdCIsImFjdGl2YXRlIiwiX29uU2Nyb2xsQmVnaW5EcmFnIiwidHVwbGUiLCJ2aWV3YWJpbGl0eUhlbHBlciIsIm9uU2Nyb2xsQmVnaW5EcmFnIiwiX29uU2Nyb2xsRW5kRHJhZyIsIm9uU2Nyb2xsRW5kRHJhZyIsIl9vbk1vbWVudHVtU2Nyb2xsQmVnaW4iLCJvbk1vbWVudHVtU2Nyb2xsQmVnaW4iLCJfb25Nb21lbnR1bVNjcm9sbEVuZCIsIm9uTW9tZW50dW1TY3JvbGxFbmQiLCJfdXBkYXRlQ2VsbHNUb1JlbmRlciIsInNldFN0YXRlIiwiX2FkanVzdENlbGxzQXJvdW5kVmlld3BvcnQiLCJyZW5kZXJNYXNrIiwiX2NyZWF0ZVJlbmRlck1hc2siLCJfZ2V0Tm9uVmlld3BvcnRSZW5kZXJSZWdpb25zIiwiZmlyc3QiLCJsYXN0IiwiZXF1YWxzIiwiX2NyZWF0ZVZpZXdUb2tlbiIsImlzVmlld2FibGUiLCJkYXRhIiwiZ2V0SXRlbSIsIml0ZW0iLCJfa2V5RXh0cmFjdG9yIiwiX2dldE9mZnNldEFwcHJveCIsIk51bWJlciIsImlzSW50ZWdlciIsIl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94IiwiZnJhbWVNZXRyaWNzIiwiZmxvb3IiLCJyZW1haW5kZXIiLCJmcmFtZSIsIl9nZXRGcmFtZU1ldHJpY3MiLCJnZXRJdGVtQ291bnQiLCJnZXRJdGVtTGF5b3V0IiwibGFzdEZvY3VzZWRDZWxsUmVuZGVyZXIiLCJmb2N1c2VkQ2VsbEluZGV4IiwiaXRlbUNvdW50IiwiZ2V0IiwiaGVpZ2h0T2ZDZWxsc0JlZm9yZUZvY3VzZWQiLCJoZWlnaHRPZkNlbGxzQWZ0ZXJGb2N1c2VkIiwiX19pc05hdGl2ZSIsIkZpbGxSYXRlSGVscGVyIiwiQmF0Y2hpbmF0b3IiLCJ1cGRhdGVDZWxsc0JhdGNoaW5nUGVyaW9kIiwidmlld2FiaWxpdHlDb25maWdDYWxsYmFja1BhaXJzIiwibWFwIiwicGFpciIsIlZpZXdhYmlsaXR5SGVscGVyIiwidmlld2FiaWxpdHlDb25maWciLCJvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIiwicHVzaCIsImluaXRpYWxSZW5kZXJSZWdpb24iLCJfaW5pdGlhbFJlbmRlclJlZ2lvbiIsInBhcmFtcyIsInZlcnlMYXN0Iiwic2Nyb2xsVG8iLCJjb25zb2xlIiwid2FybiIsIngiLCJ5Iiwib25TY3JvbGxUb0luZGV4RmFpbGVkIiwidmlld09mZnNldCIsInZpZXdQb3NpdGlvbiIsImF2ZXJhZ2VJdGVtTGVuZ3RoIiwiaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCIsInQiLCJmbGFzaFNjcm9sbEluZGljYXRvcnMiLCJnZXRTY3JvbGxSZXNwb25kZXIiLCJnZXRTY3JvbGxhYmxlTm9kZSIsImZpbmROb2RlSGFuZGxlIiwiZ2V0U2Nyb2xsUmVmIiwic2V0TmF0aXZlUHJvcHMiLCJkaXN0YW5jZUZyb21FbmQiLCJfY29uc3RyYWluVG9JdGVtQ291bnQiLCJuZXdDZWxsc0Fyb3VuZFZpZXdwb3J0IiwiZGlzYWJsZVZpcnR1YWxpemF0aW9uIiwicmVuZGVyQWhlYWQiLCJtaW4iLCJhYnMiLCJFUFNJTE9OIiwiY29tcHV0ZVdpbmRvd2VkUmVuZGVyTGltaXRzIiwic2l6ZSIsImNoaWxkSWR4IiwiX2ZpbmRGaXJzdENoaWxkV2l0aE1vcmUiLCJpaSIsImNlbGxLZXlGb3JJbmRleCIsImFueUluQ2VsbCIsImhhc01vcmUiLCJyZWdpc3RlckFzTmVzdGVkQ2hpbGQiLCJ1bnJlZ2lzdGVyQXNOZXN0ZWRDaGlsZCIsImRpc3Bvc2UiLCJhYm9ydCIsImRlYWN0aXZhdGVBbmRGbHVzaCIsImNlbGxzIiwic3RpY2t5SGVhZGVySW5kaWNlcyIsInN0aWNreUluZGljZXNGcm9tUHJvcHMiLCJpbnZlcnNpb25TdHlsZSIsIkNlbGxSZW5kZXJlckNvbXBvbmVudCIsIkl0ZW1TZXBhcmF0b3JDb21wb25lbnQiLCJMaXN0SGVhZGVyQ29tcG9uZW50IiwiTGlzdEl0ZW1Db21wb25lbnQiLCJkZWJ1ZyIsInJlbmRlckl0ZW0iLCJzdGlja3lPZmZzZXQiLCJlbmQiLCJwcmV2Q2VsbEtleSIsInNldCIsImhhcyIsInVuZGVmaW5lZCIsIl9vbkNlbGxGb2N1c0NhcHR1cmUiLCJuZXN0ZWRDb250ZXh0Iiwia2V5RXh0cmFjdG9yIiwiZGVmYXVsdEtleUV4dHJhY3RvciIsIlN0cmluZyIsInR5cGUiLCJkaXNwbGF5TmFtZSIsIl9fREVWX18iLCJmbGF0U3R5bGVzIiwiZmxhdHRlblN0eWxlIiwiY29udGVudENvbnRhaW5lclN0eWxlIiwiZmxleFdyYXAiLCJMaXN0RW1wdHlDb21wb25lbnQiLCJMaXN0Rm9vdGVyQ29tcG9uZW50IiwiaW52ZXJ0ZWQiLCJzdHlsZXMiLCJob3Jpem9udGFsbHlJbnZlcnRlZCIsInZlcnRpY2FsbHlJbnZlcnRlZCIsIlNldCIsImVsZW1lbnQiLCJSZWFjdCIsImlzVmFsaWRFbGVtZW50IiwiX2dldENlbGxLZXkiLCJTdHlsZVNoZWV0IiwiY29tcG9zZSIsIkxpc3RIZWFkZXJDb21wb25lbnRTdHlsZSIsImNsb25lRWxlbWVudCIsImV2ZW50Iiwic3R5bGUiLCJzcGFjZXJLZXkiLCJyZW5kZXJSZWdpb25zIiwiZW51bWVyYXRlUmVnaW9ucyIsImxhc3RTcGFjZXIiLCJyIiwiaXNTcGFjZXIiLCJzZWN0aW9uIiwiaXNMYXN0U3BhY2VyIiwiY29uc3RyYWluVG9NZWFzdXJlZCIsImNsYW1wIiwiZmlyc3RNZXRyaWNzIiwibGFzdE1ldHJpY3MiLCJzcGFjZXJTaXplIiwiX3B1c2hDZWxscyIsIkxpc3RGb290ZXJDb21wb25lbnRTdHlsZSIsInNjcm9sbFByb3BzIiwiaW52ZXJ0U3RpY2t5SGVhZGVycyIsImlubmVyUmV0IiwiZ2V0U2Nyb2xsTWV0cmljcyIsInJlbmRlclNjcm9sbENvbXBvbmVudCIsInJldCIsInNjcm9sbENvbnRleHQiLCJuZXN0aW5nIiwic2Nyb2xsRW5hYmxlZCIsImVycm9yIiwiX3JlbmRlckRlYnVnT3ZlcmxheSIsInByZXZQcm9wcyIsImV4dHJhRGF0YSIsInJlc2V0Vmlld2FibGVJbmRpY2VzIiwiaGlQcmlJblByb2dyZXNzIiwiY29tcHV0ZUJsYW5rbmVzcyIsImZvckVhY2hJbkNlbGwiLCJtZWFzdXJlTGF5b3V0Iiwic2Nyb2xsTWV0cmljcyIsIm1ldHJpY3NDaGFuZ2VkIiwic3RhY2siLCJub3JtYWxpemUiLCJmcmFtZXNJbkxheW91dCIsIndpbmRvd1RvcCIsImZyYW1lTGFzdCIsIndpbmRvd0xlbiIsInZpc1RvcCIsInZpc0xlbiIsImRlYnVnT3ZlcmxheUJhc2UiLCJkZWJ1Z092ZXJsYXkiLCJmIiwiZGVidWdPdmVybGF5RnJhbWUiLCJ0b3AiLCJkZWJ1Z092ZXJsYXlGcmFtZUxhc3QiLCJkZWJ1Z092ZXJsYXlGcmFtZVZpcyIsIm9uRW5kUmVhY2hlZCIsInRocmVzaG9sZCIsImhpUHJpIiwic2Nyb2xsaW5nVGhyZXNob2xkIiwiZGlzdFRvcCIsImRpc3RCb3R0b20iLCJzY2hlZHVsZSIsIm9uVXBkYXRlIiwiYWRkaXRpb25hbFJlZ2lvbnMiLCJDZWxsUmVuZGVyTWFzayIsImFsbFJlZ2lvbnMiLCJyZWdpb24iLCJhZGRDZWxscyIsImluaXRpYWxSZWdpb24iLCJzdGlja3lJbmRpY2VzU2V0IiwiX2Vuc3VyZUNsb3Nlc3RTdGlja3lIZWFkZXIiLCJzY3JvbGxJbmRleCIsImNlbGxJZHgiLCJpdGVtSWR4IiwicHJldlN0YXRlIiwibnVtQ2VsbHMiLCJjb25zdHJhaW5lZENlbGxzIiwiU3RhdGVTYWZlUHVyZUNvbXBvbmVudCIsImNvbnRleHRUeXBlIiwiVmlydHVhbGl6ZWRMaXN0Q29udGV4dCIsImNyZWF0ZSIsInRyYW5zZm9ybSIsInNjYWxlWSIsInNjYWxlWCIsImZsZXgiLCJwb3NpdGlvbiIsInJpZ2h0IiwiYm90dG9tIiwiYm9yZGVyQ29sb3IiLCJib3JkZXJXaWR0aCIsImxlZnQiLCJiYWNrZ3JvdW5kQ29sb3IiXSwic291cmNlcyI6WyJWaXJ0dWFsaXplZExpc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDb3B5cmlnaHQgKGMpIE1ldGEgUGxhdGZvcm1zLCBJbmMuIGFuZCBhZmZpbGlhdGVzLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cblxuaW1wb3J0IHR5cGUge1Njcm9sbFJlc3BvbmRlclR5cGV9IGZyb20gJy4uL0NvbXBvbmVudHMvU2Nyb2xsVmlldy9TY3JvbGxWaWV3JztcbmltcG9ydCB0eXBlIHtWaWV3U3R5bGVQcm9wfSBmcm9tICcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IHR5cGUge0xheW91dEV2ZW50LCBTY3JvbGxFdmVudH0gZnJvbSAnLi4vVHlwZXMvQ29yZUV2ZW50VHlwZXMnO1xuaW1wb3J0IHR5cGUge1ZpZXdUb2tlbn0gZnJvbSAnLi9WaWV3YWJpbGl0eUhlbHBlcic7XG5pbXBvcnQgdHlwZSB7XG4gIEZyYW1lTWV0cmljUHJvcHMsXG4gIEl0ZW0sXG4gIFByb3BzLFxuICBSZW5kZXJJdGVtUHJvcHMsXG4gIFJlbmRlckl0ZW1UeXBlLFxuICBTZXBhcmF0b3JzLFxufSBmcm9tICcuL1ZpcnR1YWxpemVkTGlzdFByb3BzJztcblxuaW1wb3J0IFJlZnJlc2hDb250cm9sIGZyb20gJy4uL0NvbXBvbmVudHMvUmVmcmVzaENvbnRyb2wvUmVmcmVzaENvbnRyb2wnO1xuaW1wb3J0IFNjcm9sbFZpZXcgZnJvbSAnLi4vQ29tcG9uZW50cy9TY3JvbGxWaWV3L1Njcm9sbFZpZXcnO1xuaW1wb3J0IFZpZXcgZnJvbSAnLi4vQ29tcG9uZW50cy9WaWV3L1ZpZXcnO1xuaW1wb3J0IEJhdGNoaW5hdG9yIGZyb20gJy4uL0ludGVyYWN0aW9uL0JhdGNoaW5hdG9yJztcbmltcG9ydCB7ZmluZE5vZGVIYW5kbGV9IGZyb20gJy4uL1JlYWN0TmF0aXZlL1JlbmRlcmVyUHJveHknO1xuaW1wb3J0IGZsYXR0ZW5TdHlsZSBmcm9tICcuLi9TdHlsZVNoZWV0L2ZsYXR0ZW5TdHlsZSc7XG5pbXBvcnQgU3R5bGVTaGVldCBmcm9tICcuLi9TdHlsZVNoZWV0L1N0eWxlU2hlZXQnO1xuaW1wb3J0IGNsYW1wIGZyb20gJy4uL1V0aWxpdGllcy9jbGFtcCc7XG5pbXBvcnQgaW5mb0xvZyBmcm9tICcuLi9VdGlsaXRpZXMvaW5mb0xvZyc7XG5pbXBvcnQge0NlbGxSZW5kZXJNYXNrfSBmcm9tICcuL0NlbGxSZW5kZXJNYXNrJztcbmltcG9ydCBDaGlsZExpc3RDb2xsZWN0aW9uIGZyb20gJy4vQ2hpbGRMaXN0Q29sbGVjdGlvbic7XG5pbXBvcnQgRmlsbFJhdGVIZWxwZXIgZnJvbSAnLi9GaWxsUmF0ZUhlbHBlcic7XG5pbXBvcnQgU3RhdGVTYWZlUHVyZUNvbXBvbmVudCBmcm9tICcuL1N0YXRlU2FmZVB1cmVDb21wb25lbnQnO1xuaW1wb3J0IFZpZXdhYmlsaXR5SGVscGVyIGZyb20gJy4vVmlld2FiaWxpdHlIZWxwZXInO1xuaW1wb3J0IENlbGxSZW5kZXJlciBmcm9tICcuL1ZpcnR1YWxpemVkTGlzdENlbGxSZW5kZXJlcic7XG5pbXBvcnQge1xuICBWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyLFxuICBWaXJ0dWFsaXplZExpc3RDb250ZXh0LFxuICBWaXJ0dWFsaXplZExpc3RDb250ZXh0UHJvdmlkZXIsXG59IGZyb20gJy4vVmlydHVhbGl6ZWRMaXN0Q29udGV4dC5qcyc7XG5pbXBvcnQge1xuICBjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHMsXG4gIGtleUV4dHJhY3RvciBhcyBkZWZhdWx0S2V5RXh0cmFjdG9yLFxufSBmcm9tICcuL1ZpcnR1YWxpemVVdGlscyc7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5pbXBvcnQgKiBhcyBSZWFjdCBmcm9tICdyZWFjdCc7XG5cbmV4cG9ydCB0eXBlIHtSZW5kZXJJdGVtUHJvcHMsIFJlbmRlckl0ZW1UeXBlLCBTZXBhcmF0b3JzfTtcblxuY29uc3QgT05fRU5EX1JFQUNIRURfRVBTSUxPTiA9IDAuMDAxO1xuXG5sZXQgX3VzZWRJbmRleEZvcktleSA9IGZhbHNlO1xubGV0IF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWU6IHN0cmluZyA9ICcnO1xuXG50eXBlIFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZSA9IHtcbiAgdmlld2FiaWxpdHlIZWxwZXI6IFZpZXdhYmlsaXR5SGVscGVyLFxuICBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkOiAoaW5mbzoge1xuICAgIHZpZXdhYmxlSXRlbXM6IEFycmF5PFZpZXdUb2tlbj4sXG4gICAgY2hhbmdlZDogQXJyYXk8Vmlld1Rva2VuPixcbiAgICAuLi5cbiAgfSkgPT4gdm9pZCxcbiAgLi4uXG59O1xuXG50eXBlIFN0YXRlID0ge1xuICByZW5kZXJNYXNrOiBDZWxsUmVuZGVyTWFzayxcbiAgY2VsbHNBcm91bmRWaWV3cG9ydDoge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn0sXG59O1xuXG4vKipcbiAqIERlZmF1bHQgUHJvcHMgSGVscGVyIEZ1bmN0aW9uc1xuICogVXNlIHRoZSBmb2xsb3dpbmcgaGVscGVyIGZ1bmN0aW9ucyBmb3IgZGVmYXVsdCB2YWx1ZXNcbiAqL1xuXG4vLyBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbmZ1bmN0aW9uIGhvcml6b250YWxPckRlZmF1bHQoaG9yaXpvbnRhbDogP2Jvb2xlYW4pIHtcbiAgcmV0dXJuIGhvcml6b250YWwgPz8gZmFsc2U7XG59XG5cbi8vIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdCh0aGlzLnByb3BzLmluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdClcbmZ1bmN0aW9uIGluaXRpYWxOdW1Ub1JlbmRlck9yRGVmYXVsdChpbml0aWFsTnVtVG9SZW5kZXI6ID9udW1iZXIpIHtcbiAgcmV0dXJuIGluaXRpYWxOdW1Ub1JlbmRlciA/PyAxMDtcbn1cblxuLy8gbWF4VG9SZW5kZXJQZXJCYXRjaE9yRGVmYXVsdCh0aGlzLnByb3BzLm1heFRvUmVuZGVyUGVyQmF0Y2gpXG5mdW5jdGlvbiBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KG1heFRvUmVuZGVyUGVyQmF0Y2g6ID9udW1iZXIpIHtcbiAgcmV0dXJuIG1heFRvUmVuZGVyUGVyQmF0Y2ggPz8gMTA7XG59XG5cbi8vIG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdCh0aGlzLnByb3BzLm9uRW5kUmVhY2hlZFRocmVzaG9sZClcbmZ1bmN0aW9uIG9uRW5kUmVhY2hlZFRocmVzaG9sZE9yRGVmYXVsdChvbkVuZFJlYWNoZWRUaHJlc2hvbGQ6ID9udW1iZXIpIHtcbiAgcmV0dXJuIG9uRW5kUmVhY2hlZFRocmVzaG9sZCA/PyAyO1xufVxuXG4vLyBzY3JvbGxFdmVudFRocm90dGxlT3JEZWZhdWx0KHRoaXMucHJvcHMuc2Nyb2xsRXZlbnRUaHJvdHRsZSlcbmZ1bmN0aW9uIHNjcm9sbEV2ZW50VGhyb3R0bGVPckRlZmF1bHQoc2Nyb2xsRXZlbnRUaHJvdHRsZTogP251bWJlcikge1xuICByZXR1cm4gc2Nyb2xsRXZlbnRUaHJvdHRsZSA/PyA1MDtcbn1cblxuLy8gd2luZG93U2l6ZU9yRGVmYXVsdCh0aGlzLnByb3BzLndpbmRvd1NpemUpXG5mdW5jdGlvbiB3aW5kb3dTaXplT3JEZWZhdWx0KHdpbmRvd1NpemU6ID9udW1iZXIpIHtcbiAgcmV0dXJuIHdpbmRvd1NpemUgPz8gMjE7XG59XG5cbmZ1bmN0aW9uIGZpbmRMYXN0V2hlcmU8VD4oXG4gIGFycjogJFJlYWRPbmx5QXJyYXk8VD4sXG4gIHByZWRpY2F0ZTogKGVsZW1lbnQ6IFQpID0+IGJvb2xlYW4sXG4pOiBUIHwgbnVsbCB7XG4gIGZvciAobGV0IGkgPSBhcnIubGVuZ3RoIC0gMTsgaSA+PSAwOyBpLS0pIHtcbiAgICBpZiAocHJlZGljYXRlKGFycltpXSkpIHtcbiAgICAgIHJldHVybiBhcnJbaV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbi8qKlxuICogQmFzZSBpbXBsZW1lbnRhdGlvbiBmb3IgdGhlIG1vcmUgY29udmVuaWVudCBbYDxGbGF0TGlzdD5gXShodHRwczovL3JlYWN0bmF0aXZlLmRldi9kb2NzL2ZsYXRsaXN0KVxuICogYW5kIFtgPFNlY3Rpb25MaXN0PmBdKGh0dHBzOi8vcmVhY3RuYXRpdmUuZGV2L2RvY3Mvc2VjdGlvbmxpc3QpIGNvbXBvbmVudHMsIHdoaWNoIGFyZSBhbHNvIGJldHRlclxuICogZG9jdW1lbnRlZC4gSW4gZ2VuZXJhbCwgdGhpcyBzaG91bGQgb25seSByZWFsbHkgYmUgdXNlZCBpZiB5b3UgbmVlZCBtb3JlIGZsZXhpYmlsaXR5IHRoYW5cbiAqIGBGbGF0TGlzdGAgcHJvdmlkZXMsIGUuZy4gZm9yIHVzZSB3aXRoIGltbXV0YWJsZSBkYXRhIGluc3RlYWQgb2YgcGxhaW4gYXJyYXlzLlxuICpcbiAqIFZpcnR1YWxpemF0aW9uIG1hc3NpdmVseSBpbXByb3ZlcyBtZW1vcnkgY29uc3VtcHRpb24gYW5kIHBlcmZvcm1hbmNlIG9mIGxhcmdlIGxpc3RzIGJ5XG4gKiBtYWludGFpbmluZyBhIGZpbml0ZSByZW5kZXIgd2luZG93IG9mIGFjdGl2ZSBpdGVtcyBhbmQgcmVwbGFjaW5nIGFsbCBpdGVtcyBvdXRzaWRlIG9mIHRoZSByZW5kZXJcbiAqIHdpbmRvdyB3aXRoIGFwcHJvcHJpYXRlbHkgc2l6ZWQgYmxhbmsgc3BhY2UuIFRoZSB3aW5kb3cgYWRhcHRzIHRvIHNjcm9sbGluZyBiZWhhdmlvciwgYW5kIGl0ZW1zXG4gKiBhcmUgcmVuZGVyZWQgaW5jcmVtZW50YWxseSB3aXRoIGxvdy1wcmkgKGFmdGVyIGFueSBydW5uaW5nIGludGVyYWN0aW9ucykgaWYgdGhleSBhcmUgZmFyIGZyb20gdGhlXG4gKiB2aXNpYmxlIGFyZWEsIG9yIHdpdGggaGktcHJpIG90aGVyd2lzZSB0byBtaW5pbWl6ZSB0aGUgcG90ZW50aWFsIG9mIHNlZWluZyBibGFuayBzcGFjZS5cbiAqXG4gKiBTb21lIGNhdmVhdHM6XG4gKlxuICogLSBJbnRlcm5hbCBzdGF0ZSBpcyBub3QgcHJlc2VydmVkIHdoZW4gY29udGVudCBzY3JvbGxzIG91dCBvZiB0aGUgcmVuZGVyIHdpbmRvdy4gTWFrZSBzdXJlIGFsbFxuICogICB5b3VyIGRhdGEgaXMgY2FwdHVyZWQgaW4gdGhlIGl0ZW0gZGF0YSBvciBleHRlcm5hbCBzdG9yZXMgbGlrZSBGbHV4LCBSZWR1eCwgb3IgUmVsYXkuXG4gKiAtIFRoaXMgaXMgYSBgUHVyZUNvbXBvbmVudGAgd2hpY2ggbWVhbnMgdGhhdCBpdCB3aWxsIG5vdCByZS1yZW5kZXIgaWYgYHByb3BzYCByZW1haW4gc2hhbGxvdy1cbiAqICAgZXF1YWwuIE1ha2Ugc3VyZSB0aGF0IGV2ZXJ5dGhpbmcgeW91ciBgcmVuZGVySXRlbWAgZnVuY3Rpb24gZGVwZW5kcyBvbiBpcyBwYXNzZWQgYXMgYSBwcm9wXG4gKiAgIChlLmcuIGBleHRyYURhdGFgKSB0aGF0IGlzIG5vdCBgPT09YCBhZnRlciB1cGRhdGVzLCBvdGhlcndpc2UgeW91ciBVSSBtYXkgbm90IHVwZGF0ZSBvblxuICogICBjaGFuZ2VzLiBUaGlzIGluY2x1ZGVzIHRoZSBgZGF0YWAgcHJvcCBhbmQgcGFyZW50IGNvbXBvbmVudCBzdGF0ZS5cbiAqIC0gSW4gb3JkZXIgdG8gY29uc3RyYWluIG1lbW9yeSBhbmQgZW5hYmxlIHNtb290aCBzY3JvbGxpbmcsIGNvbnRlbnQgaXMgcmVuZGVyZWQgYXN5bmNocm9ub3VzbHlcbiAqICAgb2Zmc2NyZWVuLiBUaGlzIG1lYW5zIGl0J3MgcG9zc2libGUgdG8gc2Nyb2xsIGZhc3RlciB0aGFuIHRoZSBmaWxsIHJhdGUgYW5kcyBtb21lbnRhcmlseSBzZWVcbiAqICAgYmxhbmsgY29udGVudC4gVGhpcyBpcyBhIHRyYWRlb2ZmIHRoYXQgY2FuIGJlIGFkanVzdGVkIHRvIHN1aXQgdGhlIG5lZWRzIG9mIGVhY2ggYXBwbGljYXRpb24sXG4gKiAgIGFuZCB3ZSBhcmUgd29ya2luZyBvbiBpbXByb3ZpbmcgaXQgYmVoaW5kIHRoZSBzY2VuZXMuXG4gKiAtIEJ5IGRlZmF1bHQsIHRoZSBsaXN0IGxvb2tzIGZvciBhIGBrZXlgIG9yIGBpZGAgcHJvcCBvbiBlYWNoIGl0ZW0gYW5kIHVzZXMgdGhhdCBmb3IgdGhlIFJlYWN0IGtleS5cbiAqICAgQWx0ZXJuYXRpdmVseSwgeW91IGNhbiBwcm92aWRlIGEgY3VzdG9tIGBrZXlFeHRyYWN0b3JgIHByb3AuXG4gKiAtIEFzIGFuIGVmZm9ydCB0byByZW1vdmUgZGVmYXVsdFByb3BzLCB1c2UgaGVscGVyIGZ1bmN0aW9ucyB3aGVuIHJlZmVyZW5jaW5nIGNlcnRhaW4gcHJvcHNcbiAqXG4gKi9cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFZpcnR1YWxpemVkTGlzdCBleHRlbmRzIFN0YXRlU2FmZVB1cmVDb21wb25lbnQ8XG4gIFByb3BzLFxuICBTdGF0ZSxcbj4ge1xuICBzdGF0aWMgY29udGV4dFR5cGU6IHR5cGVvZiBWaXJ0dWFsaXplZExpc3RDb250ZXh0ID0gVmlydHVhbGl6ZWRMaXN0Q29udGV4dDtcblxuICAvLyBzY3JvbGxUb0VuZCBtYXkgYmUgamFua3kgd2l0aG91dCBnZXRJdGVtTGF5b3V0IHByb3BcbiAgc2Nyb2xsVG9FbmQocGFyYW1zPzogP3thbmltYXRlZD86ID9ib29sZWFuLCAuLi59KSB7XG4gICAgY29uc3QgYW5pbWF0ZWQgPSBwYXJhbXMgPyBwYXJhbXMuYW5pbWF0ZWQgOiB0cnVlO1xuICAgIGNvbnN0IHZlcnlMYXN0ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKSAtIDE7XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KHZlcnlMYXN0LCB0aGlzLnByb3BzKTtcbiAgICBjb25zdCBvZmZzZXQgPSBNYXRoLm1heChcbiAgICAgIDAsXG4gICAgICBmcmFtZS5vZmZzZXQgK1xuICAgICAgICBmcmFtZS5sZW5ndGggK1xuICAgICAgICB0aGlzLl9mb290ZXJMZW5ndGggLVxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGgsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8gPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTm8gc2Nyb2xsVG8gbWV0aG9kIHByb3ZpZGVkLiBUaGlzIG1heSBiZSBiZWNhdXNlIHlvdSBoYXZlIHR3byBuZXN0ZWQgJyArXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdHMgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgb3IgYmVjYXVzZSB5b3UgYXJlICcgK1xuICAgICAgICAgICd1c2luZyBhIGN1c3RvbSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgc2Nyb2xsVG8uJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9XG4gICAgICAgIDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICAvLyBzY3JvbGxUb0luZGV4IG1heSBiZSBqYW5reSB3aXRob3V0IGdldEl0ZW1MYXlvdXQgcHJvcFxuICBzY3JvbGxUb0luZGV4KHBhcmFtczoge1xuICAgIGFuaW1hdGVkPzogP2Jvb2xlYW4sXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICB2aWV3T2Zmc2V0PzogbnVtYmVyLFxuICAgIHZpZXdQb3NpdGlvbj86IG51bWJlcixcbiAgICAuLi5cbiAgfSk6ICRGbG93Rml4TWUge1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGEsXG4gICAgICBob3Jpem9udGFsLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCxcbiAgICB9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCB7YW5pbWF0ZWQsIGluZGV4LCB2aWV3T2Zmc2V0LCB2aWV3UG9zaXRpb259ID0gcGFyYW1zO1xuICAgIGludmFyaWFudChcbiAgICAgIGluZGV4ID49IDAsXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IHJlcXVlc3RlZCBpbmRleCAke2luZGV4fSBidXQgbWluaW11bSBpcyAwYCxcbiAgICApO1xuICAgIGludmFyaWFudChcbiAgICAgIGdldEl0ZW1Db3VudChkYXRhKSA+PSAxLFxuICAgICAgYHNjcm9sbFRvSW5kZXggb3V0IG9mIHJhbmdlOiBpdGVtIGxlbmd0aCAke2dldEl0ZW1Db3VudChcbiAgICAgICAgZGF0YSxcbiAgICAgICl9IGJ1dCBtaW5pbXVtIGlzIDFgLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgaW5kZXggPCBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICBgc2Nyb2xsVG9JbmRleCBvdXQgb2YgcmFuZ2U6IHJlcXVlc3RlZCBpbmRleCAke2luZGV4fSBpcyBvdXQgb2YgMCB0byAke1xuICAgICAgICBnZXRJdGVtQ291bnQoZGF0YSkgLSAxXG4gICAgICB9YCxcbiAgICApO1xuICAgIGlmICghZ2V0SXRlbUxheW91dCAmJiBpbmRleCA+IHRoaXMuX2hpZ2hlc3RNZWFzdXJlZEZyYW1lSW5kZXgpIHtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgISFvblNjcm9sbFRvSW5kZXhGYWlsZWQsXG4gICAgICAgICdzY3JvbGxUb0luZGV4IHNob3VsZCBiZSB1c2VkIGluIGNvbmp1bmN0aW9uIHdpdGggZ2V0SXRlbUxheW91dCBvciBvblNjcm9sbFRvSW5kZXhGYWlsZWQsICcgK1xuICAgICAgICAgICdvdGhlcndpc2UgdGhlcmUgaXMgbm8gd2F5IHRvIGtub3cgdGhlIGxvY2F0aW9uIG9mIG9mZnNjcmVlbiBpbmRpY2VzIG9yIGhhbmRsZSBmYWlsdXJlcy4nLFxuICAgICAgKTtcbiAgICAgIG9uU2Nyb2xsVG9JbmRleEZhaWxlZCh7XG4gICAgICAgIGF2ZXJhZ2VJdGVtTGVuZ3RoOiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCxcbiAgICAgICAgaGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleDogdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCxcbiAgICAgICAgaW5kZXgsXG4gICAgICB9KTtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgY29uc3QgZnJhbWUgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KE1hdGguZmxvb3IoaW5kZXgpLCB0aGlzLnByb3BzKTtcbiAgICBjb25zdCBvZmZzZXQgPVxuICAgICAgTWF0aC5tYXgoXG4gICAgICAgIDAsXG4gICAgICAgIHRoaXMuX2dldE9mZnNldEFwcHJveChpbmRleCwgdGhpcy5wcm9wcykgLVxuICAgICAgICAgICh2aWV3UG9zaXRpb24gfHwgMCkgKlxuICAgICAgICAgICAgKHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCAtIGZyYW1lLmxlbmd0aCksXG4gICAgICApIC0gKHZpZXdPZmZzZXQgfHwgMCk7XG5cbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmID09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvID09IG51bGwpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgJ05vIHNjcm9sbFRvIG1ldGhvZCBwcm92aWRlZC4gVGhpcyBtYXkgYmUgYmVjYXVzZSB5b3UgaGF2ZSB0d28gbmVzdGVkICcgK1xuICAgICAgICAgICdWaXJ0dWFsaXplZExpc3RzIHdpdGggdGhlIHNhbWUgb3JpZW50YXRpb24sIG9yIGJlY2F1c2UgeW91IGFyZSAnICtcbiAgICAgICAgICAndXNpbmcgYSBjdXN0b20gY29tcG9uZW50IHRoYXQgZG9lcyBub3QgaW1wbGVtZW50IHNjcm9sbFRvLicsXG4gICAgICApO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3Njcm9sbFJlZi5zY3JvbGxUbyhcbiAgICAgIGhvcml6b250YWwgPyB7eDogb2Zmc2V0LCBhbmltYXRlZH0gOiB7eTogb2Zmc2V0LCBhbmltYXRlZH0sXG4gICAgKTtcbiAgfVxuXG4gIC8vIHNjcm9sbFRvSXRlbSBtYXkgYmUgamFua3kgd2l0aG91dCBnZXRJdGVtTGF5b3V0IHByb3AuIFJlcXVpcmVkIGxpbmVhciBzY2FuIHRocm91Z2ggaXRlbXMgLVxuICAvLyB1c2Ugc2Nyb2xsVG9JbmRleCBpbnN0ZWFkIGlmIHBvc3NpYmxlLlxuICBzY3JvbGxUb0l0ZW0ocGFyYW1zOiB7XG4gICAgYW5pbWF0ZWQ/OiA/Ym9vbGVhbixcbiAgICBpdGVtOiBJdGVtLFxuICAgIHZpZXdPZmZzZXQ/OiBudW1iZXIsXG4gICAgdmlld1Bvc2l0aW9uPzogbnVtYmVyLFxuICAgIC4uLlxuICB9KSB7XG4gICAgY29uc3Qge2l0ZW19ID0gcGFyYW1zO1xuICAgIGNvbnN0IHtkYXRhLCBnZXRJdGVtLCBnZXRJdGVtQ291bnR9ID0gdGhpcy5wcm9wcztcbiAgICBjb25zdCBpdGVtQ291bnQgPSBnZXRJdGVtQ291bnQoZGF0YSk7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGl0ZW1Db3VudDsgaW5kZXgrKykge1xuICAgICAgaWYgKGdldEl0ZW0oZGF0YSwgaW5kZXgpID09PSBpdGVtKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7Li4ucGFyYW1zLCBpbmRleH0pO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogU2Nyb2xsIHRvIGEgc3BlY2lmaWMgY29udGVudCBwaXhlbCBvZmZzZXQgaW4gdGhlIGxpc3QuXG4gICAqXG4gICAqIFBhcmFtIGBvZmZzZXRgIGV4cGVjdHMgdGhlIG9mZnNldCB0byBzY3JvbGwgdG8uXG4gICAqIEluIGNhc2Ugb2YgYGhvcml6b250YWxgIGlzIHRydWUsIHRoZSBvZmZzZXQgaXMgdGhlIHgtdmFsdWUsXG4gICAqIGluIGFueSBvdGhlciBjYXNlIHRoZSBvZmZzZXQgaXMgdGhlIHktdmFsdWUuXG4gICAqXG4gICAqIFBhcmFtIGBhbmltYXRlZGAgKGB0cnVlYCBieSBkZWZhdWx0KSBkZWZpbmVzIHdoZXRoZXIgdGhlIGxpc3RcbiAgICogc2hvdWxkIGRvIGFuIGFuaW1hdGlvbiB3aGlsZSBzY3JvbGxpbmcuXG4gICAqL1xuICBzY3JvbGxUb09mZnNldChwYXJhbXM6IHthbmltYXRlZD86ID9ib29sZWFuLCBvZmZzZXQ6IG51bWJlciwgLi4ufSkge1xuICAgIGNvbnN0IHthbmltYXRlZCwgb2Zmc2V0fSA9IHBhcmFtcztcblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYuc2Nyb2xsVG8gPT0gbnVsbCkge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnTm8gc2Nyb2xsVG8gbWV0aG9kIHByb3ZpZGVkLiBUaGlzIG1heSBiZSBiZWNhdXNlIHlvdSBoYXZlIHR3byBuZXN0ZWQgJyArXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdHMgd2l0aCB0aGUgc2FtZSBvcmllbnRhdGlvbiwgb3IgYmVjYXVzZSB5b3UgYXJlICcgK1xuICAgICAgICAgICd1c2luZyBhIGN1c3RvbSBjb21wb25lbnQgdGhhdCBkb2VzIG5vdCBpbXBsZW1lbnQgc2Nyb2xsVG8uJyxcbiAgICAgICk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5fc2Nyb2xsUmVmLnNjcm9sbFRvKFxuICAgICAgaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgICAgID8ge3g6IG9mZnNldCwgYW5pbWF0ZWR9XG4gICAgICAgIDoge3k6IG9mZnNldCwgYW5pbWF0ZWR9LFxuICAgICk7XG4gIH1cblxuICByZWNvcmRJbnRlcmFjdGlvbigpIHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godCA9PiB7XG4gICAgICB0LnZpZXdhYmlsaXR5SGVscGVyLnJlY29yZEludGVyYWN0aW9uKCk7XG4gICAgfSk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyh0aGlzLnByb3BzLCB0aGlzLnN0YXRlLmNlbGxzQXJvdW5kVmlld3BvcnQpO1xuICB9XG5cbiAgZmxhc2hTY3JvbGxJbmRpY2F0b3JzKCkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHRoaXMuX3Njcm9sbFJlZi5mbGFzaFNjcm9sbEluZGljYXRvcnMoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBQcm92aWRlcyBhIGhhbmRsZSB0byB0aGUgdW5kZXJseWluZyBzY3JvbGwgcmVzcG9uZGVyLlxuICAgKiBOb3RlIHRoYXQgYHRoaXMuX3Njcm9sbFJlZmAgbWlnaHQgbm90IGJlIGEgYFNjcm9sbFZpZXdgLCBzbyB3ZVxuICAgKiBuZWVkIHRvIGNoZWNrIHRoYXQgaXQgcmVzcG9uZHMgdG8gYGdldFNjcm9sbFJlc3BvbmRlcmAgYmVmb3JlIGNhbGxpbmcgaXQuXG4gICAqL1xuICBnZXRTY3JvbGxSZXNwb25kZXIoKTogP1Njcm9sbFJlc3BvbmRlclR5cGUge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYgJiYgdGhpcy5fc2Nyb2xsUmVmLmdldFNjcm9sbFJlc3BvbmRlcikge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZXNwb25kZXIoKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxhYmxlTm9kZSgpOiA/bnVtYmVyIHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmICYmIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxhYmxlTm9kZSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxhYmxlTm9kZSgpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gZmluZE5vZGVIYW5kbGUodGhpcy5fc2Nyb2xsUmVmKTtcbiAgICB9XG4gIH1cblxuICBnZXRTY3JvbGxSZWYoKTpcbiAgICB8ID9SZWFjdC5FbGVtZW50UmVmPHR5cGVvZiBTY3JvbGxWaWV3PlxuICAgIHwgP1JlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpZXc+IHtcbiAgICBpZiAodGhpcy5fc2Nyb2xsUmVmICYmIHRoaXMuX3Njcm9sbFJlZi5nZXRTY3JvbGxSZWYpIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxSZWYuZ2V0U2Nyb2xsUmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzLl9zY3JvbGxSZWY7XG4gICAgfVxuICB9XG5cbiAgc2V0TmF0aXZlUHJvcHMocHJvcHM6IE9iamVjdCkge1xuICAgIGlmICh0aGlzLl9zY3JvbGxSZWYpIHtcbiAgICAgIHRoaXMuX3Njcm9sbFJlZi5zZXROYXRpdmVQcm9wcyhwcm9wcyk7XG4gICAgfVxuICB9XG5cbiAgX2dldENlbGxLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gdGhpcy5jb250ZXh0Py5jZWxsS2V5IHx8ICdyb290TGlzdCc7XG4gIH1cblxuICAvLyAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdXG4gIF9nZXRTY3JvbGxNZXRyaWNzID0gKCkgPT4ge1xuICAgIHJldHVybiB0aGlzLl9zY3JvbGxNZXRyaWNzO1xuICB9O1xuXG4gIGhhc01vcmUoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuX2hhc01vcmU7XG4gIH1cblxuICAvLyAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdXG4gIF9nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmID0gKCkgPT4ge1xuICAgIGlmICh0aGlzLl9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY29udGV4dC5nZXRPdXRlcm1vc3RQYXJlbnRMaXN0UmVmKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgfTtcblxuICBfcmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIGNlbGxLZXk6IHN0cmluZyxcbiAgICByZWY6IFJlYWN0LkVsZW1lbnRSZWY8dHlwZW9mIFZpcnR1YWxpemVkTGlzdD4sXG4gIH0pOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmFkZChjaGlsZExpc3QucmVmLCBjaGlsZExpc3QuY2VsbEtleSk7XG4gICAgaWYgKHRoaXMuX2hhc0ludGVyYWN0ZWQpIHtcbiAgICAgIGNoaWxkTGlzdC5yZWYucmVjb3JkSW50ZXJhY3Rpb24oKTtcbiAgICB9XG4gIH07XG5cbiAgX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkID0gKGNoaWxkTGlzdDoge1xuICAgIHJlZjogUmVhY3QuRWxlbWVudFJlZjx0eXBlb2YgVmlydHVhbGl6ZWRMaXN0PixcbiAgfSk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMucmVtb3ZlKGNoaWxkTGlzdC5yZWYpO1xuICB9O1xuXG4gIHN0YXRlOiBTdGF0ZTtcblxuICBjb25zdHJ1Y3Rvcihwcm9wczogUHJvcHMpIHtcbiAgICBzdXBlcihwcm9wcyk7XG4gICAgaW52YXJpYW50KFxuICAgICAgLy8gJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddXG4gICAgICAhcHJvcHMub25TY3JvbGwgfHwgIXByb3BzLm9uU2Nyb2xsLl9faXNOYXRpdmUsXG4gICAgICAnQ29tcG9uZW50cyBiYXNlZCBvbiBWaXJ0dWFsaXplZExpc3QgbXVzdCBiZSB3cmFwcGVkIHdpdGggQW5pbWF0ZWQuY3JlYXRlQW5pbWF0ZWRDb21wb25lbnQgJyArXG4gICAgICAgICd0byBzdXBwb3J0IG5hdGl2ZSBvblNjcm9sbCBldmVudHMgd2l0aCB1c2VOYXRpdmVEcml2ZXInLFxuICAgICk7XG4gICAgaW52YXJpYW50KFxuICAgICAgd2luZG93U2l6ZU9yRGVmYXVsdChwcm9wcy53aW5kb3dTaXplKSA+IDAsXG4gICAgICAnVmlydHVhbGl6ZWRMaXN0OiBUaGUgd2luZG93U2l6ZSBwcm9wIG11c3QgYmUgcHJlc2VudCBhbmQgc2V0IHRvIGEgdmFsdWUgZ3JlYXRlciB0aGFuIDAuJyxcbiAgICApO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgcHJvcHMuZ2V0SXRlbUNvdW50LFxuICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogVGhlIFwiZ2V0SXRlbUNvdW50XCIgcHJvcCBtdXN0IGJlIHByb3ZpZGVkJyxcbiAgICApO1xuXG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIgPSBuZXcgRmlsbFJhdGVIZWxwZXIodGhpcy5fZ2V0RnJhbWVNZXRyaWNzKTtcbiAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlciA9IG5ldyBCYXRjaGluYXRvcihcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXIsXG4gICAgICB0aGlzLnByb3BzLnVwZGF0ZUNlbGxzQmF0Y2hpbmdQZXJpb2QgPz8gNTAsXG4gICAgKTtcblxuICAgIGlmICh0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycykge1xuICAgICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMgPSB0aGlzLnByb3BzLnZpZXdhYmlsaXR5Q29uZmlnQ2FsbGJhY2tQYWlycy5tYXAoXG4gICAgICAgIHBhaXIgPT4gKHtcbiAgICAgICAgICB2aWV3YWJpbGl0eUhlbHBlcjogbmV3IFZpZXdhYmlsaXR5SGVscGVyKHBhaXIudmlld2FiaWxpdHlDb25maWcpLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IHBhaXIub25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB7b25WaWV3YWJsZUl0ZW1zQ2hhbmdlZCwgdmlld2FiaWxpdHlDb25maWd9ID0gdGhpcy5wcm9wcztcbiAgICAgIGlmIChvblZpZXdhYmxlSXRlbXNDaGFuZ2VkKSB7XG4gICAgICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLnB1c2goe1xuICAgICAgICAgIHZpZXdhYmlsaXR5SGVscGVyOiBuZXcgVmlld2FiaWxpdHlIZWxwZXIodmlld2FiaWxpdHlDb25maWcpLFxuICAgICAgICAgIG9uVmlld2FibGVJdGVtc0NoYW5nZWQ6IG9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgIH0pO1xuICAgICAgfVxuICAgIH1cblxuICAgIGludmFyaWFudChcbiAgICAgICF0aGlzLmNvbnRleHQsXG4gICAgICAnVW5leHBlY3RlZGx5IHNhdyBWaXJ0dWFsaXplZExpc3RDb250ZXh0IGF2YWlsYWJsZSBpbiBjdG9yJyxcbiAgICApO1xuXG4gICAgY29uc3QgaW5pdGlhbFJlbmRlclJlZ2lvbiA9IFZpcnR1YWxpemVkTGlzdC5faW5pdGlhbFJlbmRlclJlZ2lvbihwcm9wcyk7XG5cbiAgICB0aGlzLnN0YXRlID0ge1xuICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydDogaW5pdGlhbFJlbmRlclJlZ2lvbixcbiAgICAgIHJlbmRlck1hc2s6IFZpcnR1YWxpemVkTGlzdC5fY3JlYXRlUmVuZGVyTWFzayhwcm9wcywgaW5pdGlhbFJlbmRlclJlZ2lvbiksXG4gICAgfTtcbiAgfVxuXG4gIHN0YXRpYyBfY3JlYXRlUmVuZGVyTWFzayhcbiAgICBwcm9wczogUHJvcHMsXG4gICAgY2VsbHNBcm91bmRWaWV3cG9ydDoge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn0sXG4gICAgYWRkaXRpb25hbFJlZ2lvbnM/OiA/JFJlYWRPbmx5QXJyYXk8e2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn0+LFxuICApOiBDZWxsUmVuZGVyTWFzayB7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpO1xuXG4gICAgaW52YXJpYW50KFxuICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCA+PSAwICYmXG4gICAgICAgIGNlbGxzQXJvdW5kVmlld3BvcnQubGFzdCA+PSBjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0IC0gMSAmJlxuICAgICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgPCBpdGVtQ291bnQsXG4gICAgICBgSW52YWxpZCBjZWxscyBhcm91bmQgdmlld3BvcnQgXCJbJHtjZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0fSwgJHtjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3R9XVwiIHdhcyBwYXNzZWQgdG8gVmlydHVhbGl6ZWRMaXN0Ll9jcmVhdGVSZW5kZXJNYXNrYCxcbiAgICApO1xuXG4gICAgY29uc3QgcmVuZGVyTWFzayA9IG5ldyBDZWxsUmVuZGVyTWFzayhpdGVtQ291bnQpO1xuXG4gICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgIGNvbnN0IGFsbFJlZ2lvbnMgPSBbY2VsbHNBcm91bmRWaWV3cG9ydCwgLi4uKGFkZGl0aW9uYWxSZWdpb25zID8/IFtdKV07XG4gICAgICBmb3IgKGNvbnN0IHJlZ2lvbiBvZiBhbGxSZWdpb25zKSB7XG4gICAgICAgIHJlbmRlck1hc2suYWRkQ2VsbHMocmVnaW9uKTtcbiAgICAgIH1cblxuICAgICAgLy8gVGhlIGluaXRpYWxseSByZW5kZXJlZCBjZWxscyBhcmUgcmV0YWluZWQgYXMgcGFydCBvZiB0aGVcbiAgICAgIC8vIFwic2Nyb2xsLXRvLXRvcFwiIG9wdGltaXphdGlvblxuICAgICAgaWYgKHByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA9PSBudWxsIHx8IHByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA8PSAwKSB7XG4gICAgICAgIGNvbnN0IGluaXRpYWxSZWdpb24gPSBWaXJ0dWFsaXplZExpc3QuX2luaXRpYWxSZW5kZXJSZWdpb24ocHJvcHMpO1xuICAgICAgICByZW5kZXJNYXNrLmFkZENlbGxzKGluaXRpYWxSZWdpb24pO1xuICAgICAgfVxuXG4gICAgICAvLyBUaGUgbGF5b3V0IGNvb3JkaW5hdGVzIG9mIHN0aWNrZXIgaGVhZGVycyBtYXkgYmUgb2ZmLXNjcmVlbiB3aGlsZSB0aGVcbiAgICAgIC8vIGFjdHVhbCBoZWFkZXIgaXMgb24tc2NyZWVuLiBLZWVwIHRoZSBtb3N0IHJlY2VudCBiZWZvcmUgdGhlIHZpZXdwb3J0XG4gICAgICAvLyByZW5kZXJlZCwgZXZlbiBpZiBpdHMgbGF5b3V0IGNvb3JkaW5hdGVzIGFyZSBub3QgaW4gdmlld3BvcnQuXG4gICAgICBjb25zdCBzdGlja3lJbmRpY2VzU2V0ID0gbmV3IFNldChwcm9wcy5zdGlja3lIZWFkZXJJbmRpY2VzKTtcbiAgICAgIFZpcnR1YWxpemVkTGlzdC5fZW5zdXJlQ2xvc2VzdFN0aWNreUhlYWRlcihcbiAgICAgICAgcHJvcHMsXG4gICAgICAgIHN0aWNreUluZGljZXNTZXQsXG4gICAgICAgIHJlbmRlck1hc2ssXG4gICAgICAgIGNlbGxzQXJvdW5kVmlld3BvcnQuZmlyc3QsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiByZW5kZXJNYXNrO1xuICB9XG5cbiAgc3RhdGljIF9pbml0aWFsUmVuZGVyUmVnaW9uKHByb3BzOiBQcm9wcyk6IHtmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXJ9IHtcbiAgICBjb25zdCBpdGVtQ291bnQgPSBwcm9wcy5nZXRJdGVtQ291bnQocHJvcHMuZGF0YSk7XG4gICAgY29uc3Qgc2Nyb2xsSW5kZXggPSBNYXRoLmZsb29yKE1hdGgubWF4KDAsIHByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA/PyAwKSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgZmlyc3Q6IHNjcm9sbEluZGV4LFxuICAgICAgbGFzdDpcbiAgICAgICAgTWF0aC5taW4oXG4gICAgICAgICAgaXRlbUNvdW50LFxuICAgICAgICAgIHNjcm9sbEluZGV4ICsgaW5pdGlhbE51bVRvUmVuZGVyT3JEZWZhdWx0KHByb3BzLmluaXRpYWxOdW1Ub1JlbmRlciksXG4gICAgICAgICkgLSAxLFxuICAgIH07XG4gIH1cblxuICBzdGF0aWMgX2Vuc3VyZUNsb3Nlc3RTdGlja3lIZWFkZXIoXG4gICAgcHJvcHM6IFByb3BzLFxuICAgIHN0aWNreUluZGljZXNTZXQ6IFNldDxudW1iZXI+LFxuICAgIHJlbmRlck1hc2s6IENlbGxSZW5kZXJNYXNrLFxuICAgIGNlbGxJZHg6IG51bWJlcixcbiAgKSB7XG4gICAgY29uc3Qgc3RpY2t5T2Zmc2V0ID0gcHJvcHMuTGlzdEhlYWRlckNvbXBvbmVudCA/IDEgOiAwO1xuXG4gICAgZm9yIChsZXQgaXRlbUlkeCA9IGNlbGxJZHggLSAxOyBpdGVtSWR4ID49IDA7IGl0ZW1JZHgtLSkge1xuICAgICAgaWYgKHN0aWNreUluZGljZXNTZXQuaGFzKGl0ZW1JZHggKyBzdGlja3lPZmZzZXQpKSB7XG4gICAgICAgIHJlbmRlck1hc2suYWRkQ2VsbHMoe2ZpcnN0OiBpdGVtSWR4LCBsYXN0OiBpdGVtSWR4fSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIF9hZGp1c3RDZWxsc0Fyb3VuZFZpZXdwb3J0KFxuICAgIHByb3BzOiBQcm9wcyxcbiAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0OiB7Zmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyfSxcbiAgKToge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn0ge1xuICAgIGNvbnN0IHtkYXRhLCBnZXRJdGVtQ291bnR9ID0gcHJvcHM7XG4gICAgY29uc3Qgb25FbmRSZWFjaGVkVGhyZXNob2xkID0gb25FbmRSZWFjaGVkVGhyZXNob2xkT3JEZWZhdWx0KFxuICAgICAgcHJvcHMub25FbmRSZWFjaGVkVGhyZXNob2xkLFxuICAgICk7XG4gICAgdGhpcy5fdXBkYXRlVmlld2FibGVJdGVtcyhwcm9wcywgY2VsbHNBcm91bmRWaWV3cG9ydCk7XG5cbiAgICBjb25zdCB7Y29udGVudExlbmd0aCwgb2Zmc2V0LCB2aXNpYmxlTGVuZ3RofSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgY29uc3QgZGlzdGFuY2VGcm9tRW5kID0gY29udGVudExlbmd0aCAtIHZpc2libGVMZW5ndGggLSBvZmZzZXQ7XG5cbiAgICAvLyBXYWl0IHVudGlsIHRoZSBzY3JvbGwgdmlldyBtZXRyaWNzIGhhdmUgYmVlbiBzZXQgdXAuIEFuZCB1bnRpbCB0aGVuLFxuICAgIC8vIHdlIHdpbGwgdHJ1c3QgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciBzdWdnZXN0aW9uXG4gICAgaWYgKHZpc2libGVMZW5ndGggPD0gMCB8fCBjb250ZW50TGVuZ3RoIDw9IDApIHtcbiAgICAgIHJldHVybiBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgPj0gZ2V0SXRlbUNvdW50KGRhdGEpXG4gICAgICAgID8gVmlydHVhbGl6ZWRMaXN0Ll9jb25zdHJhaW5Ub0l0ZW1Db3VudChjZWxsc0Fyb3VuZFZpZXdwb3J0LCBwcm9wcylcbiAgICAgICAgOiBjZWxsc0Fyb3VuZFZpZXdwb3J0O1xuICAgIH1cblxuICAgIGxldCBuZXdDZWxsc0Fyb3VuZFZpZXdwb3J0OiB7Zmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyfTtcbiAgICBpZiAocHJvcHMuZGlzYWJsZVZpcnR1YWxpemF0aW9uKSB7XG4gICAgICBjb25zdCByZW5kZXJBaGVhZCA9XG4gICAgICAgIGRpc3RhbmNlRnJvbUVuZCA8IG9uRW5kUmVhY2hlZFRocmVzaG9sZCAqIHZpc2libGVMZW5ndGhcbiAgICAgICAgICA/IG1heFRvUmVuZGVyUGVyQmF0Y2hPckRlZmF1bHQocHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaClcbiAgICAgICAgICA6IDA7XG5cbiAgICAgIG5ld0NlbGxzQXJvdW5kVmlld3BvcnQgPSB7XG4gICAgICAgIGZpcnN0OiAwLFxuICAgICAgICBsYXN0OiBNYXRoLm1pbihcbiAgICAgICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgKyByZW5kZXJBaGVhZCxcbiAgICAgICAgICBnZXRJdGVtQ291bnQoZGF0YSkgLSAxLFxuICAgICAgICApLFxuICAgICAgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gSWYgd2UgaGF2ZSBhIG5vbi16ZXJvIGluaXRpYWxTY3JvbGxJbmRleCBhbmQgcnVuIHRoaXMgYmVmb3JlIHdlJ3ZlIHNjcm9sbGVkLFxuICAgICAgLy8gd2UnbGwgd2lwZSBvdXQgdGhlIGluaXRpYWxOdW1Ub1JlbmRlciByZW5kZXJlZCBlbGVtZW50cyBzdGFydGluZyBhdCBpbml0aWFsU2Nyb2xsSW5kZXguXG4gICAgICAvLyBTbyBsZXQncyB3YWl0IHVudGlsIHdlJ3ZlIHNjcm9sbGVkIHRoZSB2aWV3IHRvIHRoZSByaWdodCBwbGFjZS4gQW5kIHVudGlsIHRoZW4sXG4gICAgICAvLyB3ZSB3aWxsIHRydXN0IHRoZSBpbml0aWFsU2Nyb2xsSW5kZXggc3VnZ2VzdGlvbi5cblxuICAgICAgLy8gVGh1cywgd2Ugd2FudCB0byByZWNhbGN1bGF0ZSB0aGUgd2luZG93ZWQgcmVuZGVyIGxpbWl0cyBpZiBhbnkgb2YgdGhlIGZvbGxvd2luZyBob2xkOlxuICAgICAgLy8gLSBpbml0aWFsU2Nyb2xsSW5kZXggaXMgdW5kZWZpbmVkIG9yIGlzIDBcbiAgICAgIC8vIC0gaW5pdGlhbFNjcm9sbEluZGV4ID4gMCBBTkQgc2Nyb2xsaW5nIGlzIGNvbXBsZXRlXG4gICAgICAvLyAtIGluaXRpYWxTY3JvbGxJbmRleCA+IDAgQU5EIHRoZSBlbmQgb2YgdGhlIGxpc3QgaXMgdmlzaWJsZSAodGhpcyBoYW5kbGVzIHRoZSBjYXNlXG4gICAgICAvLyAgIHdoZXJlIHRoZSBsaXN0IGlzIHNob3J0ZXIgdGhhbiB0aGUgdmlzaWJsZSBhcmVhKVxuICAgICAgaWYgKFxuICAgICAgICBwcm9wcy5pbml0aWFsU2Nyb2xsSW5kZXggJiZcbiAgICAgICAgIXRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0ICYmXG4gICAgICAgIE1hdGguYWJzKGRpc3RhbmNlRnJvbUVuZCkgPj0gTnVtYmVyLkVQU0lMT05cbiAgICAgICkge1xuICAgICAgICByZXR1cm4gY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0ID49IGdldEl0ZW1Db3VudChkYXRhKVxuICAgICAgICAgID8gVmlydHVhbGl6ZWRMaXN0Ll9jb25zdHJhaW5Ub0l0ZW1Db3VudChjZWxsc0Fyb3VuZFZpZXdwb3J0LCBwcm9wcylcbiAgICAgICAgICA6IGNlbGxzQXJvdW5kVmlld3BvcnQ7XG4gICAgICB9XG5cbiAgICAgIG5ld0NlbGxzQXJvdW5kVmlld3BvcnQgPSBjb21wdXRlV2luZG93ZWRSZW5kZXJMaW1pdHMoXG4gICAgICAgIHByb3BzLFxuICAgICAgICBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KHByb3BzLm1heFRvUmVuZGVyUGVyQmF0Y2gpLFxuICAgICAgICB3aW5kb3dTaXplT3JEZWZhdWx0KHByb3BzLndpbmRvd1NpemUpLFxuICAgICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0LFxuICAgICAgICB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94LFxuICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLFxuICAgICAgKTtcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgbmV3Q2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0IDwgZ2V0SXRlbUNvdW50KGRhdGEpLFxuICAgICAgICAnY29tcHV0ZVdpbmRvd2VkUmVuZGVyTGltaXRzKCkgc2hvdWxkIHJldHVybiByYW5nZSBpbi1ib3VuZHMnLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5zaXplKCkgPiAwKSB7XG4gICAgICAvLyBJZiBzb21lIGNlbGwgaW4gdGhlIG5ldyBzdGF0ZSBoYXMgYSBjaGlsZCBsaXN0IGluIGl0LCB3ZSBzaG91bGQgb25seSByZW5kZXJcbiAgICAgIC8vIHVwIHRocm91Z2ggdGhhdCBpdGVtLCBzbyB0aGF0IHdlIGdpdmUgdGhhdCBsaXN0IGEgY2hhbmNlIHRvIHJlbmRlci5cbiAgICAgIC8vIE90aGVyd2lzZSB0aGVyZSdzIGNodXJuIGZyb20gbXVsdGlwbGUgY2hpbGQgbGlzdHMgbW91bnRpbmcgYW5kIHVuLW1vdW50aW5nXG4gICAgICAvLyB0aGVpciBpdGVtcy5cblxuICAgICAgLy8gV2lsbCB0aGlzIHByZXZlbnQgcmVuZGVyaW5nIGlmIHRoZSBuZXN0ZWQgbGlzdCBkb2Vzbid0IHJlYWxpemUgdGhlIGVuZD9cbiAgICAgIGNvbnN0IGNoaWxkSWR4ID0gdGhpcy5fZmluZEZpcnN0Q2hpbGRXaXRoTW9yZShcbiAgICAgICAgbmV3Q2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCxcbiAgICAgICAgbmV3Q2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0LFxuICAgICAgKTtcblxuICAgICAgbmV3Q2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0ID0gY2hpbGRJZHggPz8gbmV3Q2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0O1xuICAgIH1cblxuICAgIHJldHVybiBuZXdDZWxsc0Fyb3VuZFZpZXdwb3J0O1xuICB9XG5cbiAgX2ZpbmRGaXJzdENoaWxkV2l0aE1vcmUoZmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyKTogbnVtYmVyIHwgbnVsbCB7XG4gICAgZm9yIChsZXQgaWkgPSBmaXJzdDsgaWkgPD0gbGFzdDsgaWkrKykge1xuICAgICAgY29uc3QgY2VsbEtleUZvckluZGV4ID0gdGhpcy5faW5kaWNlc1RvS2V5cy5nZXQoaWkpO1xuICAgICAgaWYgKFxuICAgICAgICBjZWxsS2V5Rm9ySW5kZXggIT0gbnVsbCAmJlxuICAgICAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmFueUluQ2VsbChjZWxsS2V5Rm9ySW5kZXgsIGNoaWxkTGlzdCA9PlxuICAgICAgICAgIGNoaWxkTGlzdC5oYXNNb3JlKCksXG4gICAgICAgIClcbiAgICAgICkge1xuICAgICAgICByZXR1cm4gaWk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBjb21wb25lbnREaWRNb3VudCgpIHtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIHRoaXMuY29udGV4dC5yZWdpc3RlckFzTmVzdGVkQ2hpbGQoe1xuICAgICAgICByZWY6IHRoaXMsXG4gICAgICAgIGNlbGxLZXk6IHRoaXMuY29udGV4dC5jZWxsS2V5LFxuICAgICAgfSk7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50V2lsbFVubW91bnQoKSB7XG4gICAgaWYgKHRoaXMuX2lzTmVzdGVkV2l0aFNhbWVPcmllbnRhdGlvbigpKSB7XG4gICAgICB0aGlzLmNvbnRleHQudW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQoe3JlZjogdGhpc30pO1xuICAgIH1cbiAgICB0aGlzLl91cGRhdGVDZWxsc1RvUmVuZGVyQmF0Y2hlci5kaXNwb3NlKHthYm9ydDogdHJ1ZX0pO1xuICAgIHRoaXMuX3ZpZXdhYmlsaXR5VHVwbGVzLmZvckVhY2godHVwbGUgPT4ge1xuICAgICAgdHVwbGUudmlld2FiaWxpdHlIZWxwZXIuZGlzcG9zZSgpO1xuICAgIH0pO1xuICAgIHRoaXMuX2ZpbGxSYXRlSGVscGVyLmRlYWN0aXZhdGVBbmRGbHVzaCgpO1xuICB9XG5cbiAgc3RhdGljIGdldERlcml2ZWRTdGF0ZUZyb21Qcm9wcyhuZXdQcm9wczogUHJvcHMsIHByZXZTdGF0ZTogU3RhdGUpOiBTdGF0ZSB7XG4gICAgLy8gZmlyc3QgYW5kIGxhc3QgY291bGQgYmUgc3RhbGUgKGUuZy4gaWYgYSBuZXcsIHNob3J0ZXIgaXRlbXMgcHJvcHMgaXMgcGFzc2VkIGluKSwgc28gd2UgbWFrZVxuICAgIC8vIHN1cmUgd2UncmUgcmVuZGVyaW5nIGEgcmVhc29uYWJsZSByYW5nZSBoZXJlLlxuICAgIGNvbnN0IGl0ZW1Db3VudCA9IG5ld1Byb3BzLmdldEl0ZW1Db3VudChuZXdQcm9wcy5kYXRhKTtcbiAgICBpZiAoaXRlbUNvdW50ID09PSBwcmV2U3RhdGUucmVuZGVyTWFzay5udW1DZWxscygpKSB7XG4gICAgICByZXR1cm4gcHJldlN0YXRlO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnN0cmFpbmVkQ2VsbHMgPSBWaXJ0dWFsaXplZExpc3QuX2NvbnN0cmFpblRvSXRlbUNvdW50KFxuICAgICAgcHJldlN0YXRlLmNlbGxzQXJvdW5kVmlld3BvcnQsXG4gICAgICBuZXdQcm9wcyxcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGNlbGxzQXJvdW5kVmlld3BvcnQ6IGNvbnN0cmFpbmVkQ2VsbHMsXG4gICAgICByZW5kZXJNYXNrOiBWaXJ0dWFsaXplZExpc3QuX2NyZWF0ZVJlbmRlck1hc2sobmV3UHJvcHMsIGNvbnN0cmFpbmVkQ2VsbHMpLFxuICAgIH07XG4gIH1cblxuICBfcHVzaENlbGxzKFxuICAgIGNlbGxzOiBBcnJheTxPYmplY3Q+LFxuICAgIHN0aWNreUhlYWRlckluZGljZXM6IEFycmF5PG51bWJlcj4sXG4gICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wczogU2V0PG51bWJlcj4sXG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gICAgaW52ZXJzaW9uU3R5bGU6IFZpZXdTdHlsZVByb3AsXG4gICkge1xuICAgIGNvbnN0IHtcbiAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudCxcbiAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQsXG4gICAgICBMaXN0SGVhZGVyQ29tcG9uZW50LFxuICAgICAgTGlzdEl0ZW1Db21wb25lbnQsXG4gICAgICBkYXRhLFxuICAgICAgZGVidWcsXG4gICAgICBnZXRJdGVtLFxuICAgICAgZ2V0SXRlbUNvdW50LFxuICAgICAgZ2V0SXRlbUxheW91dCxcbiAgICAgIGhvcml6b250YWwsXG4gICAgICByZW5kZXJJdGVtLFxuICAgIH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IHN0aWNreU9mZnNldCA9IExpc3RIZWFkZXJDb21wb25lbnQgPyAxIDogMDtcbiAgICBjb25zdCBlbmQgPSBnZXRJdGVtQ291bnQoZGF0YSkgLSAxO1xuICAgIGxldCBwcmV2Q2VsbEtleTtcbiAgICBsYXN0ID0gTWF0aC5taW4oZW5kLCBsYXN0KTtcbiAgICBmb3IgKGxldCBpaSA9IGZpcnN0OyBpaSA8PSBsYXN0OyBpaSsrKSB7XG4gICAgICBjb25zdCBpdGVtID0gZ2V0SXRlbShkYXRhLCBpaSk7XG4gICAgICBjb25zdCBrZXkgPSB0aGlzLl9rZXlFeHRyYWN0b3IoaXRlbSwgaWksIHRoaXMucHJvcHMpO1xuICAgICAgdGhpcy5faW5kaWNlc1RvS2V5cy5zZXQoaWksIGtleSk7XG4gICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoaWkgKyBzdGlja3lPZmZzZXQpKSB7XG4gICAgICAgIHN0aWNreUhlYWRlckluZGljZXMucHVzaChjZWxscy5sZW5ndGgpO1xuICAgICAgfVxuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgPENlbGxSZW5kZXJlclxuICAgICAgICAgIENlbGxSZW5kZXJlckNvbXBvbmVudD17Q2VsbFJlbmRlcmVyQ29tcG9uZW50fVxuICAgICAgICAgIEl0ZW1TZXBhcmF0b3JDb21wb25lbnQ9e2lpIDwgZW5kID8gSXRlbVNlcGFyYXRvckNvbXBvbmVudCA6IHVuZGVmaW5lZH1cbiAgICAgICAgICBMaXN0SXRlbUNvbXBvbmVudD17TGlzdEl0ZW1Db21wb25lbnR9XG4gICAgICAgICAgY2VsbEtleT17a2V5fVxuICAgICAgICAgIGRlYnVnPXtkZWJ1Z31cbiAgICAgICAgICBmaWxsUmF0ZUhlbHBlcj17dGhpcy5fZmlsbFJhdGVIZWxwZXJ9XG4gICAgICAgICAgZ2V0SXRlbUxheW91dD17Z2V0SXRlbUxheW91dH1cbiAgICAgICAgICBob3Jpem9udGFsPXtob3Jpem9udGFsfVxuICAgICAgICAgIGluZGV4PXtpaX1cbiAgICAgICAgICBpbnZlcnNpb25TdHlsZT17aW52ZXJzaW9uU3R5bGV9XG4gICAgICAgICAgaXRlbT17aXRlbX1cbiAgICAgICAgICBrZXk9e2tleX1cbiAgICAgICAgICBwcmV2Q2VsbEtleT17cHJldkNlbGxLZXl9XG4gICAgICAgICAgb25DZWxsTGF5b3V0PXt0aGlzLl9vbkNlbGxMYXlvdXR9XG4gICAgICAgICAgb25VcGRhdGVTZXBhcmF0b3JzPXt0aGlzLl9vblVwZGF0ZVNlcGFyYXRvcnN9XG4gICAgICAgICAgb25DZWxsRm9jdXNDYXB0dXJlPXtlID0+IHRoaXMuX29uQ2VsbEZvY3VzQ2FwdHVyZShrZXkpfVxuICAgICAgICAgIG9uVW5tb3VudD17dGhpcy5fb25DZWxsVW5tb3VudH1cbiAgICAgICAgICByZWY9e3JlZiA9PiB7XG4gICAgICAgICAgICB0aGlzLl9jZWxsUmVmc1trZXldID0gcmVmO1xuICAgICAgICAgIH19XG4gICAgICAgICAgcmVuZGVySXRlbT17cmVuZGVySXRlbX1cbiAgICAgICAgLz4sXG4gICAgICApO1xuICAgICAgcHJldkNlbGxLZXkgPSBrZXk7XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIF9jb25zdHJhaW5Ub0l0ZW1Db3VudChcbiAgICBjZWxsczoge2ZpcnN0OiBudW1iZXIsIGxhc3Q6IG51bWJlcn0sXG4gICAgcHJvcHM6IFByb3BzLFxuICApOiB7Zmlyc3Q6IG51bWJlciwgbGFzdDogbnVtYmVyfSB7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpO1xuICAgIGNvbnN0IGxhc3QgPSBNYXRoLm1pbihpdGVtQ291bnQgLSAxLCBjZWxscy5sYXN0KTtcblxuICAgIGNvbnN0IG1heFRvUmVuZGVyUGVyQmF0Y2ggPSBtYXhUb1JlbmRlclBlckJhdGNoT3JEZWZhdWx0KFxuICAgICAgcHJvcHMubWF4VG9SZW5kZXJQZXJCYXRjaCxcbiAgICApO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIGZpcnN0OiBjbGFtcCgwLCBpdGVtQ291bnQgLSAxIC0gbWF4VG9SZW5kZXJQZXJCYXRjaCwgY2VsbHMuZmlyc3QpLFxuICAgICAgbGFzdCxcbiAgICB9O1xuICB9XG5cbiAgX29uVXBkYXRlU2VwYXJhdG9ycyA9IChrZXlzOiBBcnJheTw/c3RyaW5nPiwgbmV3UHJvcHM6IE9iamVjdCkgPT4ge1xuICAgIGtleXMuZm9yRWFjaChrZXkgPT4ge1xuICAgICAgY29uc3QgcmVmID0ga2V5ICE9IG51bGwgJiYgdGhpcy5fY2VsbFJlZnNba2V5XTtcbiAgICAgIHJlZiAmJiByZWYudXBkYXRlU2VwYXJhdG9yUHJvcHMobmV3UHJvcHMpO1xuICAgIH0pO1xuICB9O1xuXG4gIF9pc05lc3RlZFdpdGhTYW1lT3JpZW50YXRpb24oKTogYm9vbGVhbiB7XG4gICAgY29uc3QgbmVzdGVkQ29udGV4dCA9IHRoaXMuY29udGV4dDtcbiAgICByZXR1cm4gISEoXG4gICAgICBuZXN0ZWRDb250ZXh0ICYmXG4gICAgICAhIW5lc3RlZENvbnRleHQuaG9yaXpvbnRhbCA9PT0gaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpXG4gICAgKTtcbiAgfVxuXG4gIF9nZXRTcGFjZXJLZXkgPSAoaXNWZXJ0aWNhbDogYm9vbGVhbik6IHN0cmluZyA9PlxuICAgIGlzVmVydGljYWwgPyAnaGVpZ2h0JyA6ICd3aWR0aCc7XG5cbiAgX2tleUV4dHJhY3RvcihcbiAgICBpdGVtOiBJdGVtLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgcHJvcHM6IHtcbiAgICAgIGtleUV4dHJhY3Rvcj86ID8oaXRlbTogSXRlbSwgaW5kZXg6IG51bWJlcikgPT4gc3RyaW5nLFxuICAgICAgLi4uXG4gICAgfSxcbiAgICAvLyAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdXG4gICkge1xuICAgIGlmIChwcm9wcy5rZXlFeHRyYWN0b3IgIT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHByb3BzLmtleUV4dHJhY3RvcihpdGVtLCBpbmRleCk7XG4gICAgfVxuXG4gICAgY29uc3Qga2V5ID0gZGVmYXVsdEtleUV4dHJhY3RvcihpdGVtLCBpbmRleCk7XG4gICAgaWYgKGtleSA9PT0gU3RyaW5nKGluZGV4KSkge1xuICAgICAgX3VzZWRJbmRleEZvcktleSA9IHRydWU7XG4gICAgICBpZiAoaXRlbS50eXBlICYmIGl0ZW0udHlwZS5kaXNwbGF5TmFtZSkge1xuICAgICAgICBfa2V5bGVzc0l0ZW1Db21wb25lbnROYW1lID0gaXRlbS50eXBlLmRpc3BsYXlOYW1lO1xuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4ga2V5O1xuICB9XG5cbiAgcmVuZGVyKCk6IFJlYWN0Lk5vZGUge1xuICAgIGlmIChfX0RFVl9fKSB7XG4gICAgICBjb25zdCBmbGF0U3R5bGVzID0gZmxhdHRlblN0eWxlKHRoaXMucHJvcHMuY29udGVudENvbnRhaW5lclN0eWxlKTtcbiAgICAgIGlmIChmbGF0U3R5bGVzICE9IG51bGwgJiYgZmxhdFN0eWxlcy5mbGV4V3JhcCA9PT0gJ3dyYXAnKSB7XG4gICAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgICAnYGZsZXhXcmFwOiBgd3JhcGBgIGlzIG5vdCBzdXBwb3J0ZWQgd2l0aCB0aGUgYFZpcnR1YWxpemVkTGlzdGAgY29tcG9uZW50cy4nICtcbiAgICAgICAgICAgICdDb25zaWRlciB1c2luZyBgbnVtQ29sdW1uc2Agd2l0aCBgRmxhdExpc3RgIGluc3RlYWQuJyxcbiAgICAgICAgKTtcbiAgICAgIH1cbiAgICB9XG4gICAgY29uc3Qge0xpc3RFbXB0eUNvbXBvbmVudCwgTGlzdEZvb3RlckNvbXBvbmVudCwgTGlzdEhlYWRlckNvbXBvbmVudH0gPVxuICAgICAgdGhpcy5wcm9wcztcbiAgICBjb25zdCB7ZGF0YSwgaG9yaXpvbnRhbH0gPSB0aGlzLnByb3BzO1xuICAgIGNvbnN0IGludmVyc2lvblN0eWxlID0gdGhpcy5wcm9wcy5pbnZlcnRlZFxuICAgICAgPyBob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgICAgPyBzdHlsZXMuaG9yaXpvbnRhbGx5SW52ZXJ0ZWRcbiAgICAgICAgOiBzdHlsZXMudmVydGljYWxseUludmVydGVkXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY2VsbHM6IEFycmF5PGFueSB8IFJlYWN0Lk5vZGU+ID0gW107XG4gICAgY29uc3Qgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyA9IG5ldyBTZXQodGhpcy5wcm9wcy5zdGlja3lIZWFkZXJJbmRpY2VzKTtcbiAgICBjb25zdCBzdGlja3lIZWFkZXJJbmRpY2VzID0gW107XG5cbiAgICAvLyAxLiBBZGQgY2VsbCBmb3IgTGlzdEhlYWRlckNvbXBvbmVudFxuICAgIGlmIChMaXN0SGVhZGVyQ29tcG9uZW50KSB7XG4gICAgICBpZiAoc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcy5oYXMoMCkpIHtcbiAgICAgICAgc3RpY2t5SGVhZGVySW5kaWNlcy5wdXNoKDApO1xuICAgICAgfVxuICAgICAgY29uc3QgZWxlbWVudCA9IFJlYWN0LmlzVmFsaWRFbGVtZW50KExpc3RIZWFkZXJDb21wb25lbnQpID8gKFxuICAgICAgICBMaXN0SGVhZGVyQ29tcG9uZW50XG4gICAgICApIDogKFxuICAgICAgICAvLyAkRmxvd0ZpeE1lW25vdC1hLWNvbXBvbmVudF1cbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZS1hcmddXG4gICAgICAgIDxMaXN0SGVhZGVyQ29tcG9uZW50IC8+XG4gICAgICApO1xuICAgICAgY2VsbHMucHVzaChcbiAgICAgICAgPFZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXJcbiAgICAgICAgICBjZWxsS2V5PXt0aGlzLl9nZXRDZWxsS2V5KCkgKyAnLWhlYWRlcid9XG4gICAgICAgICAga2V5PVwiJGhlYWRlclwiPlxuICAgICAgICAgIDxWaWV3XG4gICAgICAgICAgICBvbkxheW91dD17dGhpcy5fb25MYXlvdXRIZWFkZXJ9XG4gICAgICAgICAgICBzdHlsZT17U3R5bGVTaGVldC5jb21wb3NlKFxuICAgICAgICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICAgICAgICAgdGhpcy5wcm9wcy5MaXN0SGVhZGVyQ29tcG9uZW50U3R5bGUsXG4gICAgICAgICAgICApfT5cbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdHlwZV0gLSBUeXBpbmcgUmVhY3ROYXRpdmVDb21wb25lbnQgcmV2ZWFsZWQgZXJyb3JzXG4gICAgICAgICAgICAgIGVsZW1lbnRcbiAgICAgICAgICAgIH1cbiAgICAgICAgICA8L1ZpZXc+XG4gICAgICAgIDwvVmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlcj4sXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIDJhLiBBZGQgYSBjZWxsIGZvciBMaXN0RW1wdHlDb21wb25lbnQgaWYgYXBwbGljYWJsZVxuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KGRhdGEpO1xuICAgIGlmIChpdGVtQ291bnQgPT09IDAgJiYgTGlzdEVtcHR5Q29tcG9uZW50KSB7XG4gICAgICBjb25zdCBlbGVtZW50OiBSZWFjdC5FbGVtZW50PGFueT4gPSAoKFJlYWN0LmlzVmFsaWRFbGVtZW50KFxuICAgICAgICBMaXN0RW1wdHlDb21wb25lbnQsXG4gICAgICApID8gKFxuICAgICAgICBMaXN0RW1wdHlDb21wb25lbnRcbiAgICAgICkgOiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbbm90LWEtY29tcG9uZW50XVxuICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlLWFyZ11cbiAgICAgICAgPExpc3RFbXB0eUNvbXBvbmVudCAvPlxuICAgICAgKSk6IGFueSk7XG4gICAgICBjZWxscy5wdXNoKFxuICAgICAgICA8VmlydHVhbGl6ZWRMaXN0Q2VsbENvbnRleHRQcm92aWRlclxuICAgICAgICAgIGNlbGxLZXk9e3RoaXMuX2dldENlbGxLZXkoKSArICctZW1wdHknfVxuICAgICAgICAgIGtleT1cIiRlbXB0eVwiPlxuICAgICAgICAgIHtSZWFjdC5jbG9uZUVsZW1lbnQoZWxlbWVudCwge1xuICAgICAgICAgICAgb25MYXlvdXQ6IChldmVudDogTGF5b3V0RXZlbnQpID0+IHtcbiAgICAgICAgICAgICAgdGhpcy5fb25MYXlvdXRFbXB0eShldmVudCk7XG4gICAgICAgICAgICAgIGlmIChlbGVtZW50LnByb3BzLm9uTGF5b3V0KSB7XG4gICAgICAgICAgICAgICAgZWxlbWVudC5wcm9wcy5vbkxheW91dChldmVudCk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdHlsZTogU3R5bGVTaGVldC5jb21wb3NlKGludmVyc2lvblN0eWxlLCBlbGVtZW50LnByb3BzLnN0eWxlKSxcbiAgICAgICAgICB9KX1cbiAgICAgICAgPC9WaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyPixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgLy8gMmIuIEFkZCBjZWxscyBhbmQgc3BhY2VycyBmb3IgZWFjaCBpdGVtXG4gICAgaWYgKGl0ZW1Db3VudCA+IDApIHtcbiAgICAgIF91c2VkSW5kZXhGb3JLZXkgPSBmYWxzZTtcbiAgICAgIF9rZXlsZXNzSXRlbUNvbXBvbmVudE5hbWUgPSAnJztcbiAgICAgIGNvbnN0IHNwYWNlcktleSA9IHRoaXMuX2dldFNwYWNlcktleSghaG9yaXpvbnRhbCk7XG5cbiAgICAgIGNvbnN0IHJlbmRlclJlZ2lvbnMgPSB0aGlzLnN0YXRlLnJlbmRlck1hc2suZW51bWVyYXRlUmVnaW9ucygpO1xuICAgICAgY29uc3QgbGFzdFNwYWNlciA9IGZpbmRMYXN0V2hlcmUocmVuZGVyUmVnaW9ucywgciA9PiByLmlzU3BhY2VyKTtcblxuICAgICAgZm9yIChjb25zdCBzZWN0aW9uIG9mIHJlbmRlclJlZ2lvbnMpIHtcbiAgICAgICAgaWYgKHNlY3Rpb24uaXNTcGFjZXIpIHtcbiAgICAgICAgICAvLyBMZWdhY3kgYmVoYXZpb3IgaXMgdG8gYXZvaWQgc3BhY2VycyB3aGVuIHZpcnR1YWxpemF0aW9uIGlzXG4gICAgICAgICAgLy8gZGlzYWJsZWQgKGluY2x1ZGluZyBoZWFkIHNwYWNlcnMgb24gaW5pdGlhbCByZW5kZXIpLlxuICAgICAgICAgIGlmICh0aGlzLnByb3BzLmRpc2FibGVWaXJ0dWFsaXphdGlvbikge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgLy8gV2l0aG91dCBnZXRJdGVtTGF5b3V0LCB3ZSBsaW1pdCBvdXIgdGFpbCBzcGFjZXIgdG8gdGhlIF9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4IHRvXG4gICAgICAgICAgLy8gcHJldmVudCB0aGUgdXNlciBmb3IgaHlwZXJzY3JvbGxpbmcgaW50byB1bi1tZWFzdXJlZCBhcmVhIGJlY2F1c2Ugb3RoZXJ3aXNlIGNvbnRlbnQgd2lsbFxuICAgICAgICAgIC8vIGxpa2VseSBqdW1wIGFyb3VuZCBhcyBpdCByZW5kZXJzIGluIGFib3ZlIHRoZSB2aWV3cG9ydC5cbiAgICAgICAgICBjb25zdCBpc0xhc3RTcGFjZXIgPSBzZWN0aW9uID09PSBsYXN0U3BhY2VyO1xuICAgICAgICAgIGNvbnN0IGNvbnN0cmFpblRvTWVhc3VyZWQgPSBpc0xhc3RTcGFjZXIgJiYgIXRoaXMucHJvcHMuZ2V0SXRlbUxheW91dDtcbiAgICAgICAgICBjb25zdCBsYXN0ID0gY29uc3RyYWluVG9NZWFzdXJlZFxuICAgICAgICAgICAgPyBjbGFtcChcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmZpcnN0IC0gMSxcbiAgICAgICAgICAgICAgICBzZWN0aW9uLmxhc3QsXG4gICAgICAgICAgICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCxcbiAgICAgICAgICAgICAgKVxuICAgICAgICAgICAgOiBzZWN0aW9uLmxhc3Q7XG5cbiAgICAgICAgICBjb25zdCBmaXJzdE1ldHJpY3MgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KFxuICAgICAgICAgICAgc2VjdGlvbi5maXJzdCxcbiAgICAgICAgICAgIHRoaXMucHJvcHMsXG4gICAgICAgICAgKTtcbiAgICAgICAgICBjb25zdCBsYXN0TWV0cmljcyA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3gobGFzdCwgdGhpcy5wcm9wcyk7XG4gICAgICAgICAgY29uc3Qgc3BhY2VyU2l6ZSA9XG4gICAgICAgICAgICBsYXN0TWV0cmljcy5vZmZzZXQgKyBsYXN0TWV0cmljcy5sZW5ndGggLSBmaXJzdE1ldHJpY3Mub2Zmc2V0O1xuICAgICAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgICBrZXk9e2Akc3BhY2VyLSR7c2VjdGlvbi5maXJzdH1gfVxuICAgICAgICAgICAgICBzdHlsZT17e1tzcGFjZXJLZXldOiBzcGFjZXJTaXplfX1cbiAgICAgICAgICAgIC8+LFxuICAgICAgICAgICk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5fcHVzaENlbGxzKFxuICAgICAgICAgICAgY2VsbHMsXG4gICAgICAgICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgICAgICAgc3RpY2t5SW5kaWNlc0Zyb21Qcm9wcyxcbiAgICAgICAgICAgIHNlY3Rpb24uZmlyc3QsXG4gICAgICAgICAgICBzZWN0aW9uLmxhc3QsXG4gICAgICAgICAgICBpbnZlcnNpb25TdHlsZSxcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGlmICghdGhpcy5faGFzV2FybmVkLmtleXMgJiYgX3VzZWRJbmRleEZvcktleSkge1xuICAgICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgICAgJ1ZpcnR1YWxpemVkTGlzdDogbWlzc2luZyBrZXlzIGZvciBpdGVtcywgbWFrZSBzdXJlIHRvIHNwZWNpZnkgYSBrZXkgb3IgaWQgcHJvcGVydHkgb24gZWFjaCAnICtcbiAgICAgICAgICAgICdpdGVtIG9yIHByb3ZpZGUgYSBjdXN0b20ga2V5RXh0cmFjdG9yLicsXG4gICAgICAgICAgX2tleWxlc3NJdGVtQ29tcG9uZW50TmFtZSxcbiAgICAgICAgKTtcbiAgICAgICAgdGhpcy5faGFzV2FybmVkLmtleXMgPSB0cnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIDMuIEFkZCBjZWxsIGZvciBMaXN0Rm9vdGVyQ29tcG9uZW50XG4gICAgaWYgKExpc3RGb290ZXJDb21wb25lbnQpIHtcbiAgICAgIGNvbnN0IGVsZW1lbnQgPSBSZWFjdC5pc1ZhbGlkRWxlbWVudChMaXN0Rm9vdGVyQ29tcG9uZW50KSA/IChcbiAgICAgICAgTGlzdEZvb3RlckNvbXBvbmVudFxuICAgICAgKSA6IChcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtub3QtYS1jb21wb25lbnRdXG4gICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGUtYXJnXVxuICAgICAgICA8TGlzdEZvb3RlckNvbXBvbmVudCAvPlxuICAgICAgKTtcbiAgICAgIGNlbGxzLnB1c2goXG4gICAgICAgIDxWaXJ0dWFsaXplZExpc3RDZWxsQ29udGV4dFByb3ZpZGVyXG4gICAgICAgICAgY2VsbEtleT17dGhpcy5fZ2V0Rm9vdGVyQ2VsbEtleSgpfVxuICAgICAgICAgIGtleT1cIiRmb290ZXJcIj5cbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAgb25MYXlvdXQ9e3RoaXMuX29uTGF5b3V0Rm9vdGVyfVxuICAgICAgICAgICAgc3R5bGU9e1N0eWxlU2hlZXQuY29tcG9zZShcbiAgICAgICAgICAgICAgaW52ZXJzaW9uU3R5bGUsXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuTGlzdEZvb3RlckNvbXBvbmVudFN0eWxlLFxuICAgICAgICAgICAgKX0+XG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXR5cGVdIC0gVHlwaW5nIFJlYWN0TmF0aXZlQ29tcG9uZW50IHJldmVhbGVkIGVycm9yc1xuICAgICAgICAgICAgICBlbGVtZW50XG4gICAgICAgICAgICB9XG4gICAgICAgICAgPC9WaWV3PlxuICAgICAgICA8L1ZpcnR1YWxpemVkTGlzdENlbGxDb250ZXh0UHJvdmlkZXI+LFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyA0LiBSZW5kZXIgdGhlIFNjcm9sbFZpZXdcbiAgICBjb25zdCBzY3JvbGxQcm9wcyA9IHtcbiAgICAgIC4uLnRoaXMucHJvcHMsXG4gICAgICBvbkNvbnRlbnRTaXplQ2hhbmdlOiB0aGlzLl9vbkNvbnRlbnRTaXplQ2hhbmdlLFxuICAgICAgb25MYXlvdXQ6IHRoaXMuX29uTGF5b3V0LFxuICAgICAgb25TY3JvbGw6IHRoaXMuX29uU2Nyb2xsLFxuICAgICAgb25TY3JvbGxCZWdpbkRyYWc6IHRoaXMuX29uU2Nyb2xsQmVnaW5EcmFnLFxuICAgICAgb25TY3JvbGxFbmREcmFnOiB0aGlzLl9vblNjcm9sbEVuZERyYWcsXG4gICAgICBvbk1vbWVudHVtU2Nyb2xsQmVnaW46IHRoaXMuX29uTW9tZW50dW1TY3JvbGxCZWdpbixcbiAgICAgIG9uTW9tZW50dW1TY3JvbGxFbmQ6IHRoaXMuX29uTW9tZW50dW1TY3JvbGxFbmQsXG4gICAgICBzY3JvbGxFdmVudFRocm90dGxlOiBzY3JvbGxFdmVudFRocm90dGxlT3JEZWZhdWx0KFxuICAgICAgICB0aGlzLnByb3BzLnNjcm9sbEV2ZW50VGhyb3R0bGUsXG4gICAgICApLCAvLyBUT0RPOiBBbmRyb2lkIHN1cHBvcnRcbiAgICAgIGludmVydFN0aWNreUhlYWRlcnM6XG4gICAgICAgIHRoaXMucHJvcHMuaW52ZXJ0U3RpY2t5SGVhZGVycyAhPT0gdW5kZWZpbmVkXG4gICAgICAgICAgPyB0aGlzLnByb3BzLmludmVydFN0aWNreUhlYWRlcnNcbiAgICAgICAgICA6IHRoaXMucHJvcHMuaW52ZXJ0ZWQsXG4gICAgICBzdGlja3lIZWFkZXJJbmRpY2VzLFxuICAgICAgc3R5bGU6IGludmVyc2lvblN0eWxlXG4gICAgICAgID8gW2ludmVyc2lvblN0eWxlLCB0aGlzLnByb3BzLnN0eWxlXVxuICAgICAgICA6IHRoaXMucHJvcHMuc3R5bGUsXG4gICAgfTtcblxuICAgIHRoaXMuX2hhc01vcmUgPSB0aGlzLnN0YXRlLmNlbGxzQXJvdW5kVmlld3BvcnQubGFzdCA8IGl0ZW1Db3VudCAtIDE7XG5cbiAgICBjb25zdCBpbm5lclJldCA9IChcbiAgICAgIDxWaXJ0dWFsaXplZExpc3RDb250ZXh0UHJvdmlkZXJcbiAgICAgICAgdmFsdWU9e3tcbiAgICAgICAgICBjZWxsS2V5OiBudWxsLFxuICAgICAgICAgIGdldFNjcm9sbE1ldHJpY3M6IHRoaXMuX2dldFNjcm9sbE1ldHJpY3MsXG4gICAgICAgICAgaG9yaXpvbnRhbDogaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpLFxuICAgICAgICAgIGdldE91dGVybW9zdFBhcmVudExpc3RSZWY6IHRoaXMuX2dldE91dGVybW9zdFBhcmVudExpc3RSZWYsXG4gICAgICAgICAgcmVnaXN0ZXJBc05lc3RlZENoaWxkOiB0aGlzLl9yZWdpc3RlckFzTmVzdGVkQ2hpbGQsXG4gICAgICAgICAgdW5yZWdpc3RlckFzTmVzdGVkQ2hpbGQ6IHRoaXMuX3VucmVnaXN0ZXJBc05lc3RlZENoaWxkLFxuICAgICAgICB9fT5cbiAgICAgICAge1JlYWN0LmNsb25lRWxlbWVudChcbiAgICAgICAgICAoXG4gICAgICAgICAgICB0aGlzLnByb3BzLnJlbmRlclNjcm9sbENvbXBvbmVudCB8fFxuICAgICAgICAgICAgdGhpcy5fZGVmYXVsdFJlbmRlclNjcm9sbENvbXBvbmVudFxuICAgICAgICAgICkoc2Nyb2xsUHJvcHMpLFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIHJlZjogdGhpcy5fY2FwdHVyZVNjcm9sbFJlZixcbiAgICAgICAgICB9LFxuICAgICAgICAgIGNlbGxzLFxuICAgICAgICApfVxuICAgICAgPC9WaXJ0dWFsaXplZExpc3RDb250ZXh0UHJvdmlkZXI+XG4gICAgKTtcbiAgICBsZXQgcmV0OiBSZWFjdC5Ob2RlID0gaW5uZXJSZXQ7XG4gICAgaWYgKF9fREVWX18pIHtcbiAgICAgIHJldCA9IChcbiAgICAgICAgPFNjcm9sbFZpZXcuQ29udGV4dC5Db25zdW1lcj5cbiAgICAgICAgICB7c2Nyb2xsQ29udGV4dCA9PiB7XG4gICAgICAgICAgICBpZiAoXG4gICAgICAgICAgICAgIHNjcm9sbENvbnRleHQgIT0gbnVsbCAmJlxuICAgICAgICAgICAgICAhc2Nyb2xsQ29udGV4dC5ob3Jpem9udGFsID09PVxuICAgICAgICAgICAgICAgICFob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbCkgJiZcbiAgICAgICAgICAgICAgIXRoaXMuX2hhc1dhcm5lZC5uZXN0aW5nICYmXG4gICAgICAgICAgICAgIHRoaXMuY29udGV4dCA9PSBudWxsICYmXG4gICAgICAgICAgICAgIHRoaXMucHJvcHMuc2Nyb2xsRW5hYmxlZCAhPT0gZmFsc2VcbiAgICAgICAgICAgICkge1xuICAgICAgICAgICAgICAvLyBUT0RPIChUNDY1NDcwNDQpOiB1c2UgUmVhY3Qud2FybiBvbmNlIDE2LjkgaXMgc3luYydkOiBodHRwczovL2dpdGh1Yi5jb20vZmFjZWJvb2svcmVhY3QvcHVsbC8xNTE3MFxuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKFxuICAgICAgICAgICAgICAgICdWaXJ0dWFsaXplZExpc3RzIHNob3VsZCBuZXZlciBiZSBuZXN0ZWQgaW5zaWRlIHBsYWluIFNjcm9sbFZpZXdzIHdpdGggdGhlIHNhbWUgJyArXG4gICAgICAgICAgICAgICAgICAnb3JpZW50YXRpb24gYmVjYXVzZSBpdCBjYW4gYnJlYWsgd2luZG93aW5nIGFuZCBvdGhlciBmdW5jdGlvbmFsaXR5IC0gdXNlIGFub3RoZXIgJyArXG4gICAgICAgICAgICAgICAgICAnVmlydHVhbGl6ZWRMaXN0LWJhY2tlZCBjb250YWluZXIgaW5zdGVhZC4nLFxuICAgICAgICAgICAgICApO1xuICAgICAgICAgICAgICB0aGlzLl9oYXNXYXJuZWQubmVzdGluZyA9IHRydWU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gaW5uZXJSZXQ7XG4gICAgICAgICAgfX1cbiAgICAgICAgPC9TY3JvbGxWaWV3LkNvbnRleHQuQ29uc3VtZXI+XG4gICAgICApO1xuICAgIH1cbiAgICBpZiAodGhpcy5wcm9wcy5kZWJ1Zykge1xuICAgICAgcmV0dXJuIChcbiAgICAgICAgPFZpZXcgc3R5bGU9e3N0eWxlcy5kZWJ1Z30+XG4gICAgICAgICAge3JldH1cbiAgICAgICAgICB7dGhpcy5fcmVuZGVyRGVidWdPdmVybGF5KCl9XG4gICAgICAgIDwvVmlldz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiByZXQ7XG4gICAgfVxuICB9XG5cbiAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wczogUHJvcHMpIHtcbiAgICBjb25zdCB7ZGF0YSwgZXh0cmFEYXRhfSA9IHRoaXMucHJvcHM7XG4gICAgaWYgKGRhdGEgIT09IHByZXZQcm9wcy5kYXRhIHx8IGV4dHJhRGF0YSAhPT0gcHJldlByb3BzLmV4dHJhRGF0YSkge1xuICAgICAgLy8gY2xlYXIgdGhlIHZpZXdhYmxlSW5kaWNlcyBjYWNoZSB0byBhbHNvIHRyaWdnZXJcbiAgICAgIC8vIHRoZSBvblZpZXdhYmxlSXRlbXNDaGFuZ2VkIGNhbGxiYWNrIHdpdGggdGhlIG5ldyBkYXRhXG4gICAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgICAgdHVwbGUudmlld2FiaWxpdHlIZWxwZXIucmVzZXRWaWV3YWJsZUluZGljZXMoKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBUaGUgYHRoaXMuX2hpUHJpSW5Qcm9ncmVzc2AgaXMgZ3VhcmFudGVlaW5nIGEgaGlQcmkgY2VsbCB1cGRhdGUgd2lsbCBvbmx5IGhhcHBlblxuICAgIC8vIG9uY2UgcGVyIGZpYmVyIHVwZGF0ZS4gVGhlIGBfc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlYCB3aWxsIHNldCBpdCB0byB0cnVlXG4gICAgLy8gaWYgYSBoaVByaSB1cGRhdGUgbmVlZHMgdG8gcGVyZm9ybS4gSWYgYGNvbXBvbmVudERpZFVwZGF0ZWAgaXMgdHJpZ2dlcmVkIHdpdGhcbiAgICAvLyBgdGhpcy5faGlQcmlJblByb2dyZXNzPXRydWVgLCBtZWFucyBpdCdzIHRyaWdnZXJlZCBieSB0aGUgaGlQcmkgdXBkYXRlLiBUaGVcbiAgICAvLyBgX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZWAgd2lsbCBjaGVjayB0aGlzIGNvbmRpdGlvbiBhbmQgbm90IHBlcmZvcm1cbiAgICAvLyBhbm90aGVyIGhpUHJpIHVwZGF0ZS5cbiAgICBjb25zdCBoaVByaUluUHJvZ3Jlc3MgPSB0aGlzLl9oaVByaUluUHJvZ3Jlc3M7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgLy8gTWFrZSBzdXJlIHNldHRpbmcgYHRoaXMuX2hpUHJpSW5Qcm9ncmVzc2AgYmFjayB0byBmYWxzZSBhZnRlciBgY29tcG9uZW50RGlkVXBkYXRlYFxuICAgIC8vIGlzIHRyaWdnZXJlZCB3aXRoIGB0aGlzLl9oaVByaUluUHJvZ3Jlc3MgPSB0cnVlYFxuICAgIGlmIChoaVByaUluUHJvZ3Jlc3MpIHtcbiAgICAgIHRoaXMuX2hpUHJpSW5Qcm9ncmVzcyA9IGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIF9hdmVyYWdlQ2VsbExlbmd0aCA9IDA7XG4gIF9jZWxsUmVmczoge1tzdHJpbmddOiBudWxsIHwgQ2VsbFJlbmRlcmVyPGFueT59ID0ge307XG4gIF9maWxsUmF0ZUhlbHBlcjogRmlsbFJhdGVIZWxwZXI7XG4gIF9mcmFtZXM6IHtcbiAgICBbc3RyaW5nXToge1xuICAgICAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICAgICAgaW5kZXg6IG51bWJlcixcbiAgICAgIGxlbmd0aDogbnVtYmVyLFxuICAgICAgb2Zmc2V0OiBudW1iZXIsXG4gICAgfSxcbiAgfSA9IHt9O1xuICBfZm9vdGVyTGVuZ3RoID0gMDtcbiAgLy8gVXNlZCBmb3IgcHJldmVudGluZyBzY3JvbGxUb0luZGV4IGZyb20gYmVpbmcgY2FsbGVkIG11bHRpcGxlIHRpbWVzIGZvciBpbml0aWFsU2Nyb2xsSW5kZXhcbiAgX2hhc1RyaWdnZXJlZEluaXRpYWxTY3JvbGxUb0luZGV4ID0gZmFsc2U7XG4gIF9oYXNJbnRlcmFjdGVkID0gZmFsc2U7XG4gIF9oYXNNb3JlID0gZmFsc2U7XG4gIF9oYXNXYXJuZWQ6IHtbc3RyaW5nXTogYm9vbGVhbn0gPSB7fTtcbiAgX2hlYWRlckxlbmd0aCA9IDA7XG4gIF9oaVByaUluUHJvZ3Jlc3M6IGJvb2xlYW4gPSBmYWxzZTsgLy8gZmxhZyB0byBwcmV2ZW50IGluZmluaXRlIGhpUHJpIGNlbGwgbGltaXQgdXBkYXRlXG4gIF9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4ID0gMDtcbiAgX2luZGljZXNUb0tleXM6IE1hcDxudW1iZXIsIHN0cmluZz4gPSBuZXcgTWFwKCk7XG4gIF9sYXN0Rm9jdXNlZENlbGxLZXk6ID9zdHJpbmcgPSBudWxsO1xuICBfbmVzdGVkQ2hpbGRMaXN0czogQ2hpbGRMaXN0Q29sbGVjdGlvbjxWaXJ0dWFsaXplZExpc3Q+ID1cbiAgICBuZXcgQ2hpbGRMaXN0Q29sbGVjdGlvbigpO1xuICBfb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDogbnVtYmVyID0gMDtcbiAgX3ByZXZQYXJlbnRPZmZzZXQ6IG51bWJlciA9IDA7XG4gIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgX3Njcm9sbE1ldHJpY3MgPSB7XG4gICAgY29udGVudExlbmd0aDogMCxcbiAgICBkT2Zmc2V0OiAwLFxuICAgIGR0OiAxMCxcbiAgICBvZmZzZXQ6IDAsXG4gICAgdGltZXN0YW1wOiAwLFxuICAgIHZlbG9jaXR5OiAwLFxuICAgIHZpc2libGVMZW5ndGg6IDAsXG4gICAgem9vbVNjYWxlOiAxLFxuICB9O1xuICBfc2Nyb2xsUmVmOiA/UmVhY3QuRWxlbWVudFJlZjxhbnk+ID0gbnVsbDtcbiAgX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gMDtcbiAgX3RvdGFsQ2VsbExlbmd0aCA9IDA7XG4gIF90b3RhbENlbGxzTWVhc3VyZWQgPSAwO1xuICBfdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXI6IEJhdGNoaW5hdG9yO1xuICBfdmlld2FiaWxpdHlUdXBsZXM6IEFycmF5PFZpZXdhYmlsaXR5SGVscGVyQ2FsbGJhY2tUdXBsZT4gPSBbXTtcblxuICAvKiAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdIFRoZSB0eXBlIGFubm90YXRpb24ocykgcmVxdWlyZWQgYnkgRmxvdydzXG4gICAqIExUSSB1cGRhdGUgY291bGQgbm90IGJlIGFkZGVkIHZpYSBjb2RlbW9kICovXG4gIF9jYXB0dXJlU2Nyb2xsUmVmID0gcmVmID0+IHtcbiAgICB0aGlzLl9zY3JvbGxSZWYgPSByZWY7XG4gIH07XG5cbiAgX2NvbXB1dGVCbGFua25lc3MoKSB7XG4gICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuY29tcHV0ZUJsYW5rbmVzcyhcbiAgICAgIHRoaXMucHJvcHMsXG4gICAgICB0aGlzLnN0YXRlLmNlbGxzQXJvdW5kVmlld3BvcnQsXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLFxuICAgICk7XG4gIH1cblxuICAvKiAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdIFRoZSB0eXBlIGFubm90YXRpb24ocykgcmVxdWlyZWQgYnkgRmxvdydzXG4gICAqIExUSSB1cGRhdGUgY291bGQgbm90IGJlIGFkZGVkIHZpYSBjb2RlbW9kICovXG4gIF9kZWZhdWx0UmVuZGVyU2Nyb2xsQ29tcG9uZW50ID0gcHJvcHMgPT4ge1xuICAgIGNvbnN0IG9uUmVmcmVzaCA9IHByb3BzLm9uUmVmcmVzaDtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSAtIFR5cGluZyBSZWFjdE5hdGl2ZUNvbXBvbmVudCByZXZlYWxlZCBlcnJvcnNcbiAgICAgIHJldHVybiA8VmlldyB7Li4ucHJvcHN9IC8+O1xuICAgIH0gZWxzZSBpZiAob25SZWZyZXNoKSB7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgIHR5cGVvZiBwcm9wcy5yZWZyZXNoaW5nID09PSAnYm9vbGVhbicsXG4gICAgICAgICdgcmVmcmVzaGluZ2AgcHJvcCBtdXN0IGJlIHNldCBhcyBhIGJvb2xlYW4gaW4gb3JkZXIgdG8gdXNlIGBvblJlZnJlc2hgLCBidXQgZ290IGAnICtcbiAgICAgICAgICBKU09OLnN0cmluZ2lmeShwcm9wcy5yZWZyZXNoaW5nID8/ICd1bmRlZmluZWQnKSArXG4gICAgICAgICAgJ2AnLFxuICAgICAgKTtcbiAgICAgIHJldHVybiAoXG4gICAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSBJbnZhbGlkIHByb3AgdXNhZ2VcbiAgICAgICAgLy8gJEZsb3dGaXhNZVtpbmNvbXBhdGlibGUtdXNlXVxuICAgICAgICA8U2Nyb2xsVmlld1xuICAgICAgICAgIHsuLi5wcm9wc31cbiAgICAgICAgICByZWZyZXNoQ29udHJvbD17XG4gICAgICAgICAgICBwcm9wcy5yZWZyZXNoQ29udHJvbCA9PSBudWxsID8gKFxuICAgICAgICAgICAgICA8UmVmcmVzaENvbnRyb2xcbiAgICAgICAgICAgICAgICAvLyAkRmxvd0ZpeE1lW2luY29tcGF0aWJsZS10eXBlXVxuICAgICAgICAgICAgICAgIHJlZnJlc2hpbmc9e3Byb3BzLnJlZnJlc2hpbmd9XG4gICAgICAgICAgICAgICAgb25SZWZyZXNoPXtvblJlZnJlc2h9XG4gICAgICAgICAgICAgICAgcHJvZ3Jlc3NWaWV3T2Zmc2V0PXtwcm9wcy5wcm9ncmVzc1ZpZXdPZmZzZXR9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICBwcm9wcy5yZWZyZXNoQ29udHJvbFxuICAgICAgICAgICAgKVxuICAgICAgICAgIH1cbiAgICAgICAgLz5cbiAgICAgICk7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vICRGbG93Rml4TWVbcHJvcC1taXNzaW5nXSBJbnZhbGlkIHByb3AgdXNhZ2VcbiAgICAgIC8vICRGbG93Rml4TWVbaW5jb21wYXRpYmxlLXVzZV1cbiAgICAgIHJldHVybiA8U2Nyb2xsVmlldyB7Li4ucHJvcHN9IC8+O1xuICAgIH1cbiAgfTtcblxuICBfb25DZWxsTGF5b3V0ID0gKGU6IExheW91dEV2ZW50LCBjZWxsS2V5OiBzdHJpbmcsIGluZGV4OiBudW1iZXIpOiB2b2lkID0+IHtcbiAgICBjb25zdCBsYXlvdXQgPSBlLm5hdGl2ZUV2ZW50LmxheW91dDtcbiAgICBjb25zdCBuZXh0ID0ge1xuICAgICAgb2Zmc2V0OiB0aGlzLl9zZWxlY3RPZmZzZXQobGF5b3V0KSxcbiAgICAgIGxlbmd0aDogdGhpcy5fc2VsZWN0TGVuZ3RoKGxheW91dCksXG4gICAgICBpbmRleCxcbiAgICAgIGluTGF5b3V0OiB0cnVlLFxuICAgIH07XG4gICAgY29uc3QgY3VyciA9IHRoaXMuX2ZyYW1lc1tjZWxsS2V5XTtcbiAgICBpZiAoXG4gICAgICAhY3VyciB8fFxuICAgICAgbmV4dC5vZmZzZXQgIT09IGN1cnIub2Zmc2V0IHx8XG4gICAgICBuZXh0Lmxlbmd0aCAhPT0gY3Vyci5sZW5ndGggfHxcbiAgICAgIGluZGV4ICE9PSBjdXJyLmluZGV4XG4gICAgKSB7XG4gICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggKz0gbmV4dC5sZW5ndGggLSAoY3VyciA/IGN1cnIubGVuZ3RoIDogMCk7XG4gICAgICB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQgKz0gY3VyciA/IDAgOiAxO1xuICAgICAgdGhpcy5fYXZlcmFnZUNlbGxMZW5ndGggPVxuICAgICAgICB0aGlzLl90b3RhbENlbGxMZW5ndGggLyB0aGlzLl90b3RhbENlbGxzTWVhc3VyZWQ7XG4gICAgICB0aGlzLl9mcmFtZXNbY2VsbEtleV0gPSBuZXh0O1xuICAgICAgdGhpcy5faGlnaGVzdE1lYXN1cmVkRnJhbWVJbmRleCA9IE1hdGgubWF4KFxuICAgICAgICB0aGlzLl9oaWdoZXN0TWVhc3VyZWRGcmFtZUluZGV4LFxuICAgICAgICBpbmRleCxcbiAgICAgICk7XG4gICAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldLmluTGF5b3V0ID0gdHJ1ZTtcbiAgICB9XG5cbiAgICB0aGlzLl90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbChjZWxsS2V5KTtcblxuICAgIHRoaXMuX2NvbXB1dGVCbGFua25lc3MoKTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydCk7XG4gIH07XG5cbiAgX29uQ2VsbEZvY3VzQ2FwdHVyZShjZWxsS2V5OiBzdHJpbmcpIHtcbiAgICB0aGlzLl9sYXN0Rm9jdXNlZENlbGxLZXkgPSBjZWxsS2V5O1xuICAgIGNvbnN0IHJlbmRlck1hc2sgPSBWaXJ0dWFsaXplZExpc3QuX2NyZWF0ZVJlbmRlck1hc2soXG4gICAgICB0aGlzLnByb3BzLFxuICAgICAgdGhpcy5zdGF0ZS5jZWxsc0Fyb3VuZFZpZXdwb3J0LFxuICAgICAgdGhpcy5fZ2V0Tm9uVmlld3BvcnRSZW5kZXJSZWdpb25zKHRoaXMucHJvcHMpLFxuICAgICk7XG5cbiAgICB0aGlzLnNldFN0YXRlKHN0YXRlID0+IHtcbiAgICAgIGlmICghcmVuZGVyTWFzay5lcXVhbHMoc3RhdGUucmVuZGVyTWFzaykpIHtcbiAgICAgICAgcmV0dXJuIHtyZW5kZXJNYXNrfTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBudWxsO1xuICAgIH0pO1xuICB9XG5cbiAgX29uQ2VsbFVubW91bnQgPSAoY2VsbEtleTogc3RyaW5nKSA9PiB7XG4gICAgY29uc3QgY3VyciA9IHRoaXMuX2ZyYW1lc1tjZWxsS2V5XTtcbiAgICBpZiAoY3Vycikge1xuICAgICAgdGhpcy5fZnJhbWVzW2NlbGxLZXldID0gey4uLmN1cnIsIGluTGF5b3V0OiBmYWxzZX07XG4gICAgfVxuICB9O1xuXG4gIF90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbChjZWxsS2V5OiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2hJbkNlbGwoY2VsbEtleSwgY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5tZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk7XG4gICAgfSk7XG4gIH1cblxuICBtZWFzdXJlTGF5b3V0UmVsYXRpdmVUb0NvbnRhaW5pbmdMaXN0KCk6IHZvaWQge1xuICAgIC8vIFRPRE8gKFQzNTU3NDUzOCk6IGZpbmROb2RlSGFuZGxlIHNvbWV0aW1lcyBjcmFzaGVzIHdpdGggXCJVbmFibGUgdG8gZmluZFxuICAgIC8vIG5vZGUgb24gYW4gdW5tb3VudGVkIGNvbXBvbmVudFwiIGR1cmluZyBzY3JvbGxpbmdcbiAgICB0cnkge1xuICAgICAgaWYgKCF0aGlzLl9zY3JvbGxSZWYpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgICAgLy8gV2UgYXJlIGFzc3VtaW5nIHRoYXQgZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZigpLmdldFNjcm9sbFJlZigpXG4gICAgICAvLyBpcyBhIG5vbi1udWxsIHJlZmVyZW5jZSB0byBhIFNjcm9sbFZpZXdcbiAgICAgIHRoaXMuX3Njcm9sbFJlZi5tZWFzdXJlTGF5b3V0KFxuICAgICAgICB0aGlzLmNvbnRleHQuZ2V0T3V0ZXJtb3N0UGFyZW50TGlzdFJlZigpLmdldFNjcm9sbFJlZigpLFxuICAgICAgICAoeCwgeSwgd2lkdGgsIGhlaWdodCkgPT4ge1xuICAgICAgICAgIHRoaXMuX29mZnNldEZyb21QYXJlbnRWaXJ0dWFsaXplZExpc3QgPSB0aGlzLl9zZWxlY3RPZmZzZXQoe3gsIHl9KTtcbiAgICAgICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoe1xuICAgICAgICAgICAgd2lkdGgsXG4gICAgICAgICAgICBoZWlnaHQsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgY29uc3Qgc2Nyb2xsTWV0cmljcyA9IHRoaXMuX2NvbnZlcnRQYXJlbnRTY3JvbGxNZXRyaWNzKFxuICAgICAgICAgICAgdGhpcy5jb250ZXh0LmdldFNjcm9sbE1ldHJpY3MoKSxcbiAgICAgICAgICApO1xuXG4gICAgICAgICAgY29uc3QgbWV0cmljc0NoYW5nZWQgPVxuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoICE9PSBzY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGggfHxcbiAgICAgICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0ICE9PSBzY3JvbGxNZXRyaWNzLm9mZnNldDtcblxuICAgICAgICAgIGlmIChtZXRyaWNzQ2hhbmdlZCkge1xuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoID0gc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuICAgICAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQgPSBzY3JvbGxNZXRyaWNzLm9mZnNldDtcblxuICAgICAgICAgICAgLy8gSWYgbWV0cmljcyBvZiB0aGUgc2Nyb2xsVmlldyBjaGFuZ2VkLCB0aGVuIHdlIHRyaWdnZXJlZCByZW1lYXN1cmUgZm9yIGNoaWxkIGxpc3RcbiAgICAgICAgICAgIC8vIHRvIGVuc3VyZSBWaXJ0dWFsaXplZExpc3QgaGFzIHRoZSByaWdodCBpbmZvcm1hdGlvbi5cbiAgICAgICAgICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgICAgICAgICBjaGlsZExpc3QubWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9LFxuICAgICAgICBlcnJvciA9PiB7XG4gICAgICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAgICAgXCJWaXJ0dWFsaXplZExpc3Q6IEVuY291bnRlcmVkIGFuIGVycm9yIHdoaWxlIG1lYXN1cmluZyBhIGxpc3Qnc1wiICtcbiAgICAgICAgICAgICAgJyBvZmZzZXQgZnJvbSBpdHMgY29udGFpbmluZyBWaXJ0dWFsaXplZExpc3QuJyxcbiAgICAgICAgICApO1xuICAgICAgICB9LFxuICAgICAgKTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICAnbWVhc3VyZUxheW91dFJlbGF0aXZlVG9Db250YWluaW5nTGlzdCB0aHJldyBhbiBlcnJvcicsXG4gICAgICAgIGVycm9yLnN0YWNrLFxuICAgICAgKTtcbiAgICB9XG4gIH1cblxuICBfb25MYXlvdXQgPSAoZTogTGF5b3V0RXZlbnQpID0+IHtcbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIC8vIE5lZWQgdG8gYWRqdXN0IG91ciBzY3JvbGwgbWV0cmljcyB0byBiZSByZWxhdGl2ZSB0byBvdXIgY29udGFpbmluZ1xuICAgICAgLy8gVmlydHVhbGl6ZWRMaXN0IGJlZm9yZSB3ZSBjYW4gbWFrZSBjbGFpbXMgYWJvdXQgbGlzdCBpdGVtIHZpZXdhYmlsaXR5XG4gICAgICB0aGlzLm1lYXN1cmVMYXlvdXRSZWxhdGl2ZVRvQ29udGFpbmluZ0xpc3QoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKFxuICAgICAgICBlLm5hdGl2ZUV2ZW50LmxheW91dCxcbiAgICAgICk7XG4gICAgfVxuICAgIHRoaXMucHJvcHMub25MYXlvdXQgJiYgdGhpcy5wcm9wcy5vbkxheW91dChlKTtcbiAgICB0aGlzLl9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKTtcbiAgICB0aGlzLl9tYXliZUNhbGxPbkVuZFJlYWNoZWQoKTtcbiAgfTtcblxuICBfb25MYXlvdXRFbXB0eSA9IChlOiBMYXlvdXRFdmVudCkgPT4ge1xuICAgIHRoaXMucHJvcHMub25MYXlvdXQgJiYgdGhpcy5wcm9wcy5vbkxheW91dChlKTtcbiAgfTtcblxuICBfZ2V0Rm9vdGVyQ2VsbEtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiB0aGlzLl9nZXRDZWxsS2V5KCkgKyAnLWZvb3Rlcic7XG4gIH1cblxuICBfb25MYXlvdXRGb290ZXIgPSAoZTogTGF5b3V0RXZlbnQpID0+IHtcbiAgICB0aGlzLl90cmlnZ2VyUmVtZWFzdXJlRm9yQ2hpbGRMaXN0c0luQ2VsbCh0aGlzLl9nZXRGb290ZXJDZWxsS2V5KCkpO1xuICAgIHRoaXMuX2Zvb3Rlckxlbmd0aCA9IHRoaXMuX3NlbGVjdExlbmd0aChlLm5hdGl2ZUV2ZW50LmxheW91dCk7XG4gIH07XG5cbiAgX29uTGF5b3V0SGVhZGVyID0gKGU6IExheW91dEV2ZW50KSA9PiB7XG4gICAgdGhpcy5faGVhZGVyTGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKGUubmF0aXZlRXZlbnQubGF5b3V0KTtcbiAgfTtcblxuICAvLyAkRmxvd0ZpeE1lW21pc3NpbmctbG9jYWwtYW5ub3RdXG4gIF9yZW5kZXJEZWJ1Z092ZXJsYXkoKSB7XG4gICAgY29uc3Qgbm9ybWFsaXplID1cbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCAvXG4gICAgICAodGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoIHx8IDEpO1xuICAgIGNvbnN0IGZyYW1lc0luTGF5b3V0ID0gW107XG4gICAgY29uc3QgaXRlbUNvdW50ID0gdGhpcy5wcm9wcy5nZXRJdGVtQ291bnQodGhpcy5wcm9wcy5kYXRhKTtcbiAgICBmb3IgKGxldCBpaSA9IDA7IGlpIDwgaXRlbUNvdW50OyBpaSsrKSB7XG4gICAgICBjb25zdCBmcmFtZSA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goaWksIHRoaXMucHJvcHMpO1xuICAgICAgLyogJEZsb3dGaXhNZVtwcm9wLW1pc3NpbmddICg+PTAuNjguMCBzaXRlPXJlYWN0X25hdGl2ZV9mYikgVGhpcyBjb21tZW50XG4gICAgICAgKiBzdXBwcmVzc2VzIGFuIGVycm9yIGZvdW5kIHdoZW4gRmxvdyB2MC42OCB3YXMgZGVwbG95ZWQuIFRvIHNlZSB0aGVcbiAgICAgICAqIGVycm9yIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgaWYgKGZyYW1lLmluTGF5b3V0KSB7XG4gICAgICAgIGZyYW1lc0luTGF5b3V0LnB1c2goZnJhbWUpO1xuICAgICAgfVxuICAgIH1cbiAgICBjb25zdCB3aW5kb3dUb3AgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KFxuICAgICAgdGhpcy5zdGF0ZS5jZWxsc0Fyb3VuZFZpZXdwb3J0LmZpcnN0LFxuICAgICAgdGhpcy5wcm9wcyxcbiAgICApLm9mZnNldDtcbiAgICBjb25zdCBmcmFtZUxhc3QgPSB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KFxuICAgICAgdGhpcy5zdGF0ZS5jZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QsXG4gICAgICB0aGlzLnByb3BzLFxuICAgICk7XG4gICAgY29uc3Qgd2luZG93TGVuID0gZnJhbWVMYXN0Lm9mZnNldCArIGZyYW1lTGFzdC5sZW5ndGggLSB3aW5kb3dUb3A7XG4gICAgY29uc3QgdmlzVG9wID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG4gICAgY29uc3QgdmlzTGVuID0gdGhpcy5fc2Nyb2xsTWV0cmljcy52aXNpYmxlTGVuZ3RoO1xuXG4gICAgcmV0dXJuIChcbiAgICAgIDxWaWV3IHN0eWxlPXtbc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsIHN0eWxlcy5kZWJ1Z092ZXJsYXldfT5cbiAgICAgICAge2ZyYW1lc0luTGF5b3V0Lm1hcCgoZiwgaWkpID0+IChcbiAgICAgICAgICA8Vmlld1xuICAgICAgICAgICAga2V5PXsnZicgKyBpaX1cbiAgICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlCYXNlLFxuICAgICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWUsXG4gICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0b3A6IGYub2Zmc2V0ICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICAgIGhlaWdodDogZi5sZW5ndGggKiBub3JtYWxpemUsXG4gICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBdfVxuICAgICAgICAgIC8+XG4gICAgICAgICkpfVxuICAgICAgICA8Vmlld1xuICAgICAgICAgIHN0eWxlPXtbXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5QmFzZSxcbiAgICAgICAgICAgIHN0eWxlcy5kZWJ1Z092ZXJsYXlGcmFtZUxhc3QsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogd2luZG93VG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHdpbmRvd0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgICAgPFZpZXdcbiAgICAgICAgICBzdHlsZT17W1xuICAgICAgICAgICAgc3R5bGVzLmRlYnVnT3ZlcmxheUJhc2UsXG4gICAgICAgICAgICBzdHlsZXMuZGVidWdPdmVybGF5RnJhbWVWaXMsXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIHRvcDogdmlzVG9wICogbm9ybWFsaXplLFxuICAgICAgICAgICAgICBoZWlnaHQ6IHZpc0xlbiAqIG5vcm1hbGl6ZSxcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXX1cbiAgICAgICAgLz5cbiAgICAgIDwvVmlldz5cbiAgICApO1xuICB9XG5cbiAgX3NlbGVjdExlbmd0aChcbiAgICBtZXRyaWNzOiAkUmVhZE9ubHk8e1xuICAgICAgaGVpZ2h0OiBudW1iZXIsXG4gICAgICB3aWR0aDogbnVtYmVyLFxuICAgICAgLi4uXG4gICAgfT4sXG4gICk6IG51bWJlciB7XG4gICAgcmV0dXJuICFob3Jpem9udGFsT3JEZWZhdWx0KHRoaXMucHJvcHMuaG9yaXpvbnRhbClcbiAgICAgID8gbWV0cmljcy5oZWlnaHRcbiAgICAgIDogbWV0cmljcy53aWR0aDtcbiAgfVxuXG4gIF9zZWxlY3RPZmZzZXQoXG4gICAgbWV0cmljczogJFJlYWRPbmx5PHtcbiAgICAgIHg6IG51bWJlcixcbiAgICAgIHk6IG51bWJlcixcbiAgICAgIC4uLlxuICAgIH0+LFxuICApOiBudW1iZXIge1xuICAgIHJldHVybiAhaG9yaXpvbnRhbE9yRGVmYXVsdCh0aGlzLnByb3BzLmhvcml6b250YWwpID8gbWV0cmljcy55IDogbWV0cmljcy54O1xuICB9XG5cbiAgX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpIHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbUNvdW50LCBvbkVuZFJlYWNoZWQsIG9uRW5kUmVhY2hlZFRocmVzaG9sZH0gPVxuICAgICAgdGhpcy5wcm9wcztcbiAgICBjb25zdCB7Y29udGVudExlbmd0aCwgdmlzaWJsZUxlbmd0aCwgb2Zmc2V0fSA9IHRoaXMuX3Njcm9sbE1ldHJpY3M7XG4gICAgbGV0IGRpc3RhbmNlRnJvbUVuZCA9IGNvbnRlbnRMZW5ndGggLSB2aXNpYmxlTGVuZ3RoIC0gb2Zmc2V0O1xuXG4gICAgLy8gRXNwZWNpYWxseSB3aGVuIG9FUlQgaXMgemVybyBpdCdzIG5lY2Vzc2FyeSB0byAnZmxvb3InIHZlcnkgc21hbGwgZGlzdGFuY2VGcm9tRW5kIHZhbHVlcyB0byBiZSAwXG4gICAgLy8gc2luY2UgZGVib3VuY2luZyBjYXVzZXMgdXMgdG8gbm90IGZpcmUgdGhpcyBldmVudCBmb3IgZXZlcnkgc2luZ2xlIFwicGl4ZWxcIiB3ZSBzY3JvbGwgYW5kIGNhbiB0aHVzXG4gICAgLy8gYmUgYXQgdGhlIFwiZW5kXCIgb2YgdGhlIGxpc3Qgd2l0aCBhIGRpc3RhbmNlRnJvbUVuZCBhcHByb3hpbWF0aW5nIDAgYnV0IG5vdCBxdWl0ZSB0aGVyZS5cbiAgICBpZiAoZGlzdGFuY2VGcm9tRW5kIDwgT05fRU5EX1JFQUNIRURfRVBTSUxPTikge1xuICAgICAgZGlzdGFuY2VGcm9tRW5kID0gMDtcbiAgICB9XG5cbiAgICAvLyBUT0RPOiBUMTIxMTcyMTcyIExvb2sgaW50byB3aHkgd2UncmUgXCJkZWZhdWx0aW5nXCIgdG8gYSB0aHJlc2hvbGQgb2YgMiB3aGVuIG9FUlQgaXMgbm90IHByZXNlbnRcbiAgICBjb25zdCB0aHJlc2hvbGQgPVxuICAgICAgb25FbmRSZWFjaGVkVGhyZXNob2xkICE9IG51bGwgPyBvbkVuZFJlYWNoZWRUaHJlc2hvbGQgKiB2aXNpYmxlTGVuZ3RoIDogMjtcbiAgICBpZiAoXG4gICAgICBvbkVuZFJlYWNoZWQgJiZcbiAgICAgIHRoaXMuc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydC5sYXN0ID09PSBnZXRJdGVtQ291bnQoZGF0YSkgLSAxICYmXG4gICAgICBkaXN0YW5jZUZyb21FbmQgPD0gdGhyZXNob2xkICYmXG4gICAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggIT09IHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoXG4gICAgKSB7XG4gICAgICAvLyBPbmx5IGNhbGwgb25FbmRSZWFjaGVkIG9uY2UgZm9yIGEgZ2l2ZW4gY29udGVudCBsZW5ndGhcbiAgICAgIHRoaXMuX3NlbnRFbmRGb3JDb250ZW50TGVuZ3RoID0gdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoO1xuICAgICAgb25FbmRSZWFjaGVkKHtkaXN0YW5jZUZyb21FbmR9KTtcbiAgICB9IGVsc2UgaWYgKGRpc3RhbmNlRnJvbUVuZCA+IHRocmVzaG9sZCkge1xuICAgICAgLy8gSWYgdGhlIHVzZXIgc2Nyb2xscyBhd2F5IGZyb20gdGhlIGVuZCBhbmQgYmFjayBhZ2FpbiBjYXVzZVxuICAgICAgLy8gYW4gb25FbmRSZWFjaGVkIHRvIGJlIHRyaWdnZXJlZCBhZ2FpblxuICAgICAgdGhpcy5fc2VudEVuZEZvckNvbnRlbnRMZW5ndGggPSAwO1xuICAgIH1cbiAgfVxuXG4gIF9vbkNvbnRlbnRTaXplQ2hhbmdlID0gKHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSA9PiB7XG4gICAgaWYgKFxuICAgICAgd2lkdGggPiAwICYmXG4gICAgICBoZWlnaHQgPiAwICYmXG4gICAgICB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCAhPSBudWxsICYmXG4gICAgICB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCA+IDAgJiZcbiAgICAgICF0aGlzLl9oYXNUcmlnZ2VyZWRJbml0aWFsU2Nyb2xsVG9JbmRleFxuICAgICkge1xuICAgICAgaWYgKHRoaXMucHJvcHMuY29udGVudE9mZnNldCA9PSBudWxsKSB7XG4gICAgICAgIHRoaXMuc2Nyb2xsVG9JbmRleCh7XG4gICAgICAgICAgYW5pbWF0ZWQ6IGZhbHNlLFxuICAgICAgICAgIGluZGV4OiB0aGlzLnByb3BzLmluaXRpYWxTY3JvbGxJbmRleCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICB0aGlzLl9oYXNUcmlnZ2VyZWRJbml0aWFsU2Nyb2xsVG9JbmRleCA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0aGlzLnByb3BzLm9uQ29udGVudFNpemVDaGFuZ2UpIHtcbiAgICAgIHRoaXMucHJvcHMub25Db250ZW50U2l6ZUNoYW5nZSh3aWR0aCwgaGVpZ2h0KTtcbiAgICB9XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5jb250ZW50TGVuZ3RoID0gdGhpcy5fc2VsZWN0TGVuZ3RoKHtoZWlnaHQsIHdpZHRofSk7XG4gICAgdGhpcy5fc2NoZWR1bGVDZWxsc1RvUmVuZGVyVXBkYXRlKCk7XG4gICAgdGhpcy5fbWF5YmVDYWxsT25FbmRSZWFjaGVkKCk7XG4gIH07XG5cbiAgLyogVHJhbnNsYXRlcyBtZXRyaWNzIGZyb20gYSBzY3JvbGwgZXZlbnQgaW4gYSBwYXJlbnQgVmlydHVhbGl6ZWRMaXN0IGludG9cbiAgICogY29vcmRpbmF0ZXMgcmVsYXRpdmUgdG8gdGhlIGNoaWxkIGxpc3QuXG4gICAqL1xuICBfY29udmVydFBhcmVudFNjcm9sbE1ldHJpY3MgPSAobWV0cmljczoge1xuICAgIHZpc2libGVMZW5ndGg6IG51bWJlcixcbiAgICBvZmZzZXQ6IG51bWJlcixcbiAgICAuLi5cbiAgfSk6ICRGbG93Rml4TWUgPT4ge1xuICAgIC8vIE9mZnNldCBvZiB0aGUgdG9wIG9mIHRoZSBuZXN0ZWQgbGlzdCByZWxhdGl2ZSB0byB0aGUgdG9wIG9mIGl0cyBwYXJlbnQncyB2aWV3cG9ydFxuICAgIGNvbnN0IG9mZnNldCA9IG1ldHJpY3Mub2Zmc2V0IC0gdGhpcy5fb2Zmc2V0RnJvbVBhcmVudFZpcnR1YWxpemVkTGlzdDtcbiAgICAvLyBDaGlsZCdzIHZpc2libGUgbGVuZ3RoIGlzIHRoZSBzYW1lIGFzIGl0cyBwYXJlbnQnc1xuICAgIGNvbnN0IHZpc2libGVMZW5ndGggPSBtZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgY29uc3QgZE9mZnNldCA9IG9mZnNldCAtIHRoaXMuX3Njcm9sbE1ldHJpY3Mub2Zmc2V0O1xuICAgIGNvbnN0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGg7XG5cbiAgICByZXR1cm4ge1xuICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBvZmZzZXQsXG4gICAgICBkT2Zmc2V0LFxuICAgIH07XG4gIH07XG5cbiAgX29uU2Nyb2xsID0gKGU6IE9iamVjdCkgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0Ll9vblNjcm9sbChlKTtcbiAgICB9KTtcbiAgICBpZiAodGhpcy5wcm9wcy5vblNjcm9sbCkge1xuICAgICAgdGhpcy5wcm9wcy5vblNjcm9sbChlKTtcbiAgICB9XG4gICAgY29uc3QgdGltZXN0YW1wID0gZS50aW1lU3RhbXA7XG4gICAgbGV0IHZpc2libGVMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5sYXlvdXRNZWFzdXJlbWVudCk7XG4gICAgbGV0IGNvbnRlbnRMZW5ndGggPSB0aGlzLl9zZWxlY3RMZW5ndGgoZS5uYXRpdmVFdmVudC5jb250ZW50U2l6ZSk7XG4gICAgbGV0IG9mZnNldCA9IHRoaXMuX3NlbGVjdE9mZnNldChlLm5hdGl2ZUV2ZW50LmNvbnRlbnRPZmZzZXQpO1xuICAgIGxldCBkT2Zmc2V0ID0gb2Zmc2V0IC0gdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQ7XG5cbiAgICBpZiAodGhpcy5faXNOZXN0ZWRXaXRoU2FtZU9yaWVudGF0aW9uKCkpIHtcbiAgICAgIGlmICh0aGlzLl9zY3JvbGxNZXRyaWNzLmNvbnRlbnRMZW5ndGggPT09IDApIHtcbiAgICAgICAgLy8gSWdub3JlIHNjcm9sbCBldmVudHMgdW50aWwgb25MYXlvdXQgaGFzIGJlZW4gY2FsbGVkIGFuZCB3ZVxuICAgICAgICAvLyBrbm93IG91ciBvZmZzZXQgZnJvbSBvdXIgb2Zmc2V0IGZyb20gb3VyIHBhcmVudFxuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICAoe3Zpc2libGVMZW5ndGgsIGNvbnRlbnRMZW5ndGgsIG9mZnNldCwgZE9mZnNldH0gPVxuICAgICAgICB0aGlzLl9jb252ZXJ0UGFyZW50U2Nyb2xsTWV0cmljcyh7XG4gICAgICAgICAgdmlzaWJsZUxlbmd0aCxcbiAgICAgICAgICBvZmZzZXQsXG4gICAgICAgIH0pKTtcbiAgICB9XG5cbiAgICBjb25zdCBkdCA9IHRoaXMuX3Njcm9sbE1ldHJpY3MudGltZXN0YW1wXG4gICAgICA/IE1hdGgubWF4KDEsIHRpbWVzdGFtcCAtIHRoaXMuX3Njcm9sbE1ldHJpY3MudGltZXN0YW1wKVxuICAgICAgOiAxO1xuICAgIGNvbnN0IHZlbG9jaXR5ID0gZE9mZnNldCAvIGR0O1xuXG4gICAgaWYgKFxuICAgICAgZHQgPiA1MDAgJiZcbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MuZHQgPiA1MDAgJiZcbiAgICAgIGNvbnRlbnRMZW5ndGggPiA1ICogdmlzaWJsZUxlbmd0aCAmJlxuICAgICAgIXRoaXMuX2hhc1dhcm5lZC5wZXJmXG4gICAgKSB7XG4gICAgICBpbmZvTG9nKFxuICAgICAgICAnVmlydHVhbGl6ZWRMaXN0OiBZb3UgaGF2ZSBhIGxhcmdlIGxpc3QgdGhhdCBpcyBzbG93IHRvIHVwZGF0ZSAtIG1ha2Ugc3VyZSB5b3VyICcgK1xuICAgICAgICAgICdyZW5kZXJJdGVtIGZ1bmN0aW9uIHJlbmRlcnMgY29tcG9uZW50cyB0aGF0IGZvbGxvdyBSZWFjdCBwZXJmb3JtYW5jZSBiZXN0IHByYWN0aWNlcyAnICtcbiAgICAgICAgICAnbGlrZSBQdXJlQ29tcG9uZW50LCBzaG91bGRDb21wb25lbnRVcGRhdGUsIGV0Yy4nLFxuICAgICAgICB7ZHQsIHByZXZEdDogdGhpcy5fc2Nyb2xsTWV0cmljcy5kdCwgY29udGVudExlbmd0aH0sXG4gICAgICApO1xuICAgICAgdGhpcy5faGFzV2FybmVkLnBlcmYgPSB0cnVlO1xuICAgIH1cblxuICAgIC8vIEZvciBpbnZhbGlkIG5lZ2F0aXZlIHZhbHVlcyAody8gUlRMKSwgc2V0IHRoaXMgdG8gMS5cbiAgICBjb25zdCB6b29tU2NhbGUgPSBlLm5hdGl2ZUV2ZW50Lnpvb21TY2FsZSA8IDAgPyAxIDogZS5uYXRpdmVFdmVudC56b29tU2NhbGU7XG4gICAgdGhpcy5fc2Nyb2xsTWV0cmljcyA9IHtcbiAgICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgICBkdCxcbiAgICAgIGRPZmZzZXQsXG4gICAgICBvZmZzZXQsXG4gICAgICB0aW1lc3RhbXAsXG4gICAgICB2ZWxvY2l0eSxcbiAgICAgIHZpc2libGVMZW5ndGgsXG4gICAgICB6b29tU2NhbGUsXG4gICAgfTtcbiAgICB0aGlzLl91cGRhdGVWaWV3YWJsZUl0ZW1zKHRoaXMucHJvcHMsIHRoaXMuc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydCk7XG4gICAgaWYgKCF0aGlzLnByb3BzKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIHRoaXMuX21heWJlQ2FsbE9uRW5kUmVhY2hlZCgpO1xuICAgIGlmICh2ZWxvY2l0eSAhPT0gMCkge1xuICAgICAgdGhpcy5fZmlsbFJhdGVIZWxwZXIuYWN0aXZhdGUoKTtcbiAgICB9XG4gICAgdGhpcy5fY29tcHV0ZUJsYW5rbmVzcygpO1xuICAgIHRoaXMuX3NjaGVkdWxlQ2VsbHNUb1JlbmRlclVwZGF0ZSgpO1xuICB9O1xuXG4gIF9zY2hlZHVsZUNlbGxzVG9SZW5kZXJVcGRhdGUoKSB7XG4gICAgY29uc3Qge2ZpcnN0LCBsYXN0fSA9IHRoaXMuc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydDtcbiAgICBjb25zdCB7b2Zmc2V0LCB2aXNpYmxlTGVuZ3RoLCB2ZWxvY2l0eX0gPSB0aGlzLl9zY3JvbGxNZXRyaWNzO1xuICAgIGNvbnN0IGl0ZW1Db3VudCA9IHRoaXMucHJvcHMuZ2V0SXRlbUNvdW50KHRoaXMucHJvcHMuZGF0YSk7XG4gICAgbGV0IGhpUHJpID0gZmFsc2U7XG4gICAgY29uc3Qgb25FbmRSZWFjaGVkVGhyZXNob2xkID0gb25FbmRSZWFjaGVkVGhyZXNob2xkT3JEZWZhdWx0KFxuICAgICAgdGhpcy5wcm9wcy5vbkVuZFJlYWNoZWRUaHJlc2hvbGQsXG4gICAgKTtcbiAgICBjb25zdCBzY3JvbGxpbmdUaHJlc2hvbGQgPSAob25FbmRSZWFjaGVkVGhyZXNob2xkICogdmlzaWJsZUxlbmd0aCkgLyAyO1xuICAgIC8vIE1hcmsgYXMgaGlnaCBwcmlvcml0eSBpZiB3ZSdyZSBjbG9zZSB0byB0aGUgc3RhcnQgb2YgdGhlIGZpcnN0IGl0ZW1cbiAgICAvLyBCdXQgb25seSBpZiB0aGVyZSBhcmUgaXRlbXMgYmVmb3JlIHRoZSBmaXJzdCByZW5kZXJlZCBpdGVtXG4gICAgaWYgKGZpcnN0ID4gMCkge1xuICAgICAgY29uc3QgZGlzdFRvcCA9XG4gICAgICAgIG9mZnNldCAtIHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goZmlyc3QsIHRoaXMucHJvcHMpLm9mZnNldDtcbiAgICAgIGhpUHJpID1cbiAgICAgICAgaGlQcmkgfHwgZGlzdFRvcCA8IDAgfHwgKHZlbG9jaXR5IDwgLTIgJiYgZGlzdFRvcCA8IHNjcm9sbGluZ1RocmVzaG9sZCk7XG4gICAgfVxuICAgIC8vIE1hcmsgYXMgaGlnaCBwcmlvcml0eSBpZiB3ZSdyZSBjbG9zZSB0byB0aGUgZW5kIG9mIHRoZSBsYXN0IGl0ZW1cbiAgICAvLyBCdXQgb25seSBpZiB0aGVyZSBhcmUgaXRlbXMgYWZ0ZXIgdGhlIGxhc3QgcmVuZGVyZWQgaXRlbVxuICAgIGlmIChsYXN0ID49IDAgJiYgbGFzdCA8IGl0ZW1Db3VudCAtIDEpIHtcbiAgICAgIGNvbnN0IGRpc3RCb3R0b20gPVxuICAgICAgICB0aGlzLl9fZ2V0RnJhbWVNZXRyaWNzQXBwcm94KGxhc3QsIHRoaXMucHJvcHMpLm9mZnNldCAtXG4gICAgICAgIChvZmZzZXQgKyB2aXNpYmxlTGVuZ3RoKTtcbiAgICAgIGhpUHJpID1cbiAgICAgICAgaGlQcmkgfHxcbiAgICAgICAgZGlzdEJvdHRvbSA8IDAgfHxcbiAgICAgICAgKHZlbG9jaXR5ID4gMiAmJiBkaXN0Qm90dG9tIDwgc2Nyb2xsaW5nVGhyZXNob2xkKTtcbiAgICB9XG4gICAgLy8gT25seSB0cmlnZ2VyIGhpZ2gtcHJpb3JpdHkgdXBkYXRlcyBpZiB3ZSd2ZSBhY3R1YWxseSByZW5kZXJlZCBjZWxscyxcbiAgICAvLyBhbmQgd2l0aCB0aGF0IHNpemUgZXN0aW1hdGUsIGFjY3VyYXRlbHkgY29tcHV0ZSBob3cgbWFueSBjZWxscyB3ZSBzaG91bGQgcmVuZGVyLlxuICAgIC8vIE90aGVyd2lzZSwgaXQgd291bGQganVzdCByZW5kZXIgYXMgbWFueSBjZWxscyBhcyBpdCBjYW4gKG9mIHplcm8gZGltZW5zaW9uKSxcbiAgICAvLyBlYWNoIHRpbWUgdGhyb3VnaCBhdHRlbXB0aW5nIHRvIHJlbmRlciBtb3JlIChsaW1pdGVkIGJ5IG1heFRvUmVuZGVyUGVyQmF0Y2gpLFxuICAgIC8vIHN0YXJ2aW5nIHRoZSByZW5kZXJlciBmcm9tIGFjdHVhbGx5IGxheWluZyBvdXQgdGhlIG9iamVjdHMgYW5kIGNvbXB1dGluZyBfYXZlcmFnZUNlbGxMZW5ndGguXG4gICAgLy8gSWYgdGhpcyBpcyB0cmlnZ2VyZWQgaW4gYW4gYGNvbXBvbmVudERpZFVwZGF0ZWAgZm9sbG93ZWQgYnkgYSBoaVByaSBjZWxsVG9SZW5kZXJVcGRhdGVcbiAgICAvLyBXZSBzaG91bGRuJ3QgZG8gYW5vdGhlciBoaXByaSBjZWxsVG9SZW5kZXJVcGRhdGVcbiAgICBpZiAoXG4gICAgICBoaVByaSAmJlxuICAgICAgKHRoaXMuX2F2ZXJhZ2VDZWxsTGVuZ3RoIHx8IHRoaXMucHJvcHMuZ2V0SXRlbUxheW91dCkgJiZcbiAgICAgICF0aGlzLl9oaVByaUluUHJvZ3Jlc3NcbiAgICApIHtcbiAgICAgIHRoaXMuX2hpUHJpSW5Qcm9ncmVzcyA9IHRydWU7XG4gICAgICAvLyBEb24ndCB3b3JyeSBhYm91dCBpbnRlcmFjdGlvbnMgd2hlbiBzY3JvbGxpbmcgcXVpY2tseTsgZm9jdXMgb24gZmlsbGluZyBjb250ZW50IGFzIGZhc3RcbiAgICAgIC8vIGFzIHBvc3NpYmxlLlxuICAgICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIuZGlzcG9zZSh7YWJvcnQ6IHRydWV9KTtcbiAgICAgIHRoaXMuX3VwZGF0ZUNlbGxzVG9SZW5kZXIoKTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdXBkYXRlQ2VsbHNUb1JlbmRlckJhdGNoZXIuc2NoZWR1bGUoKTtcbiAgICB9XG4gIH1cblxuICBfb25TY3JvbGxCZWdpbkRyYWcgPSAoZTogU2Nyb2xsRXZlbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5fb25TY3JvbGxCZWdpbkRyYWcoZSk7XG4gICAgfSk7XG4gICAgdGhpcy5fdmlld2FiaWxpdHlUdXBsZXMuZm9yRWFjaCh0dXBsZSA9PiB7XG4gICAgICB0dXBsZS52aWV3YWJpbGl0eUhlbHBlci5yZWNvcmRJbnRlcmFjdGlvbigpO1xuICAgIH0pO1xuICAgIHRoaXMuX2hhc0ludGVyYWN0ZWQgPSB0cnVlO1xuICAgIHRoaXMucHJvcHMub25TY3JvbGxCZWdpbkRyYWcgJiYgdGhpcy5wcm9wcy5vblNjcm9sbEJlZ2luRHJhZyhlKTtcbiAgfTtcblxuICBfb25TY3JvbGxFbmREcmFnID0gKGU6IFNjcm9sbEV2ZW50KTogdm9pZCA9PiB7XG4gICAgdGhpcy5fbmVzdGVkQ2hpbGRMaXN0cy5mb3JFYWNoKGNoaWxkTGlzdCA9PiB7XG4gICAgICBjaGlsZExpc3QuX29uU2Nyb2xsRW5kRHJhZyhlKTtcbiAgICB9KTtcbiAgICBjb25zdCB7dmVsb2NpdHl9ID0gZS5uYXRpdmVFdmVudDtcbiAgICBpZiAodmVsb2NpdHkpIHtcbiAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmVsb2NpdHkgPSB0aGlzLl9zZWxlY3RPZmZzZXQodmVsb2NpdHkpO1xuICAgIH1cbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5wcm9wcy5vblNjcm9sbEVuZERyYWcgJiYgdGhpcy5wcm9wcy5vblNjcm9sbEVuZERyYWcoZSk7XG4gIH07XG5cbiAgX29uTW9tZW50dW1TY3JvbGxCZWdpbiA9IChlOiBTY3JvbGxFdmVudCk6IHZvaWQgPT4ge1xuICAgIHRoaXMuX25lc3RlZENoaWxkTGlzdHMuZm9yRWFjaChjaGlsZExpc3QgPT4ge1xuICAgICAgY2hpbGRMaXN0Ll9vbk1vbWVudHVtU2Nyb2xsQmVnaW4oZSk7XG4gICAgfSk7XG4gICAgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsQmVnaW4gJiYgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsQmVnaW4oZSk7XG4gIH07XG5cbiAgX29uTW9tZW50dW1TY3JvbGxFbmQgPSAoZTogU2Nyb2xsRXZlbnQpOiB2b2lkID0+IHtcbiAgICB0aGlzLl9uZXN0ZWRDaGlsZExpc3RzLmZvckVhY2goY2hpbGRMaXN0ID0+IHtcbiAgICAgIGNoaWxkTGlzdC5fb25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgICB9KTtcbiAgICB0aGlzLl9zY3JvbGxNZXRyaWNzLnZlbG9jaXR5ID0gMDtcbiAgICB0aGlzLl9jb21wdXRlQmxhbmtuZXNzKCk7XG4gICAgdGhpcy5wcm9wcy5vbk1vbWVudHVtU2Nyb2xsRW5kICYmIHRoaXMucHJvcHMub25Nb21lbnR1bVNjcm9sbEVuZChlKTtcbiAgfTtcblxuICBfdXBkYXRlQ2VsbHNUb1JlbmRlciA9ICgpID0+IHtcbiAgICB0aGlzLnNldFN0YXRlKChzdGF0ZSwgcHJvcHMpID0+IHtcbiAgICAgIGNvbnN0IGNlbGxzQXJvdW5kVmlld3BvcnQgPSB0aGlzLl9hZGp1c3RDZWxsc0Fyb3VuZFZpZXdwb3J0KFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydCxcbiAgICAgICk7XG4gICAgICBjb25zdCByZW5kZXJNYXNrID0gVmlydHVhbGl6ZWRMaXN0Ll9jcmVhdGVSZW5kZXJNYXNrKFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydCxcbiAgICAgICAgdGhpcy5fZ2V0Tm9uVmlld3BvcnRSZW5kZXJSZWdpb25zKHByb3BzKSxcbiAgICAgICk7XG5cbiAgICAgIGlmIChcbiAgICAgICAgY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCA9PT0gc3RhdGUuY2VsbHNBcm91bmRWaWV3cG9ydC5maXJzdCAmJlxuICAgICAgICBjZWxsc0Fyb3VuZFZpZXdwb3J0Lmxhc3QgPT09IHN0YXRlLmNlbGxzQXJvdW5kVmlld3BvcnQubGFzdCAmJlxuICAgICAgICByZW5kZXJNYXNrLmVxdWFscyhzdGF0ZS5yZW5kZXJNYXNrKVxuICAgICAgKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge2NlbGxzQXJvdW5kVmlld3BvcnQsIHJlbmRlck1hc2t9O1xuICAgIH0pO1xuICB9O1xuXG4gIF9jcmVhdGVWaWV3VG9rZW4gPSAoXG4gICAgaW5kZXg6IG51bWJlcixcbiAgICBpc1ZpZXdhYmxlOiBib29sZWFuLFxuICAgIHByb3BzOiBGcmFtZU1ldHJpY1Byb3BzLFxuICAgIC8vICRGbG93Rml4TWVbbWlzc2luZy1sb2NhbC1hbm5vdF1cbiAgKSA9PiB7XG4gICAgY29uc3Qge2RhdGEsIGdldEl0ZW19ID0gcHJvcHM7XG4gICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaW5kZXgpO1xuICAgIHJldHVybiB7XG4gICAgICBpbmRleCxcbiAgICAgIGl0ZW0sXG4gICAgICBrZXk6IHRoaXMuX2tleUV4dHJhY3RvcihpdGVtLCBpbmRleCwgcHJvcHMpLFxuICAgICAgaXNWaWV3YWJsZSxcbiAgICB9O1xuICB9O1xuXG4gIC8qKlxuICAgKiBHZXRzIGFuIGFwcHJveGltYXRlIG9mZnNldCB0byBhbiBpdGVtIGF0IGEgZ2l2ZW4gaW5kZXguIFN1cHBvcnRzXG4gICAqIGZyYWN0aW9uYWwgaW5kaWNlcy5cbiAgICovXG4gIF9nZXRPZmZzZXRBcHByb3ggPSAoaW5kZXg6IG51bWJlciwgcHJvcHM6IEZyYW1lTWV0cmljUHJvcHMpOiBudW1iZXIgPT4ge1xuICAgIGlmIChOdW1iZXIuaXNJbnRlZ2VyKGluZGV4KSkge1xuICAgICAgcmV0dXJuIHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goaW5kZXgsIHByb3BzKS5vZmZzZXQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGZyYW1lTWV0cmljcyA9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goXG4gICAgICAgIE1hdGguZmxvb3IoaW5kZXgpLFxuICAgICAgICBwcm9wcyxcbiAgICAgICk7XG4gICAgICBjb25zdCByZW1haW5kZXIgPSBpbmRleCAtIE1hdGguZmxvb3IoaW5kZXgpO1xuICAgICAgcmV0dXJuIGZyYW1lTWV0cmljcy5vZmZzZXQgKyByZW1haW5kZXIgKiBmcmFtZU1ldHJpY3MubGVuZ3RoO1xuICAgIH1cbiAgfTtcblxuICBfX2dldEZyYW1lTWV0cmljc0FwcHJveDogKFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgcHJvcHM6IEZyYW1lTWV0cmljUHJvcHMsXG4gICkgPT4ge1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIC4uLlxuICB9ID0gKGluZGV4LCBwcm9wcykgPT4ge1xuICAgIGNvbnN0IGZyYW1lID0gdGhpcy5fZ2V0RnJhbWVNZXRyaWNzKGluZGV4LCBwcm9wcyk7XG4gICAgaWYgKGZyYW1lICYmIGZyYW1lLmluZGV4ID09PSBpbmRleCkge1xuICAgICAgLy8gY2hlY2sgZm9yIGludmFsaWQgZnJhbWVzIGR1ZSB0byByb3cgcmUtb3JkZXJpbmdcbiAgICAgIHJldHVybiBmcmFtZTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3Qge2RhdGEsIGdldEl0ZW1Db3VudCwgZ2V0SXRlbUxheW91dH0gPSBwcm9wcztcbiAgICAgIGludmFyaWFudChcbiAgICAgICAgaW5kZXggPj0gMCAmJiBpbmRleCA8IGdldEl0ZW1Db3VudChkYXRhKSxcbiAgICAgICAgJ1RyaWVkIHRvIGdldCBmcmFtZSBmb3Igb3V0IG9mIHJhbmdlIGluZGV4ICcgKyBpbmRleCxcbiAgICAgICk7XG4gICAgICBpbnZhcmlhbnQoXG4gICAgICAgICFnZXRJdGVtTGF5b3V0LFxuICAgICAgICAnU2hvdWxkIG5vdCBoYXZlIHRvIGVzdGltYXRlIGZyYW1lcyB3aGVuIGEgbWVhc3VyZW1lbnQgbWV0cmljcyBmdW5jdGlvbiBpcyBwcm92aWRlZCcsXG4gICAgICApO1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbGVuZ3RoOiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCxcbiAgICAgICAgb2Zmc2V0OiB0aGlzLl9hdmVyYWdlQ2VsbExlbmd0aCAqIGluZGV4LFxuICAgICAgfTtcbiAgICB9XG4gIH07XG5cbiAgX2dldEZyYW1lTWV0cmljcyA9IChcbiAgICBpbmRleDogbnVtYmVyLFxuICAgIHByb3BzOiBGcmFtZU1ldHJpY1Byb3BzLFxuICApOiA/e1xuICAgIGxlbmd0aDogbnVtYmVyLFxuICAgIG9mZnNldDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgaW5MYXlvdXQ/OiBib29sZWFuLFxuICAgIC4uLlxuICB9ID0+IHtcbiAgICBjb25zdCB7ZGF0YSwgZ2V0SXRlbSwgZ2V0SXRlbUNvdW50LCBnZXRJdGVtTGF5b3V0fSA9IHByb3BzO1xuICAgIGludmFyaWFudChcbiAgICAgIGluZGV4ID49IDAgJiYgaW5kZXggPCBnZXRJdGVtQ291bnQoZGF0YSksXG4gICAgICAnVHJpZWQgdG8gZ2V0IGZyYW1lIGZvciBvdXQgb2YgcmFuZ2UgaW5kZXggJyArIGluZGV4LFxuICAgICk7XG4gICAgY29uc3QgaXRlbSA9IGdldEl0ZW0oZGF0YSwgaW5kZXgpO1xuICAgIGNvbnN0IGZyYW1lID0gaXRlbSAmJiB0aGlzLl9mcmFtZXNbdGhpcy5fa2V5RXh0cmFjdG9yKGl0ZW0sIGluZGV4LCBwcm9wcyldO1xuICAgIGlmICghZnJhbWUgfHwgZnJhbWUuaW5kZXggIT09IGluZGV4KSB7XG4gICAgICBpZiAoZ2V0SXRlbUxheW91dCkge1xuICAgICAgICAvKiAkRmxvd0ZpeE1lW3Byb3AtbWlzc2luZ10gKD49MC42My4wIHNpdGU9cmVhY3RfbmF0aXZlX2ZiKSBUaGlzIGNvbW1lbnRcbiAgICAgICAgICogc3VwcHJlc3NlcyBhbiBlcnJvciBmb3VuZCB3aGVuIEZsb3cgdjAuNjMgd2FzIGRlcGxveWVkLiBUbyBzZWUgdGhlIGVycm9yXG4gICAgICAgICAqIGRlbGV0ZSB0aGlzIGNvbW1lbnQgYW5kIHJ1biBGbG93LiAqL1xuICAgICAgICByZXR1cm4gZ2V0SXRlbUxheW91dChkYXRhLCBpbmRleCk7XG4gICAgICB9XG4gICAgfVxuICAgIHJldHVybiBmcmFtZTtcbiAgfTtcblxuICBfZ2V0Tm9uVmlld3BvcnRSZW5kZXJSZWdpb25zID0gKFxuICAgIHByb3BzOiBGcmFtZU1ldHJpY1Byb3BzLFxuICApOiAkUmVhZE9ubHlBcnJheTx7XG4gICAgZmlyc3Q6IG51bWJlcixcbiAgICBsYXN0OiBudW1iZXIsXG4gIH0+ID0+IHtcbiAgICAvLyBLZWVwIGEgdmlld3BvcnQncyB3b3J0aCBvZiBjb250ZW50IGFyb3VuZCB0aGUgbGFzdCBmb2N1c2VkIGNlbGwgdG8gYWxsb3dcbiAgICAvLyByYW5kb20gbmF2aWdhdGlvbiBhcm91bmQgaXQgd2l0aG91dCBhbnkgYmxhbmtpbmcuIEUuZy4gdGFiYmluZyBmcm9tIG9uZVxuICAgIC8vIGZvY3VzZWQgaXRlbSBvdXQgb2Ygdmlld3BvcnQgdG8gYW5vdGhlci5cbiAgICBpZiAoXG4gICAgICAhKHRoaXMuX2xhc3RGb2N1c2VkQ2VsbEtleSAmJiB0aGlzLl9jZWxsUmVmc1t0aGlzLl9sYXN0Rm9jdXNlZENlbGxLZXldKVxuICAgICkge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGxhc3RGb2N1c2VkQ2VsbFJlbmRlcmVyID0gdGhpcy5fY2VsbFJlZnNbdGhpcy5fbGFzdEZvY3VzZWRDZWxsS2V5XTtcbiAgICBjb25zdCBmb2N1c2VkQ2VsbEluZGV4ID0gbGFzdEZvY3VzZWRDZWxsUmVuZGVyZXIucHJvcHMuaW5kZXg7XG4gICAgY29uc3QgaXRlbUNvdW50ID0gcHJvcHMuZ2V0SXRlbUNvdW50KHByb3BzLmRhdGEpO1xuXG4gICAgLy8gVGhlIGNlbGwgbWF5IGhhdmUgYmVlbiB1bm1vdW50ZWQgYW5kIGhhdmUgYSBzdGFsZSBpbmRleFxuICAgIGlmIChcbiAgICAgIGZvY3VzZWRDZWxsSW5kZXggPj0gaXRlbUNvdW50IHx8XG4gICAgICB0aGlzLl9pbmRpY2VzVG9LZXlzLmdldChmb2N1c2VkQ2VsbEluZGV4KSAhPT0gdGhpcy5fbGFzdEZvY3VzZWRDZWxsS2V5XG4gICAgKSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgbGV0IGZpcnN0ID0gZm9jdXNlZENlbGxJbmRleDtcbiAgICBsZXQgaGVpZ2h0T2ZDZWxsc0JlZm9yZUZvY3VzZWQgPSAwO1xuICAgIGZvciAoXG4gICAgICBsZXQgaSA9IGZpcnN0IC0gMTtcbiAgICAgIGkgPj0gMCAmJiBoZWlnaHRPZkNlbGxzQmVmb3JlRm9jdXNlZCA8IHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aDtcbiAgICAgIGktLVxuICAgICkge1xuICAgICAgZmlyc3QtLTtcbiAgICAgIGhlaWdodE9mQ2VsbHNCZWZvcmVGb2N1c2VkICs9IHRoaXMuX19nZXRGcmFtZU1ldHJpY3NBcHByb3goXG4gICAgICAgIGksXG4gICAgICAgIHByb3BzLFxuICAgICAgKS5sZW5ndGg7XG4gICAgfVxuXG4gICAgbGV0IGxhc3QgPSBmb2N1c2VkQ2VsbEluZGV4O1xuICAgIGxldCBoZWlnaHRPZkNlbGxzQWZ0ZXJGb2N1c2VkID0gMDtcbiAgICBmb3IgKFxuICAgICAgbGV0IGkgPSBsYXN0ICsgMTtcbiAgICAgIGkgPCBpdGVtQ291bnQgJiZcbiAgICAgIGhlaWdodE9mQ2VsbHNBZnRlckZvY3VzZWQgPCB0aGlzLl9zY3JvbGxNZXRyaWNzLnZpc2libGVMZW5ndGg7XG4gICAgICBpKytcbiAgICApIHtcbiAgICAgIGxhc3QrKztcbiAgICAgIGhlaWdodE9mQ2VsbHNBZnRlckZvY3VzZWQgKz0gdGhpcy5fX2dldEZyYW1lTWV0cmljc0FwcHJveChcbiAgICAgICAgaSxcbiAgICAgICAgcHJvcHMsXG4gICAgICApLmxlbmd0aDtcbiAgICB9XG5cbiAgICByZXR1cm4gW3tmaXJzdCwgbGFzdH1dO1xuICB9O1xuXG4gIF91cGRhdGVWaWV3YWJsZUl0ZW1zKFxuICAgIHByb3BzOiBGcmFtZU1ldHJpY1Byb3BzLFxuICAgIGNlbGxzQXJvdW5kVmlld3BvcnQ6IHtmaXJzdDogbnVtYmVyLCBsYXN0OiBudW1iZXJ9LFxuICApIHtcbiAgICB0aGlzLl92aWV3YWJpbGl0eVR1cGxlcy5mb3JFYWNoKHR1cGxlID0+IHtcbiAgICAgIHR1cGxlLnZpZXdhYmlsaXR5SGVscGVyLm9uVXBkYXRlKFxuICAgICAgICBwcm9wcyxcbiAgICAgICAgdGhpcy5fc2Nyb2xsTWV0cmljcy5vZmZzZXQsXG4gICAgICAgIHRoaXMuX3Njcm9sbE1ldHJpY3MudmlzaWJsZUxlbmd0aCxcbiAgICAgICAgdGhpcy5fZ2V0RnJhbWVNZXRyaWNzLFxuICAgICAgICB0aGlzLl9jcmVhdGVWaWV3VG9rZW4sXG4gICAgICAgIHR1cGxlLm9uVmlld2FibGVJdGVtc0NoYW5nZWQsXG4gICAgICAgIGNlbGxzQXJvdW5kVmlld3BvcnQsXG4gICAgICApO1xuICAgIH0pO1xuICB9XG59XG5cbmNvbnN0IHN0eWxlcyA9IFN0eWxlU2hlZXQuY3JlYXRlKHtcbiAgdmVydGljYWxseUludmVydGVkOiB7XG4gICAgdHJhbnNmb3JtOiBbe3NjYWxlWTogLTF9XSxcbiAgfSxcbiAgaG9yaXpvbnRhbGx5SW52ZXJ0ZWQ6IHtcbiAgICB0cmFuc2Zvcm06IFt7c2NhbGVYOiAtMX1dLFxuICB9LFxuICBkZWJ1Zzoge1xuICAgIGZsZXg6IDEsXG4gIH0sXG4gIGRlYnVnT3ZlcmxheUJhc2U6IHtcbiAgICBwb3NpdGlvbjogJ2Fic29sdXRlJyxcbiAgICB0b3A6IDAsXG4gICAgcmlnaHQ6IDAsXG4gIH0sXG4gIGRlYnVnT3ZlcmxheToge1xuICAgIGJvdHRvbTogMCxcbiAgICB3aWR0aDogMjAsXG4gICAgYm9yZGVyQ29sb3I6ICdibHVlJyxcbiAgICBib3JkZXJXaWR0aDogMSxcbiAgfSxcbiAgZGVidWdPdmVybGF5RnJhbWU6IHtcbiAgICBsZWZ0OiAwLFxuICAgIGJhY2tncm91bmRDb2xvcjogJ29yYW5nZScsXG4gIH0sXG4gIGRlYnVnT3ZlcmxheUZyYW1lTGFzdDoge1xuICAgIGxlZnQ6IDAsXG4gICAgYm9yZGVyQ29sb3I6ICdncmVlbicsXG4gICAgYm9yZGVyV2lkdGg6IDIsXG4gIH0sXG4gIGRlYnVnT3ZlcmxheUZyYW1lVmlzOiB7XG4gICAgbGVmdDogMCxcbiAgICBib3JkZXJDb2xvcjogJ3JlZCcsXG4gICAgYm9yZGVyV2lkdGg6IDIsXG4gIH0sXG59KTtcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQXVCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUtBO0FBSUE7QUFDQTtBQUErQjtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBSS9CLElBQU1BLHNCQUFzQixHQUFHLEtBQUs7QUFFcEMsSUFBSUMsZ0JBQWdCLEdBQUcsS0FBSztBQUM1QixJQUFJQyx5QkFBaUMsR0FBRyxFQUFFO0FBdUIxQyxTQUFTQyxtQkFBbUIsQ0FBQ0MsVUFBb0IsRUFBRTtFQUNqRCxPQUFPQSxVQUFVLFdBQVZBLFVBQVUsR0FBSSxLQUFLO0FBQzVCO0FBR0EsU0FBU0MsMkJBQTJCLENBQUNDLGtCQUEyQixFQUFFO0VBQ2hFLE9BQU9BLGtCQUFrQixXQUFsQkEsa0JBQWtCLEdBQUksRUFBRTtBQUNqQztBQUdBLFNBQVNDLDRCQUE0QixDQUFDQyxtQkFBNEIsRUFBRTtFQUNsRSxPQUFPQSxtQkFBbUIsV0FBbkJB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